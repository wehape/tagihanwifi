{"version":3,"names":["ew$1","$$1","luxon","DateTime$1","DateTime","Validators","__proto__","between","el","x","z","id","startsWith","document","getElementById","replace","endsWith","ew","hasValue","val","toUpperCase","language","phrase","captcha","creditCard","value","getValue","checkCreditCard","custom","fn","_len","arguments","length","args","Array","_key","datetime","format","checkDate","email","checkEmail","emails","cnt","err","checkEmails","fileRequired","fieldName","elFn","float","checkNumber","guid","checkGuid","integer","checkInteger","max","maxValue","parseNumber","HTMLElement","maxDate","maxDateTime","dataset","formatPattern","maxFormat","parseDate","Date","fromJSDate","zone","formatDateTime","DATE_FORMAT","TIME_FORMAT","min","minValue","minDate","minDateTime","minFormat","mismatchPassword","elPwd","password","raw","ENCRYPTED_PASSWORD","match","RegExp","escapeRegExChars","INVALID_PASSWORD_CHARACTERS","passwordStrength","$el","isMaskedPassword","hasClass","data","phone","checkPhone","range","checkRange","recaptcha","_grecaptcha","grecaptcha","getResponse","regex","pattern","checkByRegEx","required","_$el$data","$p","closest","substring","css","ssn","checkSsn","time","checkTime","url","checkUrl","userLevelId","parseInt","userLevelName","elId","name","trim","level","sameText","includes","toLowerCase","username","INVALID_USERNAME_CHARACTERS","zip","checkZip","_typeof","obj","Symbol","iterator","constructor","prototype","_toPropertyKey","arg","key","input","hint","prim","toPrimitive","undefined","res","call","TypeError","String","Number","_toPrimitive","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","Constructor","protoProps","staticProps","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","bind","_inheritsLoose","subClass","superClass","create","_defineProperty","batchSettings","type","contentType","processData","dataType","toJSON","JSON","stringify","parse","batchSetup","options","extend","Batch","batch","func","this","parent","ajaxSetup","_batch","requests","add","_func$name","clear","send","instance","success","parentSuccess","status","xhr","map","request","settings","childSuccess","statusText","_deliver","ajax","_addRequest","push","_responses$error","_responses$error2","responses","error","description","alert","each","response","_request$settings$com","_request$settings$suc","complete","$ajax","FormBase","pageId","$self","_initiated","element","$element","htmlForm","initSearchPanel","modified","emptyRow","multiPage","autoSuggests","lists","formKeyCountName","submitWithFetch","enableOnInit","filterList","disableForm","body","style","cursor","form","getForm","elements","filter","prop","addClass","trigger","enableForm","$elements","removeClass","not","appendHidden","$form","$dp","attr","find","ar","serializeArray","forEach","appendTo","canSubmit","async","e","_await$this$validate","_this$validate","updateTextArea","validate","$dps","dp","j","test","$els","result","evt","Event","originalEvent","isDefaultPrevented","isObject","submit","_e$originalEvent","formAction","submitter","parseUrl","pathname","setAttribute","getAttribute","method","serialize","fetch","finally","getList","_this$getElement","field","getElement","compileTemplates","values","list","template","isString","templates","getOptionTemplate","_this$element","_this$element2","tagName","getElements","fixId","multiple","rowindex","t","split","prefix","isNumber","updateList","immediate","_Object$entries$find","entries","entry","parents","parentFields","slice","lookupOptions","updateOptions","getOptionValues","updateLists","_form$querySelector","isUndefined","querySelector","selector","_ref","join","_ref2","isArray","deferreds","batchSize","ajaxBatchSize","b","splice","getApiUrl","API_LOOKUP_ACTION","when","then","source","fail","console","log","always","createAutoSuggest","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","AJAX_DELAY","upload","setupFilters","filters","$sf","toggleClass","$df","$delete","$save","saveFilters","CLIENT_SEARCH_FILTER","localStorage","setItem","PROJECT_NAME","SERVER_SEARCH_FILTER","currentPage","done","_result$","off","on","prompt","html","sanitize","prevAll","remove","next","$submenu","insertBefore","currentPageID","action","append","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","cmd","refresh","setLayout","one","init","hasFormData","text","hide","render","loadjs","ready","setTimeout","is","$tab","$panel","$container","width","CONFIRM_CANCEL","href","window","location","from","matches","forms","beforeSend","before","Field","fldvar","validators","invalid","validator","addValidator","_proto","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","resetInvalid","_this$_element","_this$_element$closes","classList","contains","server","fieldContainerSelector","innerHTML","errorMessage","_this$_element$closes2","feedback","setInvalid","focus","setFocus","canFocus","_el$style","_el$classList","hidden","readonly","disabled","display","get","_checkbox","checked","set","_this$_element2","activeElement","Form","_FormBase","_this","tryFocus","addField","fields","getField","addFields","apply","addCustomError","rowIndex","setFieldElement","delay","makeVisible","focusDelay","preventScroll","autoFocusPreventScroll","_focused","_this$_error2","getFocusable","getFieldElements","autoFocus","detailpage","querySelectorAll","_ew$forms$get","TABLE_BASIC_SEARCH","gotoPageByElement","$pane","validateFields","getCurrentRowIndex","row","_form$querySelector2","_e$currentTarget","validateRequired","updateSelected","addcnt","inlineAdd","currentTarget","keycnt","keyCount","gridinsert","rowcnt","_await$this$customVal","_this$customValidate","customValidate","returnFocus","detailpages","_await$frm$validate","frm","_this$getForm$dataset","getFieldValue","_ew$forms$get2","some","_this$getForm$querySe","FormBuilder","setId","setPageId","setLists","setQueryBuilderLists","autoFillTargetFields","childFields","filterFieldVars","filterFields","addList","setFields","setValidate","setCustomValidate","setValidateRequired","setSubmit","setFormKeyCountName","setEmptyRow","setMultiPage","setSubmitWithFetch","setFilterList","setInitSearchPanel","setEnableOnInit","build","MultiPage","context","AjaxLookup","_this$list$parentFiel","_this$list$parentFiel2","elementId","formElement","m","pf","debounce","recordCount","formatResult","opt","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","getOptionValue","getUrl","query","start","params","URLSearchParams","q","n","rnd","random","toString","prepare","transform","results","totalRecordCount","records","toSelect2Data","every","item","hasOwnProperty","Set","gf","group","children","lf","df","df2","df3","df4","_isAutoSuggest","_AjaxLookup","$input","minWidth","maxHeight","highlight","minLength","classNames","forceSelection","forceSelect","lineHeight","paddingY","lookupAllDisplayFields","d","setValue","ta","isOpen","menu","empty","$item","getActiveSelectable","typeahead","close","timer","loadingMore","tpl","suggestion","footer","syncResults","asyncResults","cancel","getSyncResults","Infinity","$menu","$node","$dataset","suggestionHeight","outerHeight","suggestions","rendered","count","h","scrollTop","toggle","loadingMoreTimer","_loadingMoreTimer","$footer","_loadingMoreTimer2","offset","top","getMore","v","findIndex","option","selected","SelectionListOption","datasets","_append","Forms","_ew$getForm","_forms","f","ids","keys","lang","Select2Language","errorLoading","inputTooLong","overChars","maximum","inputTooShort","remainingChars","minimum","maximumSelected","noResults","searching","removeAllItems","removeItem","search","Utils$3","select2","amd","require","_defined","Select2ResultsDecorator","decorated","$results","displayMessage","escapeMarkup","hideLoading","$message","message","className","sort","cols","len","$row","last","$option","pagination","more","createElement","c","attrs","role","Element","msMatchesSelector","webkitMatchesSelector","_resultId","title","StoreData","Utils$2","ModalResults","container","_container$listeners$","listeners","pop","$highlighted","getHighlightedResults","GetData","_mousedown","$this","ModalSearch","$search","removeAttr","KEYS","$","PRINT_SCREEN","DropdownSearchDecorator","handleSearch","which","TAB","SHIFT","CTRL","ALT","_keyUpPrevented","term","Select2AttachBody","_AttachBody","_attachPositioningHandler","events","handler","_positionDropdown","_resizeDropdown","_detachPositioningHandler","_showDropdown","$dropdownContainer","$dropdownParent","_popper","Popper","createPopper","placement","IS_RTL","modifiers","enabled","_this$_popper2","update","_this$_popper3","ModalAttachBody","_bindContainerResultHandlers","stopPropagation","position","$dropdown","_containerResultsHandlersBound","$modal","_self$$search$","_updateDropdown","_e$originalEvent2","detach","end","oldValue","modal","event","draggable","FilterAttachBody","_hideDropdown","_this$_popper","outerWidth","_dropdownButton$close","contents","clone","triggerHandler","selection","_handleClear","$filterDropdown","dropdownButton","reference","DropdownAttachBody","_defined$1","AllowClear$1","Utils$1","FilterAllowClear","_AllowClear","_","isDisabled","$clear","$selection","previousVal","placeholder","unselectData","prevented","Select2MultipleSelectionDecorator","Select2DataAdapterDecorator","_data$element","ResultsList","SingleSelection","MultipleSelection","Placeholder","AllowClear","SelectionSearch","EventRelay","Utils","Translation","SelectData","ArrayData","AjaxData","Tags","Tokenizer","MinimumInputLength","MaximumInputLength","MaximumSelectionLength","Dropdown","DropdownSearch","HidePlaceholder","InfiniteScroll","MinimumResultsForSearch","SelectOnClose","CloseOnSelect","DropdownCSS","TagsSearchHighlight","Defaults","defaults","dataAdapter","Decorate","minimumInputLength","maximumInputLength","maximumSelectionLength","tags","tokenSeparators","tokenizer","resultsAdapter","columns","customOption","iconClass","templateResult","selectOptions","_templateResult","loading","selectOnClose","dropdownAdapter","minimumResultsForSearch","closeOnSelect","dropdownCssClass","dropdown","selectionAdapter","allowClear","translations","dir","currentUrl","URL","$document$1","$body","initIcons","_e$target","tooltipOptions","IS_MOBILE","tooltip","_bootstrap$Tooltip$ge","bootstrap","Tooltip","getInstance","initPasswordOptions","_e$target2","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","pct","valid","setValid","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","PATH_BASE","API_URL","qs","route","encodeURIComponent","_pathname","_hash","hash","searchParams","createSearchParams","getSearchParams","setSearchParams","mergeSearchParams","buildUrl","_len2","_key2","has","setSearchParam","deleteSearchParam","_len3","names","_key3","delete","PAGE_LAYOUT","sanitizeUrl","decodeURIComponent","initExportLinks","_e$target3","fileDownload","getchartParams","preventDefault","initMultiSelectCheckboxes","_e$target4","$cbs","_update","getError","_result$error","_result$error2","failureMessage","isHtml","API_EXPORT_ACTION","swal","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","_fetch","ct","headers","_getError","json","blob","createObjectURL","Blob","a","cd","download","appendChild","click","objectUrl","revokeObjectURL","catch","lazyLoad","_e$target5","LAZY_LOAD","img","LAZY_LOAD_DELAY","src","initLightboxes","_e$target6","USE_COLORBOX","lightboxSettings","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","_e$target7","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","_e$target8","popover","popoverOptions","tippy","content","tippyOptions","parseJson","searchOperatorChange","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isEmptyOpr","isEmptyOpr2","hideOpr2","hideX","hideY","initForms","_e$target9","isFunction$2","_alert","cb","config","confirmButtonText","customClass","htmlContainer","show","isConfirmed","_prompt","cfg","_config","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","_obj","_batch$send","els","getId","isTextbox","isFilter","$elf","typ","elf","_updateOptions","autoFill","fo","frmo","arp","$obj","clearOptions","addOpt","newOption","selectOption","_updateSibling","isBoolean","ds","isNativeSelectOne","isModalLookup","MULTIPLE_OPTION_SEPARATOR","jqXHR","textStatus","errorThrown","root","exportCustom","divId","exportType","tblVar","_div$children$","div","customexport","exportEmail","convertToBool","charts","exportCharts","chart","chartEngine","streamType","stream","toBase64Image","fileName","_export","export","exportSelected","emailForm","keySelected","postParams","_document$querySelect","$iframe","isHiddenTextArea","_el$dataset","modalLookup","_el$dataset2","isSelect2","isBooleanCheckbox","isHidden","reset","once","MOBILE_DETECT","version","scrollIntoView","selectAll","clearSelected","tbl","rowIndexes","r","rows","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","HTMLTableElement","$tbl","$rows","isset","tBodies","$target","cells","parentsUntil","RESPONSIVE_TABLE_CLASS","cell","rowSpan","clientHeight","offsetHeight","attach","$r","setupGrid","grid","$grid","$cells","htmlDecode","$root","selectors","getFieldSelector","table","s1","s2","flatMap","tag","sel","eq","getAncestorBy","node","parentNode","_node","nodeType","o1","o2","headerCase","str","charAt","samePath","p1","p2","ar1","ar2","LIST_ACTION","VIEW_ACTION","EDIT_ACTION","isValue","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","reduce","optionHtml","OPTION_HTML_TEMPLATE","addOption","_obj$querySelector","optGroup","g","label","_obj$dataset","_forms$get$getList","_obj$options$","selectedIndex","opts","autoselect","_init$headers","Headers","API_JWT_TOKEN","API_JWT_AUTHORIZATION_HEADER","FormData","executeScript","replaceAll","matchAll","createRange","createContextualFragment","s","addScript","stripScript","scr","HTMLScriptElement","removeScript","getContent","keepScripts","_m$","$content","getOptions","modalDialogHide","$dlg","removeData","showing","reload","dest_array","destEl","v0","pid","post","$tt","trig","Popover","wd","_getTipElement","initSearchFilters","_e$target11","btn","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","_frm$filterList$filte","_frm$filterList","formId","getItem","_ref3","_ref4","copyToClipboard","_source","_source2","innerText","left","select","execCommand","removeChild","object_value","showMessage","_arg$target","doc","$div","$alert","$heading","w","$toast","Math","floor","Pace","_forms$get","jqxhr","isApi","allowed","hostname","setRequestHeader","lastPageSubmit","Interval","dt","fromSQL","fromSeconds","toFormat","locale","numberingSystem","getNumberingSystem","parseDateTime","fromFormat","redirect","_ew$vars","newUrl","vars","login","protocol","host","isMediumScreen","matchMedia","screenMediaQuery","promise","dashboard","$overlay","overlayTemplate","Response","validation","CardRefresh","warningMessage","successMessage","$html","unshift","history","pushState","$old","$new","$tmpl","$searchType","TABLE_BASIC_SEARCH_TYPE","replaceWith","initPage","_bootstrap$Tooltip$ge7","_fixLayoutHeightTimer","functions","Select2Defaults","Select2Utils","addEventHandlers","fldVar","addGridRow","_bootstrap$Tooltip$ge2","$tpl","$lastrow","suffix","$keycnt","FORM_KEY_COUNT_NAME","FORM_ROW_ACTION_NAME","attributes","$btn","dispose","after","scrollHeight","addOptionDialogShow","_args$evt2","lnk","addOptionDialog","_submitSuccess","_results","objName","API_OBJECT_NAME","re","linkField","dfs","displayFields","ffs","pfs","lfv","ff","txt","obj2","_results2","_results3","_fail","_submit","API_ADD_ACTION","nodeName","callback","_convert","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","applyTemplate","tmplId","classId","isModal","_parent$querySelector","subtmpl","rowspan","childNodes","cloneNode","views","textContent","hasTag","jsRenderAttributes","scripts","tmpl","creditcard_string","tempdigit","doubledigit","checkdigit","isValid","email_cnt","arEmails","DECIMAL_SEPARATOR","min_value","max_value","clearError","jquery","confirmDelete","modalDialogShow","createFilter","selectId","lookup","processResults","_data$records$length3","_data$records3","transport","failure","$select","_$$data$$dropdown$fin3","createModalLookup","_data$records$length2","_data$records2","_$$data$$dropdown$fin2","createSelect","_data$records$length","_data$records","_$$data$$dropdown$fin","deleteGridRow","infix","_bootstrap$Tooltip$ge3","rowidx","_delete","$keyact","disable2FA","preConfirm","API_2FA_ACTION","API_2FA_RESET","_result$error8","_result$error9","emailDialogShow","emailDialog","_e$target$querySelect","_$$closest$find$data","MAX_EMAIL_RECIPIENT","hdr","enable2FA","TWO_FACTOR_AUTHENTICATION_TYPE","API_2FA_SHOW","_result$error4","imageUrl","showLoaderOnConfirm","isLoading","getConfirmButton","disableInput","getImage","onload","enableInput","getInput","API_2FA_VERIFY","Error","showValidationMessage","_result$error3","_result$error7","inputValue","account","API_2FA_SEND_OTP","_result$error5","_result$error6","fixLayoutHeight","layout","formatCurrency","CURRENCY_FORMAT","formats","getLocaleFromPlatform","NUMBERING_SYSTEM","numeralSystem","delimiters","thousands","GROUPING_SEPARATOR","decimal","currency","CURRENCY_SYMBOL","formatNumber","NUMBER_FORMAT","formatPercent","PERCENT_FORMAT","formatTimeSpan","allDay","to","equals","startOf","minus","interval","days","isInteger","Intl","NumberFormat","resolvedOptions","getQueryBuilderFilterInput","rule","_document$getElementB","_span$innerHTML$repla","span","queryBuilderErrorClass","$0","$1","$2","getQueryBuilderFilterValidation","$value","errors","operator","nb_inputs","$invalid","getQueryBuilderValueSetter","getSearchParam","htmlEncode","importDialogShow","_args$evt6","_bootstrap$Tooltip$ge5","importDialog","sse","$dropzone","$bd","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","scnt","successCount","fcnt","failCount","filename","file","addRow","_index","_success","initialized","Tabulator","autoColumns","autoColumnsDefinitions","definitions","column","headerSort","resizable","visible","headerSortTristate","formatter","textOverflow","getRow","getData","importTabulatorOptions","importComplete","_sse","fileResults","files","fileResult","rollbacked","IMPORT_MAX_FAILURES","saveImport","importFail","_sse2","_table2","clearData","API_ACTION_NAME","API_IMPORT_ACTION","API_FILE_TOKEN_NAME","EventSource","addEventListener","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXTENSIONS","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","dropZone","messages","maxFileSize","maxNumberOfFiles","minFileSize","SESSION_ID","_data$result","importfiles","filetoken","_table","importFiles","processfail","progressall","loaded","total","uploadProgress","_this$querySelector","_table3","_table4","removeAttribute","_e$target12","$tables","initPanels","renderJsTemplates","_localStorage$getItem","inputs","$rpt","mh","toggleGroup","USE_JAVASCRIPT_MESSAGE","inlineAction","_args$evt","$detached","ewAction","$record","curindex","_always","_deleted","_disableInlineButtons","_enableInlineButtons","_getTable","_updateRowIndexes","inline","rowtype","Promise","resolve","prepend","$main","ROWTYPE_VIEW","ROWTYPE_ADD","returnUrl","_$grid$data","isFunction","isMobile","_args$evt3","_bootstrap$Tooltip$ge4","_args$evt4","_args$evt5","_$dlg$data","_$dlg$data2","modalDialog","size","_caption","$lnk","caption","_hide","handleResult","_lnk$closest","_lnk$closest2","_tabPane$parentNode","btnId","tabPane","navItem","_current","view","_createButtons","_button","_return","_resp$headers$get","resp","isJson","hasErrors","lnkData","$dlglnk","stopImmediatePropagation","Modal","_focustrap","__handleFocusin","_handleFocusin","_e$target10","Accept","optionsHtml","MAX_OPTION_COUNT","parseTime","removeSpaces","sameString","selectAllKeys","selectKey","chk","sendOTP","_result$error11","_result$error12","setActiveUser","setLanguage","setSearchType","searchType","phraseId","setSessionTimer","timeoutTime","keepAliveTimer","counter","keepAlive","API_SESSION_ACTION","token","setTimer","resetTimer","_timer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","doTimeout","TIMEOUT_URL","timeout","_keepAliveTimer","timerInterval","timerProgressBar","setInterval","getHtmlContainer","sec","timeleft","round","getTimerLeft","willClose","clearInterval","dismiss","DismissReason","_ew$vars$login","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAliveInterval","MIN_SESSION_KEEP_ALIVE_INTERVAL","showBackupCodes","showDenyButton","showLoaderOnDeny","denyButtonText","denyButton","disableButtons","API_2FA_BACKUP_CODES","codes","enableButtons","preDeny","getDenyButton","API_2FA_NEW_BACKUP_CODES","showDrillDown","ctrlKey","spinnerTemplate","draggableOptions","boundary","cache","$tip","responseText","_result$error13","_result$error14","setContent","sortUrl","sortType","shiftKey","ctrl","submitAction","_window$msg","isPostBack","isMultiple","isDismissed","toggleChat","API_CHAT_ACTION","_result$error10","idx","toggleLayout","_bootstrap$Tooltip$ge6","togglePassword","$i","toggleSearchOperator","updateChart","$debug","updateDropdownPosition","prev","nid","$ft","$fn","$fa","$label","_confirmDelete","confirm","uploadUrl","API_JQUERY_UPLOAD_ACTION","_downloadTemplate","_uploadTemplate","formData","session","deepAssign","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","uploadOptions","MULTIPLE_UPLOAD_SEPARATOR","fid","indexOf","_data$files","l","_data$files2","_data$result2","_data$files3","valueChanged","fobj","fld","bool","oldEl","fnEl","fullCalendar$1","fullCalendar","calendar","updateTable","eventFields","addUrl","viewUrl","editUrl","deleteUrl","copyUrl","fullCalendarOptions","eventPopoverOptions","processJson","convertValue","_calendar$getEventByI","getEventById","addEvent","curEvent","groupId","setStart","setEnd","setAllDay","setExtendedProp","setProp","processEvent","info","relatedEvents","apiAction","API_EDIT_ACTION","processRequest","revert","reject","toPlainObject","collapseExtendedProps","toISOString","apiUrl","getFldParm","currentTable","urlAddId","addEventDialogShow","startStr","endStr","startFld","endFld","viewEventDialogShow","customButtons","headerToolbar","bsDropdown","getOrCreatePopover","Default","getOrCreateInstance","seq","shift","_Array$from$find$repl","_Array$from$find","popoverClass","_templateFactory","generateGetBoundingClientRect","y","rect","getBoundingClientRect","jsEvent","offsetX","offsetY","height","right","bottom","virtualElement","useContextMenu","bsToggle","clearMenus","_menu","eventId","editEventDialogShow","deleteEvent","drop","draggedEl","eventReceive","eventDragStart","_bootstrap$Popover$ge","eventDrop","eventResize","eventClick","button","extendedProps","_bootstrap$Popover$ge2","open","usePopover","_getOrCreatePopover","showViewPageOnEventClick","eventMouseEnter","_bsDropdown","_getOrCreatePopover2","_isShown","popoverViews","eventMouseLeave","_bsDropdown2","_bootstrap$Popover$ge3","FullCalendar","Calendar","isPushNotificationSupported","navigator","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","sendSubscriptionToServer","subscription","getKey","contentEncoding","PushManager","supportedContentEncodings","endpoint","btoa","fromCharCode","createSubscription","API_PUSH_NOTIFICATION_ACTION","API_PUSH_NOTIFICATION_SUBSCRIBE","serviceWorkerReg","serviceWorker","pushManager","subscribe","userVisibleOnly","applicationServerKey","PUSH_SERVER_PUBLIC_KEY","getSubscription","setSubscription","inst","subscribeNotification","Notification","permission","_await$getSubscriptio","requestPermission","_document$getElementB2","checkSubscription","unsubscribeNotification","unsubscribe","API_PUSH_NOTIFICATION_DELETE","register","SERVICE_WORKER","scope","webpush","pushNotificationDialogShow","pushDialog","successes","acc","cur","failures","inited","latlng","useSingleMap","showAllMarkers","useMarkerClusterer","ext","maps","singleMapHeight","singleMapWidth","showMapOnTop","createMap","createBounds","createMarkerClusterer","marker","createMarker","fitBounds","promises","address","geocodingDelay","geocode","latitude","longitude","coordinate","parseFloat","isNaN","createLatLng","all","MobileDetect","userAgent","mobile","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","pageShow","gotoPage","$page","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","google","setCenter","$bodies","$document","_$$offset","debugMode","DEBUG","animate","panel","Collapse","actions","_this$form","pageSize","zIndex","blueimp","processQueue","fileTypes","cropperOptions","cropperCanvasOptions","widget","processActions","cropImage","dfd","Deferred","that","cropperDialog","Cropper","getCroppedCanvas","toBlob","File","resolveWith","rejectWith","isFinite","isDate","periodic","clearTimeout","rec","_this$data","_this$data2","toNumber","toDate","_ew$vars$tables","tables","clientFormatPattern","toJsDate","toJSDate","mutationList","mutation","MutationObserver","observe","_parent","attributeFilter","attributeOldValue","subtree","$chatWrapper","$chatCheck","$chatBtn","$chatClose","$chatComment","$chatCard","$chatHeader","$chatCollapse","$chatBody","$chatIframe","_Pace","running","iframe","queue","dequeue","contentDocument","isNil$1","isFunction$1","isNaNNumber$1","isFiniteNumber$1","multiplyByPowerOfTen$1","number","powerOfTenExponent","NaN","numAsString","indexOfE","log10$1","numberThatIsPowerOfTen","LOG10E","toObject$1","arr","entriesResolver","object","escapeRegexString$1","string","memoize$1","cacheKey","powerOf10LookupObject","currentValue","additionalZeros","isPowerOfTen$1","toBase","valueUnit","unitScale","base","scale","toBaseMultiplier","convertUnit","originUnit","targetUnit","valueAsBase","resolvedScale","conversionFactorFromBase","unitScaleDefinition","unit","convert","toBest","exclude","cutOffNumber","best","scaleUnit","absoluteResult","abs","scaleDefinition","stringRepeat$1","createUnitScaleFromLocaleAbbreviations$1","scaleItem","scaleItemIndex","formattedStringToNumber$1","inputString","_a","stringOriginal","stringWithLatinDigits","numericStringWithExtraInfo","numeralSystemMap","numericStringLength","numeralSystemToLatinSystemMap","digit","digitIndex","output","numericStringIndex","char","replaceNumeralSystemWithLatinNumbers","zeroFormat","nullFormat","decimalDelimiterFromLocale","stringWithDotDecimalDelimiter","abbreviationScalingFactor","abbreviations","abbreviationsSortedByLengthDesc","abbreviation","scapedAbbreviationForRegex","regexp","getScalingFactorFromAbbreviations","negativeFactor","numberAsString","locale$1","code","ordinal","merge","newObject","argsLength","isObject$1","isString$1","truncateNumber$1","ceil","getPatternParts","patternMask","isInEscapedPart","currentEscapedWord","parts","escaped","patternIncludes","patternRemoveEscapedText","patternReplace","searchValue","replaceValue","stringIncludes$1","signRule$1","patternWithoutEscapedText","negativeParentheses","forceSign","outputPatternMask","abbreviationRule$1","compactUnit","compact","abbreviationRegExpResult","compactAuto","splitStringInTwoParts$1","separator","indexOfSearchChar","countChars","stringChar","decimalPlacesRule$1","patternPrecisionPart","minimumFractionDigits","maximumFractionDigits","trimmedPatternPrecisionPart","patternPrecisionPartWithoutClosingBracket","precisionSplitted","fractionDigits","optionalDecimalPlacesRule$1","optionalFractionDigits","parsePattern$1","inputPattern","resolvedInputPattern","patternMaskAfterSignRule","signRules","patternMaskAfterAbbreviationRule","abbreviationRules","patternMaskAfterOptionalDecimalPlacesRule","optionalDecimalPlacesRules","outputPatternMaskWithoutEscapedText","decimalPlacesRules","minimumIntegerDigits","patternMaskIntegerPart","minimumIntegerDigitsRule","grouping","patternMaskAfterHandlingNumberPosition","numberPositionRule","patternMaskWithEnsuredSignPosition","addSignPositionIfItDoesNotExists","removeSignIfExists$1","valueAsString","rescaleRoundedValue$1","currentAbbreviationScale","patternRules","newScaledValue","newScaledValueUnit","scaleValueWithAbbreviation$1","forcedAbbreviationUnit","abbreviationsFromLocale","targetPowerOfTenExponent","k","scaleDefinitionFromLocale","closestPowerOfTenWithAvailableAbbreviation","distanceFromTarget","resolveForcedAbbreviationUnit","scaledValue","localizedUnit","roundNumber$1","precision","roundingFunction","resolvedPrecision","roundedScaledValue","numberToNonExponentialString$1","significand","exponent","exponentAsNumber","integerPartOfSignificand","fractionalPartOfSignificand","numberOfZerosToAdd","formatPositiveExponentResult","significandAsString","negativeExponentAbsoluteValue","outputIntegerPartOfSignificand","outputFractionalPartOfSignificand","firstCharInIntegerPart","formatNegativeExponentResult","numberToFixed$1","finiteNumber","fractionalPartOfValueAsString","targetFractionDigitsAmount","roundedValue","integerPart","fractionalPart","addTrailingZerosInFractionalPart","roundValueAndAddTrailingZeros$1","rounding","resolvedRoundingFunction","replaceDigitsWithNumeralSystem$1","numericString","addOrRemoveLeadingZerosToValue$1","valueIntegerPartWithoutSign","addSignInfoToFullFormattedNumber$1","fullFormattedValueWithoutSign","isValueNegative","isValueZero","splitNumberIntegerAndDecimalParts$1","decimalPart","addThousandsSeparatorToValueIntegerPart$1","valueIntegerPartWithLeadingZerosAndWithoutSign","digitGroupingStyle","thousandsSeparator","restDigitGrouping","groupingSubIteration","applyAbbreviationLocalizedUnitToPatternMask$1","abbreviationLocalizedUnit","hasAbbreviationInPatternMask","numberToFormattedNumber$1","resolvedValue","localizedAbbreviationUnit","scaledValueLocalizedUnit","rescaledValue","rescaledValueLocalizedUnit","scaleAndRoundValue","signedZero","valueAsStringWithoutSign","valueIntegerPartWithLeadingZeros","valueIntegerPartWithThousandsSeparator","numeralSystemFromLocale","integerPartWithNumeralSystem","decimalPartWithNumeralSystem","fullNumberWithNumeralSystem","patternMaskWithNumber","cleanPatternMask","bpsFormatter$1","regexps","unformat","patternWithEscapedBPS","timeFormatter$1","absoluteValue","sign","hours","minutes","seconds","isNegative","timeArray","reverse","decimalSuffixes","binarySuffixes","unformatRegex","concat","bytesDecimalScale","unitIndex","pow","bytesBinaryScale","currencySymbolsMap","EUR","USD","XCD","AUD","INR","BRL","CAD","XAF","CNY","NZD","XPF","GBP","HKD","ILS","JPY","KRW","XOF","MXN","TWD","VND","BUILT_IN_FORMATTERS$1","hasNotScalePercentageSymbolInPattern","scalePercentage","patternWithEscapedPercentage","currencyFromOptions","localizedCurrencySymbol","patternWithEscapedCurrencySymbol","_b","localizedOrdinal","patternWithEscapedOrdinal","scaledValueUnit","patternWithEscapedBytes","exponential","toExponential","patternWithoutExponential","roundHalfAwayFromZero$1","resolveFormatOptions$1","formatOptions","_c","roundingOption","resolveRoundingOption","resolvedLocale","optionsLocale","defaultLocale","resolveOptionsLocale","resolvedFormatters","optionsFormatters","formatters","defaultPattern","nanFormat","nonBreakingSpace","parse$1$1","inputStringWithNormalSpaces","unformatFunctionFromFormatters","matcher","getUnformatFunctionIfMatch","parse$1","round$1","format$1$1","resolvedPattern","resolvedValueAsNumber","formatFunctionFromFormatters","getFormatFunctionIfMatch","_errorFormat","arg2","arg3","withOptions","baseOptions","optionsFromArguments","unique$1","rtlCharsRanges","rtlDirCheck","appendLeftToRightMarkIfIsRTL","isRTL","languagesWith4DigitsGroupingStyle","getAbbreviations","languageTag","digits","intlFormatOptions","notation","useGrouping","compactDisplay","digitOfZero","digitOfOne","digitOfTwo","abbreviationResultForOne","toLocaleString","abbreviationResultForTwo","abbreviationOne","abbreviationTwo","resultIndex","_err","getLocaleFromPlatform$1$1","resolvedLanguageTag","localizedNumber","lookupObject","repeatedChar","digitsAsArray","getNumeralSystemDigits","resolvedDigits","localizedNumberWithoutDigits","groupingDelimiter","fractionDelimiter","getGroupingAndFractionDelimiters","groupingStyle","subIterationIndex","digitOrGroupingDelimiter","getGroupingStyle","shortAbbreviations","_abbreviationsLong","numerable","jQuery"],"sources":["dist/js/ew.js"],"sourcesContent":["/*!\n * JavaScript for PHPMaker v2024.3.0\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function (ew$1, $$1, luxon) {\n  'use strict';\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n    this.hideTabs = false; // Hide all tabs\r\n    this.showPagerTop = false; // Show pager at top\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><i class=\"fa-solid fa-angle-left\"></i> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <i class=\"fa-solid fa-angle-right\"></i></a></li></ul></nav>'; // Pager template\r\n\r\n    // \"show\" handler (for disabled tabs)\r\n    var _show = function (e) {\r\n      e.preventDefault();\r\n    };\r\n\r\n    // Set properties\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $$1.isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substring(1); // Camel case\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    };\r\n\r\n    // DOM loaded\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".ew-nav\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".ew-nav\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .ew-nav > .nav\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").prev(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").next(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n      this.pageShow();\r\n    };\r\n\r\n    // Page show\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $$1(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".accordion-item\").each(function () {\r\n          var $this = $$1(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $$1(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    };\r\n\r\n    // Go to page by index\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-bs-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".accordion-item\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-bs-toggle=collapse]):not(.d-none)\").find(\"[data-bs-toggle=collapse]\").click();\r\n        }\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n    this.gotoPageByIndex = this.gotoPage;\r\n\r\n    // Go to page by element\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($$1(el).data(\"page\"), 10) || -1);\r\n    };\r\n\r\n    // Go to page by element's id or name or data-field attribute\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    };\r\n\r\n    // Toggle page\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".accordion-item\").toggle(\"d-none\", !show);\r\n      }\r\n    };\r\n\r\n    // Render\r\n    this.render = function () {\r\n      this.$form = $$1(\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt(this.dataset.page, 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-bs-toggle=tab]\");\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $$1($$1(this).attr(\"href\")).find(\".ew-map\").each(function () {\r\n            var m = ew.maps[this.id];\r\n            if (m != null && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-bs-toggle=collapse]\");\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses;\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $$1(this).find(\".ew-map\").each(function () {\r\n              var m = ew.maps[this.id];\r\n              if (m != null && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n      $$1(function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  let DateTime$1 = luxon.DateTime;\r\n\r\n  /**\r\n   * User level ID validator\r\n   */\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    let level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      let elId = document.getElementById(\"x_\" + id);\r\n      if (elId && el) {\r\n        let name = el.value.trim(),\r\n          level = parseInt(elId.value.trim(), 10);\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Required validator\r\n   */\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n      let $el = $$1(el),\r\n        $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) == null ? void 0 : _$el$data.substring(2))); // Find the row\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * File required validator\r\n   */\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      let elFn = document.getElementById(\"fn_\" + el.id);\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n  function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\"))\r\n      // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\")\r\n      // Change Password page\r\n      id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Between validator\r\n   */\r\n  function between(el) {\r\n    let x, z;\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    } else if (el.id.endsWith(\"_value_1\")) {\r\n      // QueryBuilder\r\n      x = document.getElementById(el.id.replace(/_value_1$/, \"_value_0\"));\r\n      z = document.getElementById(el.id.replace(/_value_1$/, \"_operator\"));\r\n    }\r\n    if (ew.hasValue(x) && $$1(z).val().toUpperCase() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Password strength validator\r\n   */\r\n  function passwordStrength(el) {\r\n    let $el = $$1(el);\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * User name validator\r\n   */\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Password validator\r\n   */\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Email validator\r\n   */\r\n  function email(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Emails validator\r\n   */\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          emails: err\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * DateTime validator\r\n   * @param {string} format DateTime format\r\n   */\r\n  function datetime(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkDate(value, format)) {\r\n        return {\r\n          datetime: ew.language.phrase(\"IncorrectDate\").replace(/%s/g, format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Time validator\r\n   * @param {string} format Time format\r\n   */\r\n  function time(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkTime(value, format)) {\r\n        return {\r\n          time: ew.language.phrase(\"IncorrectTime\").replace(/%s/g, format)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Float validator\r\n   */\r\n  function float(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        float: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n  function range(min, max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Integer validator\r\n   */\r\n  function integer(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US phone validator\r\n   */\r\n  function phone(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n  function zip(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Credit card validator\r\n   */\r\n  function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * US SSN validator\r\n   */\r\n  function ssn(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * GUID validator\r\n   */\r\n  function guid(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * URL validator\r\n   */\r\n  function url(el) {\r\n    let value = ew.getValue(el);\r\n    if (!ew.checkUrl(value)) {\r\n      return {\r\n        url: ew.language.phrase(\"IncorrectUrl\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n    * Custom validator\r\n    * @param {Function} fn Function(value, ...args)\r\n    * @param {...any} args Additional arguments for the function\r\n    */\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        let value = ew.getValue(el);\r\n        if (fn(value, ...args)) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Captcha validator\r\n   */\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * reCaptcha validator\r\n   */\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) == null ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Min date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} min Min date\r\n   */\r\n  function minDate(min) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        minDateTime;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        let minValue = min.value,\r\n          minFormat = min.dataset.formatPattern;\r\n        if (min.value && min.dataset.formatPattern) minDateTime = ew.parseDate(minValue, minFormat);\r\n      } else if (min instanceof Date) {\r\n        minDateTime = DateTime$1.fromJSDate(min, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (min instanceof DateTime$1) {\r\n        minDateTime = min;\r\n      }\r\n      if (value && format && minDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime < minDateTime) return {\r\n          minDate: ew.language.phrase(\"IncorrectMinDate\").replace(\"%s\", ew.formatDateTime(minDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} max Max date\r\n   */\r\n  function maxDate(max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n        format = el.dataset.formatPattern,\r\n        maxDateTime;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        let maxValue = max.value,\r\n          maxFormat = max.dataset.formatPattern;\r\n        if (max.value && max.dataset.formatPattern) maxDateTime = ew.parseDate(maxValue, maxFormat);\r\n      } else if (max instanceof Date) {\r\n        maxDateTime = DateTime$1.fromJSDate(max, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (max instanceof DateTime$1) {\r\n        maxDateTime = max;\r\n      }\r\n      if (value && format && maxDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime > maxDateTime) return {\r\n          maxDate: ew.language.phrase(\"IncorrectMaxDate\").replace(\"%s\", ew.formatDateTime(maxDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Min validator\r\n   * @param {Function|HTMLElement|String|Number} min Min value\r\n   */\r\n  function min(min) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        minValue;\r\n      min = typeof min == \"function\" ? min() : min;\r\n      if (min instanceof HTMLElement) {\r\n        minValue = ew.parseNumber(ew.getValue(min));\r\n      } else if (typeof min == \"string\") {\r\n        minValue = ew.parseNumber(min);\r\n      } else if (typeof min == \"number\") {\r\n        minValue = min;\r\n      }\r\n      if (typeof value == \"number\" && typeof minValue == \"number\") {\r\n        if (value < minValue) return {\r\n          min: ew.language.phrase(\"IncorrectMin\").replace(\"%s\", minValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Max validator\r\n   * @param {Function|HTMLElement|String|Number} max Max value\r\n   */\r\n  function max(max) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n        maxValue;\r\n      max = typeof max == \"function\" ? max() : max;\r\n      if (max instanceof HTMLElement) {\r\n        maxValue = ew.parseNumber(ew.getValue(max));\r\n      } else if (typeof max == \"string\") {\r\n        maxValue = ew.parseNumber(max);\r\n      } else if (typeof max == \"number\") {\r\n        maxValue = max;\r\n      }\r\n      if (typeof value == \"number\" && typeof maxValue == \"number\") {\r\n        if (value > maxValue) return {\r\n          max: ew.language.phrase(\"IncorrectMax\").replace(\"%s\", maxValue)\r\n        };\r\n      }\r\n      return false;\r\n    };\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    between,\n    captcha,\n    creditCard,\n    custom,\n    datetime,\n    email,\n    emails,\n    fileRequired,\n    float,\n    guid,\n    integer,\n    max,\n    maxDate,\n    min,\n    minDate,\n    mismatchPassword,\n    password,\n    passwordStrength,\n    phone,\n    range,\n    recaptcha,\n    regex,\n    required,\n    ssn,\n    time,\n    url,\n    userLevelId,\n    userLevelName,\n    username,\n    zip\n  };\n\n  function _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n\r\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\r\n      return typeof obj;\r\n    } : function (obj) {\r\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n    }, _typeof(obj);\r\n  }\n\n  function _toPrimitive(input, hint) {\r\n    if (_typeof(input) !== \"object\" || input === null) return input;\r\n    var prim = input[Symbol.toPrimitive];\r\n    if (prim !== undefined) {\r\n      var res = prim.call(input, hint || \"default\");\r\n      if (_typeof(res) !== \"object\") return res;\r\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\r\n    }\r\n    return (hint === \"string\" ? String : Number)(input);\r\n  }\n\n  function _toPropertyKey(arg) {\r\n    var key = _toPrimitive(arg, \"string\");\r\n    return _typeof(key) === \"symbol\" ? key : String(key);\r\n  }\n\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\r\n    }\r\n  }\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    Object.defineProperty(Constructor, \"prototype\", {\r\n      writable: false\r\n    });\r\n    return Constructor;\r\n  }\n\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n    return self;\r\n  }\n\n  function _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n    return _setPrototypeOf(o, p);\r\n  }\n\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass);\r\n  }\n\n  function _defineProperty(obj, key, value) {\r\n    key = _toPropertyKey(key);\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n    return obj;\r\n  }\n\n  /*\r\n   * Based on: jquery.batch v0.1.0\r\n   * Copyright 2013, Matt Morgan (@mlmorg)\r\n   * MIT license\r\n   */\r\n\r\n  // Global batch settings\r\n  $$1.batchSettings = {\r\n    type: 'POST',\r\n    contentType: 'application/json',\r\n    processData: false,\r\n    dataType: 'json',\r\n    toJSON: JSON.stringify,\r\n    parse: data => data\r\n  };\r\n\r\n  // Setup method\r\n  $$1.batchSetup = function (options) {\r\n    return $$1.extend($$1.batchSettings, options);\r\n  };\r\n\r\n  // $.batch class\r\n  // -------------\r\n\r\n  var Batch = $$1.batch = function (func, options) {\r\n    // Always instantiate a Batch class even if called without \"new\"\r\n    if (!(this instanceof Batch)) {\r\n      return new Batch(func, options);\r\n    }\r\n\r\n    // Shift arguments if func is an object\r\n    if (typeof func === 'object') {\r\n      options = func;\r\n      func = undefined;\r\n    }\r\n\r\n    // Default options\r\n    this.options = $$1.extend({}, $$1.batchSettings, options);\r\n\r\n    // Find a parent batch object, if we're nested\r\n    this.parent = $$1.ajaxSetup()._batch;\r\n\r\n    // Requests storage\r\n    this.requests = [];\r\n\r\n    // Add any requests\r\n    if (func) {\r\n      this.add(func);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  // Our methods\r\n  $$1.extend(Batch.prototype, {\r\n    // Method for adding requests to the batch\r\n    add: function (func) {\r\n      var _func$name;\r\n      // Set global _batch variable in jQuery.ajaxSettings\r\n      $$1.ajaxSetup({\r\n        _batch: this.parent || this\r\n      });\r\n\r\n      // Call the user's function\r\n      if ((_func$name = func.name) != null && _func$name.startsWith('bound ')) {\r\n        // Bound function\r\n        func();\r\n      } else {\r\n        func.call($$1.ajaxSetup()._batch);\r\n      }\r\n\r\n      // Remove the global _batch variable when we're not nested\r\n      if (!this.parent) {\r\n        $$1.ajaxSetup({\r\n          _batch: null\r\n        });\r\n      }\r\n      return this;\r\n    },\r\n    // Clear requests storage\r\n    clear: function () {\r\n      this.requests = [];\r\n    },\r\n    // Method for running the batch request\r\n    send: function (options) {\r\n      options = options || {};\r\n      var instance = this;\r\n\r\n      // When we're handling a child batch object, wrap any success functions\r\n      // and add them to the parent batch success\r\n      if (this.parent && options.success) {\r\n        var parentSuccess = this.parent.options.success;\r\n        this.parent.options.success = function (data, status, xhr) {\r\n          options.success(data, status, xhr);\r\n          if (parentSuccess) {\r\n            parentSuccess(data, status, xhr);\r\n          }\r\n        };\r\n      }\r\n\r\n      // When we're handling the top-most batch, send the request\r\n      else if (this.requests.length) {\r\n        // Map an array of requests\r\n        var requests = $$1.map(this.requests, function (request) {\r\n          return request.settings.data;\r\n        });\r\n\r\n        // Override the success callback\r\n        var success = options.success;\r\n        var childSuccess = this.options.success;\r\n        options.success = function (data, statusText, xhr) {\r\n          // Call our _deliver method to handle each individual batch request response\r\n          instance._deliver.call(instance, data, statusText);\r\n\r\n          // Child batch success functions\r\n          if (childSuccess) {\r\n            childSuccess(data, statusText, xhr);\r\n          }\r\n\r\n          // User's success function\r\n          if (success) {\r\n            success(data, statusText, xhr);\r\n          }\r\n        };\r\n\r\n        // Build the Ajax request options\r\n        options = $$1.extend({}, this.options, options);\r\n\r\n        // Create hash of requests to pass as the data in the Ajax request\r\n        if (!options.data) {\r\n          options.data = $$1.batchSettings.toJSON(requests);\r\n        }\r\n\r\n        // Call the request\r\n        return $$1.ajax(options);\r\n      }\r\n    },\r\n    // Private method to add a request to the batch requests array\r\n    _addRequest: function (xhr, settings) {\r\n      this.requests.push({\r\n        xhr: xhr,\r\n        settings: settings\r\n      });\r\n    },\r\n    // Delivers each batch request response to its intended xhr success/complete function\r\n    _deliver: function (data, statusText) {\r\n      var _responses$error;\r\n      var instance = this;\r\n\r\n      // Pass the response off to the user to parse out the responses\r\n      var responses = $$1.batchSettings.parse(data);\r\n      if (responses != null && (_responses$error = responses.error) != null && _responses$error.description) {\r\n        var _responses$error2;\r\n        ew$1.alert(responses == null || (_responses$error2 = responses.error) == null ? void 0 : _responses$error2.description);\r\n        return;\r\n      }\r\n\r\n      // Loop through the responses\r\n      $$1.each(responses, function (i, response) {\r\n        var _request$settings$com;\r\n        // Only work with batch requests that we have stored\r\n        if (!instance.requests[i]) {\r\n          return;\r\n        }\r\n\r\n        // Grab the stored request data\r\n        var request = instance.requests[i];\r\n\r\n        // Build statusText a la jQuery based on status code\r\n        request.xhr.statusText = statusText;\r\n\r\n        // Call the user/success function, if it exists. Pass the response body, status text and xhr.\r\n        if (statusText === 'success') {\r\n          var _request$settings$suc;\r\n          (_request$settings$suc = request.settings.success) == null ? void 0 : _request$settings$suc.call(request.xhr, response, statusText);\r\n        }\r\n\r\n        // Call complete\r\n        (_request$settings$com = request.settings.complete) == null ? void 0 : _request$settings$com.call(request.xhr, statusText);\r\n      });\r\n    }\r\n  });\r\n\r\n  // $.ajax override\r\n  // ---------------\r\n\r\n  // Override jQuery.ajax to cancel any outgoing requests called within\r\n  // a $.batch() function and add them to the batch requests array for\r\n  // that batch instance\r\n  var $ajax = $$1.ajax;\r\n  $$1.ajax = function (url, options) {\r\n    // Shift arguments when options are passed as first argument\r\n    if (typeof url === 'object') {\r\n      options = url;\r\n      url = undefined;\r\n    }\r\n\r\n    // Set options object\r\n    options = options || {};\r\n\r\n    // Override the jQuery beforeSend method\r\n    var beforeSend = options.beforeSend;\r\n    options.beforeSend = function (xhr, settings) {\r\n      // Call the user's beforeSend function, if passed\r\n      if (beforeSend) {\r\n        var before = beforeSend(xhr, settings);\r\n\r\n        // Cancel request if user's beforeSend function returns false\r\n        if (before === false) {\r\n          return before;\r\n        }\r\n      }\r\n\r\n      // We're only worried about requests made within a $.batch function\r\n      // (aka they have a _batch object)\r\n      if (settings._batch) {\r\n        // Add request to batch\r\n        settings._batch._addRequest(xhr, settings);\r\n\r\n        // Cancel this request\r\n        return false;\r\n      }\r\n    };\r\n\r\n    // Run original $.ajax method for all other requests\r\n    return $ajax.call(this, url, options);\r\n  };\n\n  // Form class\r\n  function FormBase(id, pageId) {\r\n    let self = this,\r\n      $self = $$1(self);\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n    this.element = document.getElementById(id); // HTML form or div\r\n    this.$element = $$1(this.element); // jQuery object of the form or div\r\n    this.pageId = pageId;\r\n    this.htmlForm = null; // HTML form element\r\n    this.initSearchPanel = false; // Expanded by default\r\n    this.modified = false;\r\n    this.emptyRow = null; // Check empty row\r\n    this.multiPage = null; // Multi-page\r\n    this.autoSuggests = {}; // AutoSuggests\r\n    this.lists = {}; // Dynamic selection lists\r\n    this.batch = new Batch(); // For batch lookup\r\n    this.formKeyCountName = \"\"; // For list/grid pages\r\n    this.submitWithFetch = false; // Submit form with Fetch API and returns Promise\r\n    this.enableOnInit = false; // Disable form during init\r\n    this.filterList = null;\r\n\r\n    // Disable form\r\n    this.disableForm = function () {\r\n      document.body.style.cursor = \"wait\";\r\n      let form = this.getForm();\r\n      $$1(form.elements).filter(\":submit:not(.dropdown-toggle), .ew-submit\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    };\r\n\r\n    // Enable form\r\n    this.enableForm = function () {\r\n      let form = this.getForm(),\r\n        $elements = $$1(form.elements);\r\n      $elements.filter(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $elements.filter(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $elements.filter(\":submit:not(.dropdown-toggle), .ew-submit\").not(\".ew-disabled\") // Exclude submit buttons with .ew-disabled (disabled purposely)\r\n      .prop(\"disabled\", false).removeClass(\"disabled\");\r\n      this.trigger(\"enabled\");\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Append hidden element with form name\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n        $form = $$1(form),\r\n        $dp = $$1(el).closest(\".ew-form\"),\r\n        name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0])\r\n        // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $$1('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $$1('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    };\r\n\r\n    // Can submit\r\n    this.canSubmit = async function (e) {\r\n      var _await$this$validate, _this$validate;\r\n      var form = this.getForm(),\r\n        $form = $$1(form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n      if (((_await$this$validate = await ((_this$validate = this.validate) == null ? void 0 : _this$validate.call(this, e))) != null ? _await$this$validate : true) && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], [name*=_query_builder_rule_], .ew-template input, .ew-custom-option\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n        var $dps = $form.find(\"input[name=detailpage]\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value)[0];\r\n        });\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $$1(dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        let args = {\r\n            form: form,\r\n            result: true\r\n          },\r\n          evt = $$1.Event(\"beforesubmit\", {\r\n            originalEvent: e\r\n          });\r\n        $form.trigger(evt, [args]);\r\n        let result = await args.result; // Support Promise<boolean|Object>\r\n        if (!evt.isDefaultPrevented() && (result === true || $$1.isObject(result) && result.value))\r\n          // Support Swal.fire()\r\n          return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // Submit\r\n    this.submit = async function (e) {\r\n      var _e$originalEvent;\r\n      let form = this.getForm(),\r\n        formAction = e == null || (_e$originalEvent = e.originalEvent) == null || (_e$originalEvent = _e$originalEvent.submitter) == null ? void 0 : _e$originalEvent.formAction;\r\n      if (formAction) {\r\n        formAction = ew.parseUrl(formAction).pathname;\r\n        form.setAttribute(\"action\", formAction);\r\n      }\r\n      if (await this.canSubmit(e)) {\r\n        if (this.submitWithFetch) {\r\n          let url = form.getAttribute(\"action\"),\r\n            method = form.method.toUpperCase(),\r\n            body = $$1(form).serialize();\r\n          return ew.fetch(url, {\r\n            method,\r\n            body\r\n          }).finally(() => this.enableForm()); // Return Promise\r\n        } else {\r\n          form.submit();\r\n        }\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n    };\r\n\r\n    // Get dynamic selection list by element name or id\r\n    this.getList = function (name) {\r\n      var _this$getElement;\r\n      if ($$1.isObject(name)) {\r\n        // Object\r\n        let obj = name;\r\n        name = obj.name || obj.id || \"\";\r\n        if (name.includes(\"query_builder_rule\")) name = obj.dataset.field;\r\n      }\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      if (this.lists[name]) return this.lists[name];\r\n      let field = (_this$getElement = this.getElement(name)) == null || (_this$getElement = _this$getElement.dataset.field) == null ? void 0 : _this$getElement.replace(/^x_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n      return field ? this.lists[field] : {};\r\n    };\r\n\r\n    // Compile templates\r\n    this.compileTemplates = function () {\r\n      let lists = Object.values(this.lists);\r\n      for (let list of lists) {\r\n        if (list.template && $$1.isString(list.template)) list.template = $$1.templates(list.template);\r\n      }\r\n    };\r\n\r\n    // Get option template of dynamic selection list\r\n    this.getOptionTemplate = function (list) {\r\n      if (list.template && $$1.isString(list.template)) list.template = $$1.templates(list.template);\r\n      return list.template;\r\n    };\r\n\r\n    // Get the HTML form element\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        var _this$element, _this$element2;\r\n        if (((_this$element = this.element) == null ? void 0 : _this$element.tagName) == \"FORM\") {\r\n          // HTML form\r\n          this.htmlForm = this.element;\r\n        } else if (((_this$element2 = this.element) == null ? void 0 : _this$element2.tagName) == \"DIV\") {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.element.closest(\"form\");\r\n        }\r\n      }\r\n      return this.htmlForm;\r\n    };\r\n\r\n    // Get form element as single element\r\n    this.getElement = function (name) {\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    };\r\n\r\n    // Get form element(s) as single element or array of radio/checkbox\r\n    this.getElements = function (name) {\r\n      return ew.getElements(name, this.$element);\r\n    };\r\n\r\n    // Fix ID\r\n    this.fixId = function (id, multiple, rowindex) {\r\n      let t = \"\",\r\n        ar = id.split(\" \");\r\n      if (ar.length > 1) {\r\n        t = ar[0];\r\n        rowindex = \"\";\r\n        id = ar[1];\r\n      }\r\n      let prefix = $$1.isNumber(rowindex) ? \"x\" + rowindex + \"_\" : \"x_\"; // Add row index\r\n      id = id.startsWith(\"x_\") ? id.replace(/^x_/, prefix) // Field element name\r\n      : prefix + id; // Field var\r\n      if (multiple && !id.endsWith(\"[]\"))\r\n        // Add [] if select-multiple\r\n        id += \"[]\";\r\n      return t ? t + \" \" + id : id;\r\n    };\r\n\r\n    /**\r\n     * Update a selection list\r\n     * @param {string|HTMLElement} id - ID (Field param) or HTML element\r\n     * @param {Object} list - List\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {boolean} immediate - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateList = function (id, list, rowindex, immediate) {\r\n      var _list, _Object$entries$find;\r\n      (_list = list) != null ? _list : list = $$1.isString(id) // Find the list if not provided\r\n      ? (_Object$entries$find = Object.entries(this.lists).find(entry => entry[0] == id.replace(/^x_/, \"\"))) == null ? void 0 : _Object$entries$find[1] // String\r\n      : this.getList(id); // HTMLElement\r\n      if (list.template && $$1.isString(list.template))\r\n        // Compile template in case updateLists() called before init()\r\n        list.template = $$1.templates(list.template);\r\n      let form = this.element,\r\n        parents = list.parentFields.slice().map(parent => this.fixId(parent, false, rowindex)),\r\n        // Clone and fix index\r\n        ajax = list.ajax && !list.lookupOptions.length; // Has link table and no lookup cache\r\n      id = $$1.isString(id) ? this.fixId(id, list.multiple, rowindex) : id;\r\n      return !ajax || immediate ? ew.updateOptions.call(this, id, parents, ajax, false) // Non-Ajax (lookup cache or user values) or update immediately\r\n      : [id, parents.map(parent => ew.getOptionValues(parent, form)), ajax, false]; // Ajax (async) => to be batch updated\r\n    };\r\n\r\n    /**\r\n     * Update selection lists\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {bool} [immediate] - Send request immediately\r\n     * @returns\r\n     */\r\n    this.updateLists = function (rowindex, immediate) {\r\n      var _form$querySelector;\r\n      if (rowindex === null)\r\n        // rowindex == $rowindex$ == null\r\n        return;\r\n      if (this.pageId == \"grid\" && !$$1.isNumber(rowindex) && !$$1.isUndefined(rowindex)) return;\r\n      let form = this.getForm(); // Set up $element and htmlForm\r\n      if ((form == null || (_form$querySelector = form.querySelector(\"input#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\")\r\n        // Confirm page\r\n        return;\r\n      let selector = Object.entries(this.lists).map(_ref => {\r\n        let [id, list] = _ref;\r\n        return \"[name='\" + this.fixId(id, list.multiple, rowindex) + \"']\";\r\n      }).join();\r\n      if (selector && this.element.querySelector(selector))\r\n        // List found\r\n        Object.entries(this.lists).map(_ref2 => {\r\n          let [id, list] = _ref2;\r\n          return this.updateList(id, list, rowindex);\r\n        }) // Update each list\r\n        .filter(result => Array.isArray(result)) // Get ajax requests for batch update\r\n        .forEach(request => this.batch.add(ew.updateOptions.bind(this, ...request))); // Batch update async requests\r\n      // Update the Ajax lists\r\n      if (this.batch.requests.length) {\r\n        if (rowindex === undefined || immediate) {\r\n          // Called by form or update immediately (add blank row)\r\n          let deferreds = [],\r\n            batchSize = ew.ajaxBatchSize > 0 ? ew.ajaxBatchSize : 1;\r\n          while (this.batch.requests.length > batchSize) {\r\n            let b = new Batch();\r\n            b.requests = this.batch.requests.splice(0, batchSize);\r\n            deferreds.push(b.send({\r\n              url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n            }));\r\n          }\r\n          if (this.batch.requests.length > 0) deferreds.push(this.batch.send({\r\n            url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n          }));\r\n          $$1.when(...deferreds).then(() => $$1(document).trigger(\"updatedone\", [{\r\n            source: self,\r\n            target: form\r\n          }])).fail(error => console.log(error)).always(() => this.batch.clear());\r\n        }\r\n      } else {\r\n        $$1(document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }\r\n    };\r\n\r\n    // Create AutoSuggest\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    };\r\n\r\n    // Init editors\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    };\r\n\r\n    // Update textareas\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Destroy editor(s)\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $$1(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    };\r\n\r\n    // Show error message\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    };\r\n\r\n    // Init file upload\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $$1(form.elements).filter(\"input:file:not([name*='$rowindex$'])\").each(function (index) {\r\n        $$1.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    };\r\n\r\n    // Set up filters\r\n    this.setupFilters = function (e, filters) {\r\n      let id = this.id,\r\n        data = this.filterList ? this.filterList.data : null,\r\n        $sf = $$1(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n        $df = $$1(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n        $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n        $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n      let saveFilters = function (id, filters) {\r\n        if (ew.CLIENT_SEARCH_FILTER) {\r\n          localStorage.setItem(ew.PROJECT_NAME + \"_\" + id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SERVER_SEARCH_FILTER) {\r\n          document.body.style.cursor = \"wait\";\r\n          $$1.ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            var _result$;\r\n            if ((_result$ = result[0]) != null && _result$.success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            document.body.style.cursor = \"default\";\r\n          });\r\n        }\r\n      };\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt({\r\n          input: \"text\",\r\n          html: ew.language.phrase(\"EnterFilterName\")\r\n        }, name => {\r\n          name = ew.sanitize(name);\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n      if (filters.length) {\r\n        let $submenu = $$1('<ul class=\"dropdown-menu\"></ul>');\r\n        filters.forEach((filter, i, ar) => {\r\n          $$1('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            let index = this.querySelector(\"a[data-index]\").dataset.index;\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filter[0]), result => {\r\n              if (result) {\r\n                ar.splice(index, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $$1('<li><a class=\"dropdown-item ew-reset-filter-list\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            if (currentPageID == \"calendar\") {\r\n              // Post back\r\n              $$1(\"<form>\").attr({\r\n                method: \"post\",\r\n                action: ew.currentPage()\r\n              }).append($$1(\"<input type='hidden'>\").attr({\r\n                name: \"cmd\",\r\n                value: \"resetfilter\"\r\n              }), $$1(\"<input type='hidden'>\").attr({\r\n                name: ew.TOKEN_NAME_KEY,\r\n                value: ew.TOKEN_NAME\r\n              }),\r\n              // PHP\r\n              $$1(\"<input type='hidden'>\").attr({\r\n                name: ew.ANTIFORGERY_TOKEN_KEY,\r\n                value: ew.ANTIFORGERY_TOKEN\r\n              }),\r\n              // PHP\r\n              $$1(\"<input type='hidden'>\").attr({\r\n                name: \"filter\",\r\n                value: JSON.stringify(filter[1])\r\n              })).appendTo(\"body\").trigger(\"submit\");\r\n            } else {\r\n              // Refresh\r\n              let body = {\r\n                cmd: \"resetfilter\",\r\n                filter: JSON.stringify(filter[1])\r\n              };\r\n              ew.refresh(ew.fetch(ew.setLayout(ew.currentPage(), false), {\r\n                method: \"POST\",\r\n                body\r\n              }));\r\n            }\r\n          });\r\n        });\r\n        $$1('<li class=\"dropdown-divider\"></li>').insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    };\r\n\r\n    // Add event handler\r\n    this.on = function () {\r\n      $self.on(...arguments);\r\n    };\r\n\r\n    // Add event handler\r\n    this.one = function () {\r\n      $self.one(...arguments);\r\n    };\r\n\r\n    // Remove event handler\r\n    this.off = function () {\r\n      $self.off(...arguments);\r\n    };\r\n\r\n    // Trigger event\r\n    this.trigger = function () {\r\n      $self.trigger(...arguments);\r\n    };\r\n\r\n    // Init form\r\n    this.init = function () {\r\n      if (this._initiated) return;\r\n\r\n      // Check form\r\n      var form = this.getForm();\r\n      if (!form) return;\r\n      var $form = $$1(form);\r\n\r\n      // Compile templates\r\n      this.compileTemplates();\r\n\r\n      // Search form\r\n      if (/s(ea)?rch$/.test(this.id)) {\r\n        // Search panel\r\n        if (this.initSearchPanel && !ew.hasFormData(form)) $$1(\"#\" + this.id + \"_search_panel\").removeClass(\"show\");\r\n\r\n        // Hide search operator column\r\n        if (!$$1(\".ew-table .ew-search-operator\").text().trim()) $$1(\".ew-table .ew-search-operator\").parent(\"td\").hide();\r\n\r\n        // Search operators\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $$1(this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substring(2)).trigger(\"change\");\r\n        });\r\n      }\r\n\r\n      // Multi-page\r\n      if (this.multiPage) this.multiPage.render();\r\n\r\n      // HTML editors\r\n      loadjs.ready([\"editor\"], () => setTimeout(this.initEditors.bind(this), 0)); // Delay for custom template to apply first\r\n\r\n      // Dynamic selection lists\r\n      this.updateLists();\r\n\r\n      // Init file upload\r\n      this.initUpload();\r\n\r\n      // Submit/Cancel\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav a[data-bs-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $$1(e.target.getAttribute(\"href\")),\r\n            $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n            $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.off(\"submit.ew\").on(\"submit.ew\", function (e) {\r\n          // Bind submit event\r\n          let args = {\r\n              form: form,\r\n              result: self.submit(e)\r\n            },\r\n            evt = $$1.Event(\"aftersubmit\", {\r\n              originalEvent: e\r\n            });\r\n          self.trigger(evt, [args]);\r\n          return false; // Disable normal submission\r\n        });\r\n\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = this.dataset.href;\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n      this._initiated = true;\r\n\r\n      // Store form object as data\r\n      this.$element.data(\"form\", this);\r\n\r\n      // Enable form\r\n      if (this.enableOnInit || Array.from(form.elements).find(el => el.matches(\"button.disabled.enable-on-init\"))) this.enableForm();\r\n\r\n      // Trigger listeners\r\n      this.trigger(\"initiated\");\r\n    };\r\n\r\n    // Add to the global forms object\r\n    ew.forms.add(this);\r\n  }\n\n  /**\r\n   * Class Field\r\n   */\r\n  let Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n      _defineProperty(this, \"validators\", []);\r\n      _defineProperty(this, \"_validate\", true);\r\n      this.name = fldvar;\r\n      if (Array.isArray(validators)) {\r\n        for (let validator of validators) this.addValidator(validator);\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n      this.invalid = invalid;\r\n    }\r\n\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n    var _proto = Field.prototype;\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */;\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        let error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error = {\r\n          ...error,\r\n          ...err\r\n        };\r\n        this.invalid = true;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Clear all errors\r\n     */;\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n\r\n    /**\r\n     * Clear all validators\r\n     */;\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */;\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      let result = true;\r\n      this.clearErrors(); // Reset error\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (let validator of this.validators) {\r\n            let err = validator(this._element);\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Reset invalid property (on page load for Grid-Add/Edit)\r\n     */;\r\n    _proto.resetInvalid = function resetInvalid() {\r\n      var _this$_element, _this$_element$closes;\r\n      this.clearErrors();\r\n      if ((_this$_element = this._element) != null && (_this$_element = _this$_element.classList) != null && _this$_element.contains(\"is-invalid\") && !this._error) this.addError({\r\n        server: (_this$_element$closes = this._element.closest(ew.fieldContainerSelector)) == null || (_this$_element$closes = _this$_element$closes.querySelector(\".invalid-feedback\")) == null ? void 0 : _this$_element$closes.innerHTML\r\n      }); // Server side error\r\n    }\r\n\r\n    /**\r\n     * Update the error message to feedback element\r\n     */;\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      let err = this.errorMessage;\r\n      if (this._element && err) {\r\n        var _this$_element$closes2;\r\n        let feedback = (_this$_element$closes2 = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : _this$_element$closes2.querySelector(\".invalid-feedback\");\r\n        if (feedback) feedback.innerHTML = err;\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set focus\r\n     * @param {Object} options - Focus options\r\n     */;\r\n    _proto.focus = function focus(options) {\r\n      if (this._element) ew.setFocus(this._element, options);\r\n    }\r\n\r\n    /**\r\n     * Check if the field can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this._element;\r\n      return el && !(el.hidden && !el.tagName == \"SELECTION-LIST\" || el.readonly || el.disabled || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Check if focused\r\n     */;\r\n    _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function () {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n        return \"\";\r\n      }\r\n\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function () {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n\r\n      /**\r\n       * Set form element\r\n       */\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function () {\r\n        return this._element;\r\n      }\r\n\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */,\r\n      set: function (el) {\r\n        var _this$_element2;\r\n        this._element = el;\r\n        this._checkbox = (_this$_element2 = this._element) != null && (_this$_element2 = _this$_element2.id) != null && _this$_element2.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\").replace(/\\[\\]$/, \"\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function () {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }, {\r\n      key: \"focused\",\r\n      get: function () {\r\n        return this._element && this._element == document.activeElement;\r\n      }\r\n    }]);\r\n    return Field;\r\n  }();\n\n  /**\r\n   * Class Form\r\n   */\r\n  let Form = /*#__PURE__*/function (_FormBase) {\r\n    _inheritsLoose(Form, _FormBase);\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n      _defineProperty(_assertThisInitialized(_this), \"row\", {});\r\n      _defineProperty(_assertThisInitialized(_this), \"fields\", {});\r\n      _defineProperty(_assertThisInitialized(_this), \"validateRequired\", true);\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocus\", true);\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocusPreventScroll\", true);\r\n      _this.on(\"initiated\", function () {\r\n        let form = this.getForm();\r\n        if (form.classList.contains(\"ew-wait\")) {\r\n          this.one(\"enabled\", function () {\r\n            this.setInvalid();\r\n            this.tryFocus();\r\n          });\r\n          return;\r\n        }\r\n        this.setInvalid();\r\n        this.tryFocus();\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n    var _proto = Form.prototype;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */;\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */;\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (let field of fields) {\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */;\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n        this._error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.addCustomError = function addCustomError(fldvar, msg, rowIndex) {\r\n      if (fldvar in this.fields) {\r\n        let field = this.fields[fldvar],\r\n          err = {\r\n            custom: msg\r\n          };\r\n        field.addError(err);\r\n        this.setFieldElement(fldvar, rowIndex);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Get error\r\n     */;\r\n    /**\r\n     * Set focus to a HTML element\r\n     * @param {HTMLElement} el - HTML element to be focused\r\n     */\r\n    _proto.setFocus = function setFocus(el) {\r\n      let delay = this.makeVisible(el) ? Form.focusDelay : 0;\r\n      if (el && el != document.activeElement && el.focus) {\r\n        let preventScroll = !el.closest(\".modal-body\") && Form.autoFocusPreventScroll && this.autoFocusPreventScroll;\r\n        setTimeout(() => {\r\n          el.focus({\r\n            preventScroll\r\n          });\r\n        }, delay); // Focus after tab transition\r\n        this._focused = true;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Set focus to the first field with error\r\n     */;\r\n    _proto.focus = function focus() {\r\n      if (!this.canFocus()) return;\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        var _this$_error2;\r\n        if (field.invalid || (_this$_error2 = this._error) != null && _this$_error2[fldvar]) {\r\n          this.getFocusable(field);\r\n          if (field.canFocus()) {\r\n            this.setFocus(field.element);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Get focuable field element\r\n     * @param {Field} field - Field object\r\n     */;\r\n    _proto.getFocusable = function getFocusable(field) {\r\n      var _field$element;\r\n      (_field$element = field.element) != null ? _field$element : field.element = this.getFieldElements(field.name);\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 0); // Inline-Add\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 1); // Inline-Edit or Grid-Add/Edit\r\n    }\r\n\r\n    /**\r\n     * Try set focus to a field\r\n     * @param {string|undefined|true} fieldName [undefined] - Field variable name. If undefined, find the first field. If true, always try to focus.\r\n     */;\r\n    _proto.tryFocus = function tryFocus(fieldName) {\r\n      if (!this.canFocus()) return;\r\n      if (!fieldName && (!Form.autoFocus || !this.autoFocus || this._focused)) return;\r\n      if (!fieldName && this.invalid) {\r\n        // Has error\r\n        this.focus();\r\n        return;\r\n      }\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        // Process detail forms\r\n        let form = this.getForm(),\r\n          detailpage = Array.from(form.querySelectorAll(\"input[name=detailpage]\")).find(dp => {\r\n            var _ew$forms$get;\r\n            return (_ew$forms$get = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get.invalid;\r\n          });\r\n        if (detailpage) {\r\n          detailpage.focus();\r\n          return;\r\n        }\r\n      }\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        if (typeof fieldName == \"string\" && fieldName !== fldvar) continue;\r\n        field.element = null; // Reset field element first so that it will get the first element\r\n        this.getFocusable(field);\r\n        if (field.canFocus()) {\r\n          this.setFocus(field.element);\r\n          return;\r\n        }\r\n      }\r\n      let input = this.element[ew.TABLE_BASIC_SEARCH]; // Quick Search input\r\n      if (this.id.endsWith(\"srch\") && input && input != document.activeElement) {\r\n        // Extended Search\r\n        input.focus({\r\n          preventScroll: Form.autoFocusPreventScroll && this.autoFocusPreventScroll\r\n        }); // Focus the Quick Search input\r\n        this._focused = true;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Check if the form can be focused\r\n     */;\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n      let el = this.element;\r\n      return el && !(el.hidden || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el - Focused element\r\n     */;\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n        return true;\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        let $pane = this.$element.closest(\".tab-pane\");\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) {\r\n          $pane.closest(\".ew-nav\").find(\"a[data-bs-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").trigger(\"click\");\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      var _rowIndex;\r\n      (_rowIndex = rowIndex) != null ? _rowIndex : rowIndex = this.getCurrentRowIndex();\r\n      if (rowIndex < 2)\r\n        // Regular pages (\"\"), Inline-Add (\"0\") or first row (\"1\")\r\n        this.value = null; // Reset\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n      let result = true;\r\n      for (let field of Object.values(this.fields)) {\r\n        field.element = this.getFieldElements(field.name, rowIndex);\r\n        this.row[field.name] = field.value; // Get field value\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      }\r\n      // Save the field values of the row\r\n      if (!this.value) {\r\n        this.value = {\r\n          ...this.row\r\n        };\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        let index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = {\r\n          ...this.row\r\n        };\r\n      }\r\n      this.focus();\r\n      return result;\r\n    }\r\n\r\n    /**\r\n     * Key count (number|NaN)\r\n     */;\r\n    /**\r\n     * Validate\r\n     * @param {Event} e - Event\r\n     * @returns {bool}\r\n     */\r\n    _proto.validate = async function validate(e) {\r\n      var _form$querySelector, _form$querySelector2, _ref, _e$currentTarget;\r\n      if (!this.validateRequired) return true; // Ignore validation\r\n\r\n      let form = this.getForm();\r\n      if (((_form$querySelector = form.querySelector(\"#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") return true;\r\n      if (this.pageId == \"update\" && !ew.updateSelected(form)) {\r\n        ew.alert(ew.language.phrase(\"NoFieldSelected\"));\r\n        return false;\r\n      }\r\n      let addcnt = 0,\r\n        inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n        // Inline-Add\r\n        action = ((_form$querySelector2 = form.querySelector(\"#action\")) == null ? void 0 : _form$querySelector2.value) || ((_ref = (_e$currentTarget = e == null ? void 0 : e.currentTarget) != null ? _e$currentTarget : inlineAdd) == null ? void 0 : _ref.dataset.action),\r\n        keycnt = inlineAdd ? 0 : this.keyCount,\r\n        gridinsert = action == \"gridinsert\" || [\"insert\", \"confirm\"].includes(action) && keycnt,\r\n        // Grid-Add or Master/Detail-Add\r\n        startcnt = inlineAdd ? 0 : 1,\r\n        rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n      for (let i = startcnt; i <= rowcnt; i++) {\r\n        var _await$this$customVal, _this$customValidate;\r\n        let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n        form.dataset.rowindex = rowIndex;\r\n        if ([\"list\", \"grid\"].includes(this.pageId)) {\r\n          if (gridinsert ? !this.emptyRow(rowIndex) : true) addcnt++;else continue;\r\n        }\r\n\r\n        // Validate fields\r\n        if (!this.validateFields(rowIndex)) return false;\r\n\r\n        // Call customValidate event\r\n        if (!((_await$this$customVal = await ((_this$customValidate = this.customValidate) == null ? void 0 : _this$customValidate.call(this, form))) != null ? _await$this$customVal : true)) {\r\n          this.focus();\r\n          return false;\r\n        }\r\n      }\r\n      delete form.dataset.rowindex; // Reset\r\n\r\n      if (this.pageId == \"list\" && gridinsert && addcnt == 0) {\r\n        // No row added\r\n        ew.alert({\r\n          html: ew.language.phrase(\"NoAddRecord\"),\r\n          returnFocus: false\r\n        }); // Do not return focus\r\n        this.tryFocus(true);\r\n        return false;\r\n      }\r\n\r\n      // Process detail forms\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        let detailpages = form.querySelectorAll(\"input[name=detailpage]\");\r\n        for (let dp of detailpages) {\r\n          var _await$frm$validate;\r\n          let frm = ew.forms.get(dp.value);\r\n          if (!((_await$frm$validate = await (frm == null || frm.validate == null ? void 0 : frm.validate(e))) != null ? _await$frm$validate : true)) return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n\r\n    /**\r\n     * Get current row index (during validation)\r\n     * @returns {string} Row index\r\n     */;\r\n    _proto.getCurrentRowIndex = function getCurrentRowIndex() {\r\n      var _this$getForm$dataset;\r\n      return (_this$getForm$dataset = this.getForm().dataset.rowindex) != null ? _this$getForm$dataset : \"\";\r\n    }\r\n\r\n    /**\r\n     * Get field values of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getValue = function getValue(rowIndex) {\r\n      var _rowIndex2;\r\n      (_rowIndex2 = rowIndex) != null ? _rowIndex2 : rowIndex = this.getCurrentRowIndex();\r\n      let value = {};\r\n      for (let field of Object.values(this.fields)) {\r\n        var _field$element2;\r\n        (_field$element2 = field.element) != null ? _field$element2 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        value[field.name] = field.value; // Get field value\r\n      }\r\n\r\n      return value;\r\n    }\r\n\r\n    /**\r\n     * Get a field value of the specified row\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     */;\r\n    _proto.getFieldValue = function getFieldValue(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) {\r\n        var _rowIndex3, _field$element3;\r\n        (_rowIndex3 = rowIndex) != null ? _rowIndex3 : rowIndex = this.getCurrentRowIndex();\r\n        (_field$element3 = field.element) != null ? _field$element3 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        return field.value;\r\n      }\r\n      return null;\r\n    }\r\n\r\n    /**\r\n     * Get HTML elements for a field\r\n     * @param {string} name - Field name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.getFieldElements = function getFieldElements(name, rowIndex) {\r\n      var _rowIndex4;\r\n      (_rowIndex4 = rowIndex) != null ? _rowIndex4 : rowIndex = this.getCurrentRowIndex();\r\n      return this.getElements(\"x\" + rowIndex + \"_\" + name) ||\r\n      // By name with prefix\r\n      this.getElements(\"x\" + rowIndex + \"_\" + name + \"[]\") ||\r\n      // By name with prefix and []\r\n      this.getElements(name); // By name directly (e.g. email form)\r\n    }\r\n\r\n    /**\r\n     * Set the element property of the field object and return the field elements\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */;\r\n    _proto.setFieldElement = function setFieldElement(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) field.element = this.getFieldElements(field.name, rowIndex);\r\n      return field == null ? void 0 : field.element;\r\n    }\r\n\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex - Row index. If undefined, set for the whole form.\r\n     */;\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      let form = this.getForm(); // Get HTML form\r\n      if (typeof rowIndex === \"undefined\" && this.formKeyCountName) {\r\n        let inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n          // Inline-Add\r\n          keycnt = inlineAdd ? 0 : this.keyCount,\r\n          startcnt = inlineAdd ? 0 : 1,\r\n          rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n        for (let i = startcnt; i <= rowcnt; i++) {\r\n          let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n          this.setInvalid(rowIndex);\r\n        }\r\n      } else {\r\n        var _rowIndex5;\r\n        (_rowIndex5 = rowIndex) != null ? _rowIndex5 : rowIndex = \"\";\r\n        for (let field of Object.values(this.fields)) {\r\n          field.element = this.getFieldElements(field.name, rowIndex); // Always get element in case Grid-Add/Edit\r\n          if (rowIndex) field.resetInvalid(); // For Grid-Add/Edit\r\n          if (field.invalid) {\r\n            this.addError(field.name, field.error);\r\n            if (!this._focused) this.focus(); // Focus at the current row\r\n          } else {\r\n            continue;\r\n          }\r\n          ew.setInvalid(field.element);\r\n        }\r\n        // Process detail forms\r\n        if ([\"add\", \"edit\"].includes(this.pageId)) form.querySelectorAll(\"input[name=detailpage]\").forEach(dp => {\r\n          var _ew$forms$get2;\r\n          return (_ew$forms$get2 = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get2.setInvalid();\r\n        });\r\n      }\r\n    };\r\n    _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n\r\n      /**\r\n       * Check if invalid\r\n       */\r\n    }, {\r\n      key: \"invalid\",\r\n      get: function () {\r\n        return this._error || Object.values(this.fields).some(field => field.invalid);\r\n      }\r\n    }, {\r\n      key: \"keyCount\",\r\n      get: function () {\r\n        var _this$getForm$querySe;\r\n        let keycnt = this.formKeyCountName ? (_this$getForm$querySe = this.getForm().querySelector(\"#\" + this.formKeyCountName)) == null ? void 0 : _this$getForm$querySe.value : undefined; // Get key_count\r\n        return parseInt(keycnt, 10);\r\n      }\r\n    }]);\r\n    return Form;\r\n  }(FormBase);\r\n  _defineProperty(Form, \"autoFocus\", true);\r\n  _defineProperty(Form, \"autoFocusPreventScroll\", true);\r\n  _defineProperty(Form, \"focusDelay\", 200);\n\n  /**\r\n   * Class FormBuilder\r\n   */\r\n  let FormBuilder = /*#__PURE__*/function () {\r\n    function FormBuilder() {\r\n      _defineProperty(this, \"lists\", {});\r\n      _defineProperty(this, \"fields\", []);\r\n      _defineProperty(this, \"validateRequired\", false);\r\n      _defineProperty(this, \"multiPage\", false);\r\n      _defineProperty(this, \"submitWithFetch\", false);\r\n      _defineProperty(this, \"initSearchPanel\", false);\r\n      _defineProperty(this, \"enableOnInit\", false);\r\n    }\r\n    var _proto = FormBuilder.prototype;\r\n    // Set ID\r\n    _proto.setId = function setId(value) {\r\n      this.id = value;\r\n      return this;\r\n    }\r\n\r\n    // Set page ID\r\n    ;\r\n    _proto.setPageId = function setPageId(value) {\r\n      this.pageId = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists\r\n    ;\r\n    _proto.setLists = function setLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) this.lists = value;\r\n      return this;\r\n    }\r\n\r\n    // Set lists for query builder (Dynamic Selection Lists and AutoFill not supported since there can be multiple inputs for the same field)\r\n    ;\r\n    _proto.setQueryBuilderLists = function setQueryBuilderLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) {\r\n        for (let [id, list] of Object.entries(value)) value[id] = {\r\n          ...list,\r\n          ...{\r\n            autoFillTargetFields: [],\r\n            childFields: [],\r\n            filterFieldVars: [],\r\n            filterFields: [],\r\n            parentFields: []\r\n          }\r\n        };\r\n        this.lists = value;\r\n      }\r\n      return this;\r\n    }\r\n\r\n    // Add list\r\n    ;\r\n    _proto.addList = function addList(name, value) {\r\n      this.lists[name] = value;\r\n      return this;\r\n    }\r\n\r\n    // Set fields\r\n    ;\r\n    _proto.setFields = function setFields(value) {\r\n      if (Array.isArray(value)) this.fields = value;\r\n      return this;\r\n    }\r\n\r\n    // Add field\r\n    ;\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!this.fields.find(field => field[0] == fldvar)) this.fields.push([fldvar, validators, invalid]);\r\n      return this;\r\n    }\r\n\r\n    // Add fields\r\n    ;\r\n    _proto.addFields = function addFields(value) {\r\n      if (Array.isArray(value)) this.fields = [...this.fields, ...value];\r\n      return this;\r\n    }\r\n\r\n    // Set validate\r\n    ;\r\n    _proto.setValidate = function setValidate(value) {\r\n      this.validate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set custom validate\r\n    ;\r\n    _proto.setCustomValidate = function setCustomValidate(value) {\r\n      this.customValidate = value;\r\n      return this;\r\n    }\r\n\r\n    // Set validate required\r\n    ;\r\n    _proto.setValidateRequired = function setValidateRequired(value) {\r\n      this.validateRequired = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit\r\n    ;\r\n    _proto.setSubmit = function setSubmit(value) {\r\n      this.submit = value;\r\n      return this;\r\n    }\r\n\r\n    // Set form KeyCount name\r\n    ;\r\n    _proto.setFormKeyCountName = function setFormKeyCountName(value) {\r\n      this.formKeyCountName = value;\r\n      return this;\r\n    }\r\n\r\n    // Set empty row\r\n    ;\r\n    _proto.setEmptyRow = function setEmptyRow(value) {\r\n      this.emptyRow = value;\r\n      return this;\r\n    }\r\n\r\n    // Set multi page\r\n    ;\r\n    _proto.setMultiPage = function setMultiPage(value) {\r\n      this.multiPage = value;\r\n      return this;\r\n    }\r\n\r\n    // Set submit with Fetch API\r\n    ;\r\n    _proto.setSubmitWithFetch = function setSubmitWithFetch(value) {\r\n      this.submitWithFetch = value;\r\n      return this;\r\n    }\r\n\r\n    // Set filter list\r\n    ;\r\n    _proto.setFilterList = function setFilterList(value) {\r\n      this.filterList = value;\r\n      return this;\r\n    }\r\n\r\n    // Set initSearchPanel\r\n    ;\r\n    _proto.setInitSearchPanel = function setInitSearchPanel(value) {\r\n      this.initSearchPanel = value;\r\n      return this;\r\n    }\r\n\r\n    // Set enableOnInit\r\n    ;\r\n    _proto.setEnableOnInit = function setEnableOnInit(value) {\r\n      this.enableOnInit = value;\r\n      return this;\r\n    }\r\n\r\n    // Build\r\n    ;\r\n    _proto.build = function build() {\r\n      let form = new ew.Form(this.id, this.pageId);\r\n      if (Array.isArray(this.fields)) form.addFields(this.fields);\r\n      if (typeof this.validate == 'function') form.validate = this.validate;\r\n      if (typeof this.customValidate == 'function') form.customValidate = this.customValidate;\r\n      if (typeof this.emptyRow == 'function') form.emptyRow = this.emptyRow;\r\n      if (typeof this.submit == 'function') form.submit = this.submit;\r\n      if (this.formKeyCountName) form.formKeyCountName = this.formKeyCountName;\r\n      if (this.multiPage) form.multiPage = new ew.MultiPage(this.id);\r\n      if (this.enableOnInit) form.enableOnInit = true;\r\n      if (this.submitWithFetch) {\r\n        form.submitWithFetch = true;\r\n        form.on(\"aftersubmit\", (e, args) => ew.refresh(args == null ? void 0 : args.result, args == null ? void 0 : args.context));\r\n      }\r\n      if (this.filterList) form.filterList = this.filterList;\r\n      if (this.lists) form.lists = this.lists;\r\n      form.validateRequired = !!this.validateRequired;\r\n      form.initSearchPanel = !!this.initSearchPanel;\r\n      form.lists = this.lists;\r\n      return form;\r\n    };\r\n    return FormBuilder;\r\n  }();\n\n  // AjaxLookup class\r\n  let AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     * @param {string} settings.action - Ajax action: \"autosuggest\" or \"modal\"\r\n     */\r\n    function AjaxLookup(settings) {\r\n      var _this$list$parentFiel, _this$list$parentFiel2;\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n      this.elementId = settings.id; // Id\r\n      this.form = settings.form; // Form\r\n      if ($$1.isString(this.form))\r\n        // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n      if (!this.element)\r\n        // Element not found\r\n        return;\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n      this.list = this.form.getList(this.element);\r\n      let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n        rowindex = m ? m[1] : \"\";\r\n      this.parentFields = (_this$list$parentFiel = (_this$list$parentFiel2 = this.list.parentFields) == null ? void 0 : _this$list$parentFiel2.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf)) != null ? _this$list$parentFiel : []; // Parent field in the same table, add row index\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n      this.action = settings.action || \"autosuggest\";\r\n    }\r\n\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n    var _proto = AjaxLookup.prototype;\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      this.form.compileTemplates();\r\n      return this.list.template && !this.isAutoSuggest ? this.list.template.render(opt, ew.jsRenderHelpers) : ew.displayValue(opt, this.element) || opt[0];\r\n    }\r\n\r\n    /**\r\n     * Generate request\r\n     */;\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _data$ajax;\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n      (_data$ajax = data.ajax) != null ? _data$ajax : data.ajax = this.action;\r\n      if (this.parentFields.length > 0) this.parentFields.forEach((pf, i) => data[\"v\" + (i + 1)] = ew.getOptionValue(pf, this.formElement));\r\n      return data;\r\n    }\r\n\r\n    /**\r\n     * Get URL\r\n     */;\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      let params = new URLSearchParams({\r\n        q: query || \"\",\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $$1.isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */;\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */;\r\n    _proto.transform = function transform(data) {\r\n      let results = [];\r\n      if ((data == null ? void 0 : data.result) == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n      return results;\r\n    }\r\n\r\n    /**\r\n     * Convert options to Select2 data format\r\n     * @param {Object[]} options Options\r\n     * @returns {Object[]}\r\n     */;\r\n    _proto.toSelect2Data = function toSelect2Data(options) {\r\n      if (Array.isArray(options)) {\r\n        if (options.every(item => item.hasOwnProperty(\"gf\"))) {\r\n          // Has group by field\r\n          let groups = [...new Set(options.map(item => item.gf))];\r\n          return groups.map(group => {\r\n            return {\r\n              text: group,\r\n              children: options.filter(item => item.gf == group).map(item => {\r\n                return {\r\n                  id: item.lf,\r\n                  text: this.formatResult({\r\n                    lf: item.lf,\r\n                    df: item.df,\r\n                    df2: item.df2,\r\n                    df3: item.df3,\r\n                    df4: item.df4\r\n                  })\r\n                };\r\n              })\r\n            };\r\n          });\r\n        } else {\r\n          return options.map(item => {\r\n            return {\r\n              id: item.lf,\r\n              text: this.formatResult({\r\n                lf: item.lf,\r\n                df: item.df,\r\n                df2: item.df2,\r\n                df3: item.df3,\r\n                df4: item.df4\r\n              })\r\n            };\r\n          });\r\n        }\r\n      }\r\n      return options;\r\n    };\r\n    _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function () {\r\n        var _this$_isAutoSuggest;\r\n        (_this$_isAutoSuggest = this._isAutoSuggest) != null ? _this$_isAutoSuggest : this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n\r\n      /**\r\n       * Lookup options\r\n       */\r\n    }, {\r\n      key: \"options\",\r\n      get: function () {\r\n        return this.list.lookupOptions;\r\n      }\r\n    }]);\r\n    return AjaxLookup;\r\n  }();\n\n  // AutoSuggest class\r\n  let AutoSuggest = /*#__PURE__*/function (_AjaxLookup) {\r\n    _inheritsLoose(AutoSuggest, _AjaxLookup);\r\n    function AutoSuggest(settings) {\r\n      var _this;\r\n      _this = _AjaxLookup.call(this, settings) || this;\r\n      if (!_this.element)\r\n        // Element not found\r\n        return _assertThisInitialized(_this);\r\n      _this.input = _this.form.getElement(\"sv_\" + _this.elementId); // User input\r\n      if (!_this.input || _this.elementId.includes(\"$rowindex$\")) return _assertThisInitialized(_this);\r\n      let self = _assertThisInitialized(_this),\r\n        $input = $$1(_this.input),\r\n        $element = $$1(_this.element);\r\n\r\n      // Properties\r\n      _this.minWidth = settings.minWidth;\r\n      _this.maxHeight = settings.maxHeight;\r\n      _this.highlight = settings.highlight;\r\n      _this.hint = settings.hint;\r\n      _this.minLength = settings.minLength;\r\n      _this.templates = Object.assign({}, settings.templates);\r\n      _this.classNames = Object.assign({}, settings.classNames);\r\n      _this.delay = settings.delay; // For loading more results\r\n      _this.debounce = settings.debounce;\r\n      _this.display = settings.display || \"text\";\r\n      _this.forceSelection = settings.forceSelect;\r\n      _this.lineHeight = settings.lineHeight;\r\n      _this.paddingY = settings.paddingY;\r\n      _this.lookupAllDisplayFields = settings.lookupAllDisplayFields;\r\n      _this.$input = $input;\r\n      _this.$element = $element;\r\n\r\n      // Save instance\r\n      $element.data(\"autosuggest\", _assertThisInitialized(_this));\r\n\r\n      // Save initial option\r\n      if ($input.val() && $element.val()) _this.element.add($element.val(), $input.val(), true);\r\n\r\n      // Add events\r\n      $input.on(\"typeahead:select\", (e, d) => {\r\n        self.setValue(d[self.display]);\r\n      }).on(\"change\", () => {\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen() && !ta.menu.empty()) {\r\n          let $item = ta.menu.getActiveSelectable();\r\n          if ($item) {\r\n            // A suggestion is highlighted\r\n            let i = $item.index(),\r\n              val = self.element.options[i].text;\r\n            $input.typeahead(\"val\", val);\r\n          }\r\n        }\r\n        self.setValue();\r\n      }).on(\"blur\", () => {\r\n        // \"change\" fires before blur\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen()) ta.menu.close();\r\n      }).on(\"focus\", () => {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n        $element.removeClass(\"is-invalid\");\r\n      });\r\n\r\n      // Get suggestions\r\n      let async = !_this.options.length,\r\n        loadingMore = false,\r\n        timer;\r\n\r\n      // Option template (\"suggestion\" template)\r\n      let tpl = self.list.template || self.templates.suggestion;\r\n      if (tpl && $$1.isString(tpl)) tpl = $$1.templates(tpl);\r\n      if (tpl) self.templates.suggestion = tpl.render.bind(tpl);\r\n      if (async && !self.templates.footer) self.templates.footer = '<div class=\"tt-footer dropdown-item\"><div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase(\"LoadingMore\") + '</span></div></div>'; // \"footer\" template\r\n\r\n      let source = (query, syncResults, asyncResults) => {\r\n        if (async) {\r\n          if (timer) timer.cancel();\r\n          timer = $$1.later(_this.debounce, null, () => {\r\n            _this.recordCount = 0; // Reset\r\n            $$1.ajax(_this.prepare(query)).done(data => asyncResults(_this.transform(data)));\r\n          });\r\n        } else {\r\n          let records = _this.getSyncResults(query);\r\n          syncResults(_this.transform({\r\n            result: \"OK\",\r\n            totalRecordCount: records.length,\r\n            records\r\n          }));\r\n        }\r\n      };\r\n\r\n      // Create Typeahead\r\n      $$1(function () {\r\n        // Typeahead options and dataset\r\n        let options = {\r\n          highlight: self.highlight,\r\n          minLength: self.minLength,\r\n          hint: self.hint,\r\n          classNames: self.classNames\r\n        };\r\n        let dataset = {\r\n          name: self.form.id + \"-\" + self.elementId,\r\n          source,\r\n          async,\r\n          templates: self.templates,\r\n          display: self.display,\r\n          limit: async ? self.limit : Infinity\r\n        };\r\n        let args = [options, dataset];\r\n        // Trigger \"typeahead\" event\r\n        $element.trigger(\"typeahead\", [args]);\r\n        // Create Typeahead\r\n        self.typeahead = $input.typeahead.apply($input, args).off(\"blur.tt\").data(\"tt-typeahead\");\r\n        let menu = self.typeahead.menu,\r\n          $menu = menu.$node,\r\n          $dataset = $menu.find(\".tt-dataset\"),\r\n          suggestionHeight = () => $menu.find(\".tt-suggestion\").outerHeight(false);\r\n        if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n        $input.on(\"typeahead:rendered\", (e, suggestions) => {\r\n          let rendered = suggestions.length,\r\n            count = self.count;\r\n          if (count >= self.limit) {\r\n            let h = suggestionHeight();\r\n            if (h) $dataset.css(\"max-height\", h * self.limit);\r\n          }\r\n          if (rendered > 0) $dataset.scrollTop(suggestionHeight() * (count - rendered)); // Scroll to the first suggestion\r\n          if (async) $menu.find(\".tt-footer\").toggle(self.recordCount > count);\r\n        });\r\n        if (async) {\r\n          let loadingMoreTimer;\r\n          $dataset.on(\"scroll\", () => {\r\n            var _loadingMoreTimer;\r\n            (_loadingMoreTimer = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer.cancel();\r\n            loadingMoreTimer = $$1.later(self.delay, null, () => {\r\n              let $footer = $menu.find(\".tt-footer\");\r\n              if (!$footer.is(\":hidden\") && !loadingMore) {\r\n                let currentOffset = $dataset.offset().top + $dataset.outerHeight(false),\r\n                  loadingMoreOffset = $footer.offset().top + $footer.outerHeight(false);\r\n                if (currentOffset + 20 > loadingMoreOffset) {\r\n                  // $footer shows more than 20px\r\n                  loadingMore = true;\r\n                  self.getMore().always(() => loadingMore = false);\r\n                } else {\r\n                  var _loadingMoreTimer2;\r\n                  (_loadingMoreTimer2 = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer2.cancel();\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      return _this;\r\n    }\r\n\r\n    // Set the selected item to the actual field\r\n    var _proto = AutoSuggest.prototype;\r\n    _proto.setValue = function setValue(v) {\r\n      v || (v = this.$input.val());\r\n      let index = this.element.options.findIndex(option => option.text == v);\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          this.$input.typeahead(\"val\", \"\").addClass(\"is-invalid\");\r\n          this.$element.next(\".invalid-feedback\").html(ew.language.phrase(\"ValueNotExist\"));\r\n          this.$element.addClass(\"is-invalid\").val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection)\r\n          // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n\r\n      if (v !== this.$element.attr(\"value\")) this.$element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    }\r\n\r\n    // Transform suggestion\r\n    ;\r\n    _proto.transform = function transform(data) {\r\n      let results = _AjaxLookup.prototype.transform.call(this, data).map(item => Object.assign({}, item, {\r\n        text: _AjaxLookup.prototype.formatResult.call(this, item)\r\n      }));\r\n      this.element.options = results.map(item => new ew.SelectionListOption(item.text, item.lf || item[0]));\r\n      return results;\r\n    }\r\n\r\n    // Get current suggestion count\r\n    ;\r\n    // Get suggestions from lookup cache\r\n    _proto.getSyncResults = function getSyncResults(query) {\r\n      if (this.options.length) {\r\n        let results = this.options.filter(item => {\r\n          if (this.lookupAllDisplayFields) {\r\n            let v = [item.df, item.df2, item.df3, item.df4].map(df => String(df).toLowerCase()).join(\" \");\r\n            return query.toLowerCase().split(\" \").filter(q => q !== \"\").every(q => v.includes(q));\r\n          } else {\r\n            return String(item.df).toLowerCase().startsWith(query);\r\n          }\r\n        });\r\n        this.recordCount = results.length;\r\n        return results;\r\n      }\r\n      return [];\r\n    }\r\n\r\n    // Get more suggestions by Ajax\r\n    ;\r\n    _proto.getMore = function getMore() {\r\n      let menu = this.typeahead.menu,\r\n        start = this.count,\r\n        settings = this.prepare(menu.query, start);\r\n      return $$1.ajax(settings).done(data => menu.datasets[0]._append(menu.query, this.transform(data)));\r\n    };\r\n    _createClass(AutoSuggest, [{\r\n      key: \"count\",\r\n      get: function () {\r\n        return this.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length || 0;\r\n      }\r\n    }]);\r\n    return AutoSuggest;\r\n  }(AjaxLookup);\n\n  /**\r\n   * Class Forms\r\n   */\r\n  let Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n    var _proto = Forms.prototype;\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var _ew$getForm;\r\n      if (!el) return null;\r\n      let id = $$1.isString(el) ? el : (_ew$getForm = ew.getForm(el)) == null ? void 0 : _ew$getForm.id;\r\n      return this._forms[id];\r\n    }\r\n\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */;\r\n    _proto.add = function add(f) {\r\n      if (this._forms[f.id] && this._forms[f.id] !== f) delete this._forms[f.id];\r\n      this._forms[f.id] = f;\r\n    }\r\n\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */;\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n    return Forms;\r\n  }();\n\n  let lang = ew.language.phrase(\"select2\");\r\n  var Select2Language = {\r\n    errorLoading: function () {\r\n      return lang.errorLoading;\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n      return lang.inputTooLong.replace(\"%s\", overChars);\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n      return lang.inputTooShort.replace(\"%s\", remainingChars);\r\n    },\r\n    loadingMore: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.loadingMore + '</span></div>';\r\n    },\r\n    maximumSelected: function (args) {\r\n      return lang.maximumSelected.replace(\"%s\", args.maximum);\r\n    },\r\n    noResults: function () {\r\n      return lang.noResults;\r\n    },\r\n    searching: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.searching + '</span></div>';\r\n    },\r\n    removeAllItems: function () {\r\n      return lang.removeAllItems;\r\n    },\r\n    removeItem: function () {\r\n      return lang.removeItem;\r\n    },\r\n    search: function () {\r\n      return lang.search;\r\n    }\r\n  };\n\n  let _defined$3 = $$1.fn.select2.amd.require._defined,\r\n    Utils$3 = _defined$3['select2/utils'];\r\n\r\n  /**\r\n   * Select2 decorator for Results\r\n   */\r\n  let Select2ResultsDecorator = /*#__PURE__*/function () {\r\n    function Select2ResultsDecorator() {}\r\n    var _proto = Select2ResultsDecorator.prototype;\r\n    _proto.render = function render(decorated) {\r\n      var $results = $$1('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n      if (this.options.get('multiple')) {\r\n        $results.attr('aria-multiselectable', 'true');\r\n      }\r\n      this.$results = $results;\r\n      return $results;\r\n    };\r\n    _proto.displayMessage = function displayMessage(decorated, params) {\r\n      var escapeMarkup = this.options.get('escapeMarkup');\r\n      this.clear();\r\n      this.hideLoading();\r\n      var $message = $$1('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n      if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n        // HTML //***\r\n        $message.append(params.message);\r\n      } else {\r\n        var message = this.options.get('translations').get(params.message);\r\n        $message.append(escapeMarkup(message(params.args)));\r\n      }\r\n      $message[0].className += ' select2-results__message';\r\n      this.$results.append($message);\r\n    };\r\n    _proto.append = function append(decorated, data) {\r\n      this.hideLoading();\r\n      if (data.results == null || data.results.length === 0) {\r\n        if (this.$results.children().length === 0) {\r\n          if (this.$element.data(\"updating\") && data.pagination.more) {\r\n            this.trigger('results:message', {\r\n              message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n            });\r\n            this.$element.one(\"updated\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n          } else {\r\n            this.trigger('results:message', {\r\n              message: 'noResults'\r\n            });\r\n          }\r\n        }\r\n        return;\r\n      }\r\n      data.results = this.sort(data.results);\r\n\r\n      //***\r\n      var cols = this.options.get('columns'),\r\n        len = data.results.length,\r\n        $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n      for (var d = 0; d < data.results.length; d++) {\r\n        var item = data.results[d];\r\n        var $option = this.option(item);\r\n        if (!$row.length || $row.children().length == cols) {\r\n          // Add new row\r\n          $row = $$1('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n          this.$results.append($row);\r\n        }\r\n        $row.append($option);\r\n        if (d == len - 1) {\r\n          // Last\r\n          var cnt = cols - $row.children().length;\r\n          for (var i = 0; i < cnt; i++) $row.append('<div class=\"' + this.options.get('cellClass') + '\"></div>');\r\n        }\r\n      }\r\n    };\r\n    _proto.option = function option(decorated, data) {\r\n      // var option = document.createElement('li');\r\n      var option = document.createElement('div'); //***\r\n      option.classList.add('select2-results__option');\r\n      option.classList.add('select2-results__option--selectable');\r\n      this.options.get('cellClass').split(\" \").forEach(c => option.classList.add(c)); //***\r\n\r\n      var attrs = {\r\n        'role': 'option',\r\n        'aria-selected': 'false'\r\n      };\r\n      var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n      if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n        attrs['aria-disabled'] = 'true';\r\n        option.classList.remove('select2-results__option--selectable');\r\n        option.classList.add('select2-results__option--disabled');\r\n      }\r\n      if (data.id == null) {\r\n        option.classList.remove('select2-results__option--selectable');\r\n      }\r\n      if (data._resultId != null) {\r\n        option.id = data._resultId;\r\n      }\r\n      if (data.title) {\r\n        option.title = data.title;\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   attrs.role = 'group';\r\n      //   attrs['aria-label'] = data.text;\r\n      //   option.classList.remove('select2-results__option--selectable');\r\n      //   option.classList.add('select2-results__option--group');\r\n      // }\r\n\r\n      for (var attr in attrs) {\r\n        var val = attrs[attr];\r\n        option.setAttribute(attr, val);\r\n      }\r\n\r\n      // if (data.children) { //***\r\n      //   var $option = $(option);\r\n\r\n      //   var label = document.createElement('strong');\r\n      //   label.className = 'select2-results__group';\r\n\r\n      //   this.template(data, label);\r\n\r\n      //   var $children = [];\r\n\r\n      //   for (var c = 0; c < data.children.length; c++) {\r\n      //     var child = data.children[c];\r\n\r\n      //     var $child = this.option(child);\r\n\r\n      //     $children.push($child);\r\n      //   }\r\n\r\n      //   var $childrenContainer = $('<ul></ul>', {\r\n      //     'class': 'select2-results__options select2-results__options--nested',\r\n      //     'role': 'none'\r\n      //   });\r\n\r\n      //   $childrenContainer.append($children);\r\n\r\n      //   $option.append(label);\r\n      //   $option.append($childrenContainer);\r\n      // } else {\r\n      this.template(data, option);\r\n      // }\r\n\r\n      Utils$3.StoreData(option, 'data', data);\r\n      return option;\r\n    };\r\n    return Select2ResultsDecorator;\r\n  }();\n\n  let _defined$2 = $$1.fn.select2.amd.require._defined,\r\n    Utils$2 = _defined$2['select2/utils'];\r\n\r\n  /**\r\n   * Results for modal lookup\r\n   */\r\n  let ModalResults = /*#__PURE__*/function () {\r\n    function ModalResults() {}\r\n    var _proto = ModalResults.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n\r\n      // Remove handlers\r\n      (_container$listeners$ = container.listeners['results:select']) == null ? void 0 : _container$listeners$.pop();\r\n      this.$results.off('mouseup');\r\n      container.on('results:select', function (evt) {\r\n        var $highlighted = self.getHighlightedResults();\r\n        if ($highlighted.length === 0) {\r\n          return;\r\n        }\r\n        var data = Utils$2.GetData($highlighted[0], 'data');\r\n        if ($highlighted.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('select', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        }\r\n      });\r\n      this.$results.on('mousedown', '.select2-results__option--selectable', function (evt) {\r\n        this._mousedown = true;\r\n      });\r\n      this.$results.on('mouseup', '.select2-results__option--selectable', function (evt) {\r\n        if (!this._mousedown) return;\r\n        var $this = $$1(this);\r\n        var data = Utils$2.GetData(this, 'data');\r\n        if ($this.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n          return;\r\n        }\r\n        self.trigger('select', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      });\r\n    };\r\n    return ModalResults;\r\n  }();\n\n  /**\r\n   * Search box for modal lookup\r\n   */\r\n  let ModalSearch = /*#__PURE__*/function () {\r\n    function ModalSearch() {}\r\n    var _proto = ModalSearch.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      (_container$listeners$ = container.listeners['close']) == null ? void 0 : _container$listeners$.pop(); // Remove handler from Search\r\n\r\n      container.on('close', function () {\r\n        self.$search.attr('tabindex', -1).removeAttr('aria-controls').removeAttr('aria-activedescendant');\r\n      });\r\n    };\r\n    return ModalSearch;\r\n  }();\n\n  /**\r\n   * Dropdown search decorator\r\n   */\r\n  let KEYS = $.fn.select2.amd.require._defined['select2/keys'];\r\n  KEYS.PRINT_SCREEN = 44;\r\n  let DropdownSearchDecorator = /*#__PURE__*/function () {\r\n    function DropdownSearchDecorator() {}\r\n    var _proto = DropdownSearchDecorator.prototype;\r\n    _proto.handleSearch = function handleSearch(decorated, evt) {\r\n      var key = evt.which;\r\n\r\n      // Ignore events from modifier keys\r\n      if ([KEYS.TAB, KEYS.SHIFT, KEYS.CTRL, KEYS.ALT, KEYS.PRINT_SCREEN].includes(key)) {\r\n        return;\r\n      }\r\n      if (!this._keyUpPrevented) {\r\n        var input = this.$search.val();\r\n        this.trigger('query', {\r\n          term: input\r\n        });\r\n      }\r\n      this._keyUpPrevented = false;\r\n    };\r\n    return DropdownSearchDecorator;\r\n  }();\n\n  let AttachBody$2 = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody with popper\r\n   */\r\n  let Select2AttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(Select2AttachBody, _AttachBody);\r\n    // Constructor\r\n    function Select2AttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override _attachPositioningHandler\r\n    var _proto = Select2AttachBody.prototype;\r\n    _proto._attachPositioningHandler = function _attachPositioningHandler(decorated, container) {\r\n      var self = this;\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      var handler = () => {\r\n        self._positionDropdown();\r\n        self._resizeDropdown();\r\n      };\r\n      $$1(window).on(events.join(' '), handler);\r\n      container.$element.closest('.modal').on('scroll.select2.' + container.id, handler);\r\n    };\r\n    // Override _detachPositioningHandler\r\n    _proto._detachPositioningHandler = function _detachPositioningHandler(decorated, container) {\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      $$1(window).off(events.join(' '));\r\n      container.$element.closest('.modal').off('scroll.select2.' + container.id);\r\n    };\r\n    // Override _showDropdown\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$container[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    };\r\n    // Override _positionDropdown()\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    }\r\n\r\n    // Override destroy()\r\n    ;\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return Select2AttachBody;\r\n  }(AttachBody$2);\n\n  /**\r\n   * Select2 AttachBody decorator for modal lookup\r\n   */\r\n  let ModalAttachBody = /*#__PURE__*/function () {\r\n    function ModalAttachBody(decorated, $element, options) {\r\n      _defineProperty(this, \"$modal\", null);\r\n      options.set('dropdownParent', $$1(document.body));\r\n      decorated.call(this, $element, options);\r\n    }\r\n    var _proto = ModalAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      let self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown.removeClass('select2');\r\n      this.$container = $container;\r\n    };\r\n    _proto.render = function render(decorated) {\r\n      let $container = $$1('<span></span>');\r\n      let $dropdown = decorated.call(this);\r\n      $container.append($dropdown);\r\n      this.$dropdownContainer = $container;\r\n      return $container;\r\n    };\r\n    _proto._bindContainerResultHandlers = function _bindContainerResultHandlers(decorated, container) {\r\n      // These should only be bound once\r\n      if (this._containerResultsHandlersBound) {\r\n        return;\r\n      }\r\n      let self = this;\r\n      container.$modal = this.$modal;\r\n      container.on('results:all', function () {\r\n        var _self$$search$;\r\n        self._updateDropdown();\r\n        (_self$$search$ = self.$search[0]) == null ? void 0 : _self$$search$.focus();\r\n      });\r\n      container.on('results:append', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('results:message', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('select', function (e) {\r\n        var _e$originalEvent;\r\n        let target = (_e$originalEvent = e.originalEvent) == null ? void 0 : _e$originalEvent.currentTarget;\r\n        target == null ? void 0 : target.classList.add('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      container.on('unselect', function (e) {\r\n        var _e$originalEvent2;\r\n        let target = (_e$originalEvent2 = e.originalEvent) == null ? void 0 : _e$originalEvent2.currentTarget;\r\n        target == null ? void 0 : target.classList.remove('select2-results__option--selected');\r\n        self._updateDropdown();\r\n      });\r\n      this._containerResultsHandlersBound = true;\r\n    };\r\n    _proto._updateDropdown = function _updateDropdown() {\r\n      if (!this.$modal.find(this.$dropdownContainer)[0]) this.$modal.find('.modal-body').children().detach().end().append(this.$dropdownContainer);\r\n    };\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$$modal;\r\n      let self = this,\r\n        oldValue = this.$element.val();\r\n      this.$dropdownContainer.appendTo(this.options.get('dropdownParent'));\r\n      (_this$$modal = this.$modal) != null ? _this$$modal : this.$modal = $$1('#ew-modal-lookup-dialog');\r\n      this._updateDropdown();\r\n      this.$modal.find('.modal-title').empty().append(ew.language.phrase('LookupTitle').replace('%s', this.$element.data('caption')));\r\n      this.$modal.find('.modal-footer button[data-value]').off().on('click', function () {\r\n        if (!$$1(this).data('value'))\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n      });\r\n      this.$modal.modal('show').on('hidden.bs.modal', function (event) {\r\n        self.$container.removeClass('select2-container--open');\r\n      }).draggable(this.options.get('draggableOptions'));\r\n    };\r\n    return ModalAttachBody;\r\n  }();\n\n  let AttachBody$1 = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(FilterAttachBody, _AttachBody);\r\n    // Constructor\r\n    function FilterAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    var _proto = FilterAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper;\r\n      (_this$_popper = this._popper) == null ? void 0 : _this$_popper.update();\r\n    }\r\n\r\n    // Override _resizeDropdown()\r\n    ;\r\n    _proto._resizeDropdown = function _resizeDropdown() {\r\n      var css = {\r\n        width: this.$container.outerWidth(false) + 'px'\r\n      };\r\n      if (this.options.get('dropdownAutoWidth')) {\r\n        css.minWidth = css.width;\r\n        css.position = 'relative';\r\n        css.width = 'auto';\r\n      }\r\n      this.$dropdown.css(css);\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _dropdownButton$close, _this$_popper2;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n\r\n      // Footer\r\n      let self = this,\r\n        oldValue = this.$element.val(),\r\n        $footer = $$1('#ew-filter-dropdown-footer').contents().clone();\r\n      $footer.find('.ew-filter-btn[data-value]').off('click.ew').on('click.ew', function (e) {\r\n        let value = $$1(this).data('value');\r\n        if (value) {\r\n          // OK\r\n          $$1(self.$element[0].form).triggerHandler('submit');\r\n        } else {\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n        }\r\n        self.$element.select2('close');\r\n      });\r\n      $footer.find('.ew-filter-clear').off('click.ew').on('click.ew', e => self.$element.data('select2').selection._handleClear(e));\r\n      let $filterDropdown = this.$dropdownContainer.find('.ew-filter-dropdown');\r\n      if (!$filterDropdown.find('.ew-filter-btn')[0]) $filterDropdown.append($footer);\r\n\r\n      // Popper\r\n      var dropdownButton = document.querySelector('.ew-filter-dropdown-btn[data-table=' + this.$element.data('table') + '][data-field=' + this.$element.data('field') + ']'),\r\n        reference = (_dropdownButton$close = dropdownButton.closest(\".ew-table-header-cell\")) != null ? _dropdownButton$close : dropdownButton.closest(\".ew-table-header-btn\");\r\n      (_this$_popper2 = this._popper) != null ? _this$_popper2 : this._popper = Popper.createPopper(reference, this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return FilterAttachBody;\r\n  }(AttachBody$1);\n\n  let AttachBody = $$1.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n\r\n  /**\r\n   * Select2 AttachBody for dropdown\r\n   */\r\n  let DropdownAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(DropdownAttachBody, _AttachBody);\r\n    // Constructor\r\n    function DropdownAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    }\r\n\r\n    // Override bind()\r\n    var _proto = DropdownAttachBody.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown();\r\n\r\n        // Must bind after the results handlers to ensure correct sizing\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    }\r\n\r\n    // Override _showDropdown()\r\n    ;\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$element.parent().find('.select2-container')[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n      this._positionDropdown();\r\n      this._resizeDropdown();\r\n    }\r\n\r\n    // Override _positionDropdown()\r\n    ;\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    }\r\n\r\n    // Override position()\r\n    ;\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n    return DropdownAttachBody;\r\n  }(AttachBody);\n\n  let _defined$1 = $$1.fn.select2.amd.require._defined,\r\n    AllowClear$1 = _defined$1['select2/selection/allowClear'],\r\n    Utils$1 = _defined$1['select2/utils'];\r\n\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n  let FilterAllowClear = /*#__PURE__*/function (_AllowClear) {\r\n    _inheritsLoose(FilterAllowClear, _AllowClear);\r\n    function FilterAllowClear() {\r\n      return _AllowClear.apply(this, arguments) || this;\r\n    }\r\n    var _proto = FilterAllowClear.prototype;\r\n    // Override _handleClear\r\n    _proto._handleClear = function _handleClear(_, evt) {\r\n      // Ignore the event if it is disabled\r\n      if (this.isDisabled()) {\r\n        return;\r\n      }\r\n      var $clear = this.$selection.find('.select2-selection__clear');\r\n\r\n      // Ignore the event if nothing has been selected\r\n      if ($clear.length === 0) {\r\n        return;\r\n      }\r\n      evt.stopPropagation();\r\n      var data = Utils$1.GetData($clear[0], 'data');\r\n      var previousVal = this.$element.val();\r\n      this.$element.val(this.placeholder.id);\r\n      var unselectData = {\r\n        data: data\r\n      };\r\n      this.trigger('clear', unselectData);\r\n      if (unselectData.prevented) {\r\n        this.$element.val(previousVal);\r\n        return;\r\n      }\r\n      for (var d = 0; d < data.length; d++) {\r\n        unselectData = {\r\n          data: data[d]\r\n        };\r\n\r\n        // Trigger the `unselect` event, so people can prevent it from being\r\n        // cleared.\r\n        this.trigger('unselect', unselectData);\r\n\r\n        // If the event was prevented, don't clear it out.\r\n        if (unselectData.prevented) {\r\n          this.$element.val(previousVal);\r\n          return;\r\n        }\r\n      }\r\n      this.$element.trigger('input').trigger('change');\r\n    };\r\n    return FilterAllowClear;\r\n  }(AllowClear$1);\n\n  /**\r\n   * Select2 decorator for MultipleSelection\r\n   */\r\n  let Select2MultipleSelectionDecorator = /*#__PURE__*/function () {\r\n    function Select2MultipleSelectionDecorator() {}\r\n    var _proto = Select2MultipleSelectionDecorator.prototype;\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      decorated.call(this, container, $container);\r\n      this.$selection.on('click', '.select2-selection__choice__remove', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n    return Select2MultipleSelectionDecorator;\r\n  }();\n\n  /**\r\n   * Select2 decorator for SelectAdapter\r\n   */\r\n  let Select2DataAdapterDecorator = /*#__PURE__*/function () {\r\n    function Select2DataAdapterDecorator() {}\r\n    var _proto = Select2DataAdapterDecorator.prototype;\r\n    _proto.option = function option(decorated, data) {\r\n      var _data$element;\r\n      var text = data.text,\r\n        html = (_data$element = data.element) == null ? void 0 : _data$element.innerHTML,\r\n        $option = decorated.call(this, data);\r\n\r\n      // Check HTML\r\n      if (text.startsWith('<') && text.endsWith('>')) $option.html(text);else if (html && html != text) $option.html(html);\r\n      return $option;\r\n    };\r\n    return Select2DataAdapterDecorator;\r\n  }();\n\n  // Defined classes from select2\r\n  let _defined = $.fn.select2.amd.require._defined,\r\n    ResultsList = _defined['select2/results'],\r\n    SingleSelection = _defined['select2/selection/single'],\r\n    MultipleSelection = _defined['select2/selection/multiple'],\r\n    Placeholder = _defined['select2/selection/placeholder'],\r\n    AllowClear = _defined['select2/selection/allowClear'],\r\n    SelectionSearch = _defined['select2/selection/search'],\r\n    EventRelay = _defined['select2/selection/eventRelay'],\r\n    Utils = _defined['select2/utils'],\r\n    Translation = _defined['select2/translation'],\r\n    SelectData = _defined['select2/data/select'],\r\n    ArrayData = _defined['select2/data/array'],\r\n    AjaxData = _defined['select2/data/ajax'],\r\n    Tags = _defined['select2/data/tags'],\r\n    Tokenizer = _defined['select2/data/tokenizer'],\r\n    MinimumInputLength = _defined['select2/data/minimumInputLength'],\r\n    MaximumInputLength = _defined['select2/data/maximumInputLength'],\r\n    MaximumSelectionLength = _defined['select2/data/maximumSelectionLength'],\r\n    Dropdown = _defined['select2/dropdown'],\r\n    DropdownSearch = _defined['select2/dropdown/search'],\r\n    HidePlaceholder = _defined['select2/dropdown/hidePlaceholder'],\r\n    InfiniteScroll = _defined['select2/dropdown/infiniteScroll'],\r\n    // AttachBody = _defined['select2/dropdown/attachBody'],\r\n    MinimumResultsForSearch = _defined['select2/dropdown/minimumResultsForSearch'],\r\n    SelectOnClose = _defined['select2/dropdown/selectOnClose'],\r\n    CloseOnSelect = _defined['select2/dropdown/closeOnSelect'],\r\n    DropdownCSS = _defined['select2/dropdown/dropdownCss'],\r\n    TagsSearchHighlight = _defined['select2/dropdown/tagsSearchHighlight'],\r\n    Defaults = _defined['select2/defaults'];\r\n\r\n  // Override select2 Defaults\r\n  Defaults.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n      options.dataAdapter = Utils.Decorate(\r\n      // Override\r\n      options.dataAdapter, Select2DataAdapterDecorator);\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength);\r\n      }\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength);\r\n      }\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength);\r\n      }\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer);\r\n      }\r\n    }\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList;\r\n\r\n      // Override\r\n      if (options.columns > 0 && options.customOption) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, Select2ResultsDecorator);\r\n        if (options.iconClass && options.multiple && options.templateResult == ew.selectOptions.templateResult) {\r\n          options._templateResult = options.templateResult;\r\n          options.templateResult = result => result.loading ? result.text : '<div class=\"form-check-input ew-dropdown-check-input\"></div><label class=\"' + options.iconClass + ' ew-dropdown-check-label\">' + options._templateResult(result) + '</label>';\r\n        }\r\n      } else if (options.modal || options.filter) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, ModalResults);\r\n      }\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n      }\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n      }\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n      }\r\n      if (options.tags) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, TagsSearchHighlight);\r\n      }\r\n    }\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.modal || options.filter) {\r\n        options.dropdownAdapter = Utils.Decorate(Dropdown, DropdownSearch);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, ModalSearch);\r\n      } else {\r\n        options.dropdownAdapter = Dropdown;\r\n        if (!options.multiple) {\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearch);\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        }\r\n      }\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch);\r\n      }\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect);\r\n      }\r\n      if (options.dropdownCssClass != null) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS);\r\n      }\r\n      options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, options.modal ? ModalAttachBody : options.filter ? FilterAttachBody : options.dropdown ? DropdownAttachBody : Select2AttachBody // Override\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n        options.selectionAdapter = Utils.Decorate(\r\n        // Override\r\n        options.selectionAdapter, Select2MultipleSelectionDecorator);\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      }\r\n\r\n      // Add the placeholder mixin if a placeholder was specified\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder);\r\n      }\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, options.filter ? FilterAllowClear : AllowClear);\r\n      }\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch);\r\n      }\r\n      options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay);\r\n    }\r\n    options.translations = new Translation(Select2Language);\r\n    options.dir = ew.IS_RTL ? \"rtl\" : \"ltr\";\r\n    return options;\r\n  };\n\n  let currentUrl = new URL(window.location);\r\n  let forms = new Forms();\r\n  let $document$1 = $$1(document),\r\n    $body = $$1(\"body\");\r\n  let fieldContainerSelector = \".row, [id^=el_], [class^=el_]\";\r\n\r\n  // Set focus\r\n  Pace.on(\"done\", () => {\r\n    var _forms$get;\r\n    let form = document.querySelector(\".modal.show form.ew-form\") || document.querySelector(\"form.ew-form\");\r\n    (_forms$get = forms.get(form == null ? void 0 : form.id)) == null ? void 0 : _forms$get.tryFocus();\r\n  });\r\n\r\n  // Create select2\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.toSelect2Data(lookup.options);\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length, _data$records;\r\n          let self = this;\r\n          return {\r\n            results: lookup.toSelect2Data(lookup.transform(data)),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length = (_data$records = data.records) == null ? void 0 : _data$records.length) != null ? _data$records$length : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let args = {\r\n      name: options.name,\r\n      options\r\n    };\r\n    $document$1.trigger(\"select2\", [args]);\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(args.options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin;\r\n      (_$$data$$dropdown$fin = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\")[0]) == null ? void 0 : _$$data$$dropdown$fin.focus();\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n    if (options.minimumResultsForSearch === Infinity) {\r\n      $select.on(\"select2:opening select2:closing\", function () {\r\n        $$1(this).data(\"select2\").$dropdown.find(\".select2-search--dropdown\").addClass(\"select2-search--hide\");\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create modal lookup\r\n  function createModalLookup(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length2, _data$records2;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length2 = (_data$records2 = data.records) == null ? void 0 : _data$records2.length) != null ? _data$records$length2 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin2;\r\n      (_$$data$$dropdown$fin2 = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin2.focus();\r\n    });\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create table header filter\r\n  function createFilter(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n    if ($$1.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n    if ($$1.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n        lookup = new ew.AjaxLookup({\r\n          ...options.ajax,\r\n          ...{\r\n            action: \"modal\"\r\n          }\r\n        });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length3, _data$records3;\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length3 = (_data$records3 = data.records) == null ? void 0 : _data$records3.length) != null ? _data$records$length3 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $$1.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n    let $select = $$1(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin3;\r\n      (_$$data$$dropdown$fin3 = $$1(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin3.focus({\r\n        preventScroll: options.preventScroll\r\n      }); // Do not scroll on focus by default\r\n    });\r\n\r\n    if ($$1.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $$1(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  }\r\n\r\n  // Init icon tooltip\r\n  function initIcons(e) {\r\n    var _e$target;\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document,\r\n      tooltipOptions = {\r\n        ...ew.tooltipOptions,\r\n        container: \"body\",\r\n        trigger: ew.IS_MOBILE ? \"manual\" : \"hover\"\r\n      };\r\n    $$1(el).find(\".ew-icon\").closest(\".btn, .ew-home, .ew-row-link:not(.dropdown-item)\").each(function () {\r\n      let $this = $$1(this);\r\n      if ($this.hasClass(\"dropdown-toggle\")) {\r\n        let $p = $this.closest(\".btn-group\");\r\n        if ($p.children(\".btn\").length == 1) {\r\n          $p.tooltip({\r\n            ...tooltipOptions,\r\n            title: this.dataset.title || this.title\r\n          }).on(\"mouseleave\", e => {\r\n            var _bootstrap$Tooltip$ge;\r\n            return (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(e.currentTarget)) == null ? void 0 : _bootstrap$Tooltip$ge.hide();\r\n          });\r\n          $this.next(\".dropdown-menu\").on(\"mouseover\", e => e.stopPropagation());\r\n        }\r\n      } else {\r\n        $this.tooltip(tooltipOptions);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Init password options\r\n  function initPasswordOptions(e) {\r\n    var _e$target2;\r\n    var el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n    if ($$1.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $$1(el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $$1(this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function (strength, percentage) {\r\n            var $pst = $$1(\"[id='\" + this.attr(\"data-password-strength\") + \"']\"),\r\n              // Do not use #\r\n              $pb = $pst.find(\".progress-bar\");\r\n            if (this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\",\r\n                min = ew.MIN_PASSWORD_STRENGTH,\r\n                valid = percentage >= min;\r\n              if (percentage < min * 0.25) {\r\n                $pb.addClass(\"text-bg-danger\").removeClass(\"text-bg-warning text-bg-info text-bg-success\");\r\n              } else if (percentage < min * 0.5) {\r\n                $pb.addClass(\"text-bg-warning\").removeClass(\"text-bg-danger text-bg-info text-bg-success\");\r\n              } else if (percentage < min * 0.75) {\r\n                $pb.addClass(\"text-bg-primary\").removeClass(\"text-bg-danger text-bg-warning text-bg-success\");\r\n              } else {\r\n                $pb.addClass(\"text-bg-success\").removeClass(\"text-bg-danger text-bg-warning text-bg-info\");\r\n              }\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > min * 0.5) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\");\r\n              this.data(\"validated\", valid);\r\n              if (valid) setValid(this[0]);\r\n            } else {\r\n              $pst.addClass(\"d-none\");\r\n              this.data(\"validated\", null);\r\n            }\r\n            $pst.width(this.outerWidth());\r\n          }\r\n        });\r\n      });\r\n    }\r\n    if ($$1.fn.pGenerator) {\r\n      $$1(el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $$1(this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function (pwd) {\r\n            $$1(\"#\" + this.attr(\"data-password-confirm\")).val(pwd);\r\n            $$1(\"#\" + this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action - Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|Object|URLSearchParams|FormData} query - Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n      params = query instanceof URLSearchParams ? query : new URLSearchParams(query),\r\n      qs = params.toString();\r\n    if ($$1.isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  }\r\n\r\n  /**\r\n   * Parse URL\r\n   * Note: .search is read only, always use .searchParams to change parameters\r\n   * @param {string} url - URL\r\n   * @returns {Object}\r\n   */\r\n  function parseUrl(url) {\r\n    var _pathname, _hash;\r\n    let pathname, search, hash;\r\n    [pathname, hash] = url.split(\"#\");\r\n    [pathname, search] = pathname.split(\"?\");\r\n    if (!search && pathname.includes(\"=\")) [pathname, search] = [\"\", pathname];\r\n    let obj = {\r\n      url: url,\r\n      pathname: (_pathname = pathname) != null ? _pathname : \"\",\r\n      hash: (_hash = hash) != null ? _hash : \"\",\r\n      searchParams: new URLSearchParams(search)\r\n    };\r\n    Object.defineProperty(obj, \"search\", {\r\n      // Read only\r\n      value: search,\r\n      writable: false,\r\n      enumerable: true\r\n    });\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Create URLSearchParams\r\n   * @param {*} params - search parameters\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function createSearchParams(params) {\r\n    try {\r\n      return new URLSearchParams(params);\r\n    } catch (e) {\r\n      console.log(e);\r\n      return new URLSearchParams();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get URL search parameters\r\n   * @param {string} url - URL\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function getSearchParams(url) {\r\n    return parseUrl(url).searchParams;\r\n  }\r\n\r\n  /**\r\n   * Get a search parameter from URL\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @returns {string} Value\r\n   */\r\n  function getSearchParam(url, name) {\r\n    return getSearchParams(url).get(name);\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameters\r\n   * @param {string} url - URL\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParams(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n    obj.searchParams = mergeSearchParams(obj.searchParams, ...args);\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Merge URL search parameters\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {URLSearchParams}\r\n   */\r\n  function mergeSearchParams() {\r\n    let searchParams = new URLSearchParams();\r\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      args[_key2] = arguments[_key2];\r\n    }\r\n    for (const params of args) {\r\n      if ($$1.isObject(params) || $$1.isString(params) && params) {\r\n        // Note: Array is also object\r\n        let newParams = params instanceof URLSearchParams ? params : createSearchParams(params);\r\n        newParams.forEach((value, key) => searchParams.has(key) ? key.endsWith(\"[]\") ? searchParams.append(key, value) : searchParams.set(key, value) : searchParams.set(key, value));\r\n      }\r\n    }\r\n    return searchParams;\r\n  }\r\n\r\n  /**\r\n   * Set URL search parameter\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @param {string} value - Value\r\n   * @returns {string} URL\r\n   */\r\n  function setSearchParam(url, name, value) {\r\n    return setSearchParams(url, {\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete search parameters from URL\r\n   * @param {string} url - URL\r\n   * @param {string[]} names - Names\r\n   * @returns {string} URL\r\n   */\r\n  function deleteSearchParam(url) {\r\n    let obj = parseUrl(url);\r\n    for (var _len3 = arguments.length, names = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\r\n      names[_key3 - 1] = arguments[_key3];\r\n    }\r\n    names.forEach(name => obj.searchParams.delete(name));\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  /**\r\n   * Build URL\r\n   * @param {Object} obj Object { pathname, searchParams, hash }\r\n   * @returns {string} URL\r\n   */\r\n  function buildUrl(obj) {\r\n    let search = obj.searchParams.toString();\r\n    return obj.pathname + (obj.pathname && search ? \"?\" : \"\") + search + (obj.hash ? \"#\" + obj.hash : \"\");\r\n  }\r\n\r\n  /**\r\n   * Set layout parameter to URL\r\n   * Disable layout by adding \"layout=false\"\r\n   * @param {string} url - URL\r\n   * @param {string} value - Layout\r\n   * @returns {string} URL\r\n   */\r\n  function setLayout(url, value) {\r\n    return url && url != \"#\" ? setSearchParams(url, {\r\n      [ew.PAGE_LAYOUT]: String(value)\r\n    }) : url;\r\n  }\r\n\r\n  // Sanitize URL\r\n  function sanitizeUrl(url) {\r\n    let obj = parseUrl(url),\r\n      searchParams = obj.searchParams;\r\n    searchParams.forEach((value, key) => {\r\n      value = decodeURIComponent(value);\r\n      if ([\"<>\", \"<=\", \">=\", \">\", \"<\"].includes(value)) searchParams.set(key, value);else searchParams.set(key, ew.sanitize(value));\r\n    });\r\n    return buildUrl(obj);\r\n  }\r\n\r\n  // Set session timer\r\n  function setSessionTimer() {\r\n    let timeoutTime, timer, keepAliveTimer, counter;\r\n    // Keep alive\r\n    let keepAlive = () => {\r\n      $$1.get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }).then(token => {\r\n        if (token && $$1.isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n          setTimer();\r\n        }\r\n      });\r\n    };\r\n    // Reset timer\r\n    let resetTimer = () => {\r\n      var _timer;\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = 0;\r\n      }\r\n      (_timer = timer) == null ? void 0 : _timer.cancel(); // Clear timer\r\n    };\r\n    // Redirect to TIMEOUT_URL\r\n    let doTimeout = () => {\r\n      resetTimer();\r\n      window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n    };\r\n    // Timeout\r\n    let timeout = () => {\r\n      var _keepAliveTimer;\r\n      (_keepAliveTimer = keepAliveTimer) == null ? void 0 : _keepAliveTimer.cancel(); // Stop keep alive\r\n      if (counter > 0) {\r\n        let timerInterval,\r\n          message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>').replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n        Swal.fire({\r\n          ...ew.sweetAlertSettings,\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: () => {\r\n            timerInterval = setInterval(() => {\r\n              let content = Swal.getHtmlContainer(),\r\n                min = content.querySelector(\".ew-session-counter-minute\"),\r\n                sec = content.querySelector(\".ew-session-counter-second\"),\r\n                timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          willClose: () => {\r\n            clearInterval(timerInterval);\r\n          }\r\n        }).then(result => {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            doTimeout();\r\n          }\r\n        });\r\n      } else {\r\n        doTimeout();\r\n      }\r\n    };\r\n    // Set timer\r\n    let setTimer = () => {\r\n      var _ew$vars$login;\r\n      if (ew.SESSION_TIMEOUT > 0 && window.location.pathname != ((_ew$vars$login = ew.vars.login) == null || (_ew$vars$login = _ew$vars$login.login) == null ? void 0 : _ew$vars$login.url)) {\r\n        // Set session timeout except for login page\r\n        resetTimer(); // Reset timer first\r\n        timer = $$1.later(timeoutTime * 1000, null, timeout);\r\n      }\r\n    };\r\n    if (ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN) {\r\n      // Keep alive\r\n      let keepAliveInterval = Math.max(ew.SESSION_KEEP_ALIVE_INTERVAL || ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN, ew.MIN_SESSION_KEEP_ALIVE_INTERVAL);\r\n      keepAliveTimer = $$1.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      setTimer();\r\n    }\r\n  }\r\n\r\n  // Init export links\r\n  function initExportLinks(e) {\r\n    var _e$target3;\r\n    let $el = $$1((_e$target3 = e == null ? void 0 : e.target) != null ? _e$target3 : document);\r\n    $el.find(\"a.ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      let href = this.href;\r\n      if (href && href != \"#\") fileDownload(href, getchartParams());\r\n      e.preventDefault();\r\n    });\r\n    $el.find(\"a.ew-export-link[href].ew-print, a.ew-export-link[href].ew-xml\").each(function () {\r\n      let url = new URL(this.href);\r\n      url.searchParams.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      url.searchParams.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      this.href = url.pathname + url.search; // Add token name and antiforgery token // PHP\r\n    });\r\n  }\r\n\r\n  // Init multi-select checkboxes\r\n  function initMultiSelectCheckboxes(e) {\r\n    var _e$target4;\r\n    var el = (_e$target4 = e == null ? void 0 : e.target) != null ? _e$target4 : document,\r\n      $el = $$1(el),\r\n      $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n    var _update = function (id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n        cnt = $els.length,\r\n        len = $els.filter(\":checked\").length;\r\n      $$1(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n    $cbs.on(\"click\", e => _update(e.target.name.split(\"_\")[0]));\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each((i, el) => _update(el.id)); // Init\r\n  }\r\n\r\n  // Get error from response\r\n  function getError(result) {\r\n    var _result$error, _result$error2;\r\n    return result && (((_result$error = result.error) == null ? void 0 : _result$error.description) || ((_result$error2 = result.error) == null ? void 0 : _result$error2.message) || $$1.isString(result.error) && result.error || result.failureMessage ||\r\n    // Check this first\r\n    result.success === false && result.message || null);\r\n  }\r\n\r\n  // Download file\r\n  function fileDownload(href, data) {\r\n    let isHtml = href.includes(\"export=html\") || href.includes(getApiUrl([ew.API_EXPORT_ACTION, \"html\"])),\r\n      swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(href, {\r\n          method: data ? \"POST\" : \"GET\",\r\n          body: data || null\r\n        }).then(async response => {\r\n          let ct = response.headers.get(\"Content-Type\");\r\n          if (ct != null && ct.includes(\"json\")) {\r\n            var _getError;\r\n            let result = await response.json(),\r\n              error = (_getError = getError(result)) != null ? _getError : ew.language.phrase(\"FailedToExport\");\r\n            if (error) {\r\n              swal.hideLoading();\r\n              swal.update({\r\n                html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n                showConfirmButton: true\r\n              });\r\n              $document$1.trigger(\"export\", [{\r\n                type: \"fail\",\r\n                url: href\r\n              }]);\r\n            }\r\n          } else {\r\n            let data = isHtml ? await response.text() : await response.blob(),\r\n              url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n                type: \"text/html\"\r\n              }) : data),\r\n              a = document.createElement(\"a\"),\r\n              cd = response.headers.get(\"Content-Disposition\"),\r\n              m = cd == null ? void 0 : cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n            a.style.display = \"none\";\r\n            a.href = url;\r\n            if (m) a.download = m[3] || m[4];\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              url: href,\r\n              objectUrl: url\r\n            }]);\r\n            URL.revokeObjectURL(url);\r\n            swal.close();\r\n          }\r\n        }).catch(error => {\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            url: href\r\n          }]);\r\n        }).finally(() => {\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            url: href\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Lazy load images\r\n  function lazyLoad(e) {\r\n    var _e$target5;\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = (_e$target5 = e == null ? void 0 : e.target) != null ? _e$target5 : document;\r\n    el.querySelectorAll(\"img.ew-lazy\").forEach((img, i) => {\r\n      if (ew.LAZY_LOAD_DELAY > 0) setTimeout(() => img.src = img.dataset.src, i * ew.LAZY_LOAD_DELAY);else img.src = img.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  }\r\n\r\n  // Update select2 dropdown position\r\n  function updateDropdownPosition() {\r\n    var select = $$1(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  }\r\n\r\n  // Colorboxes\r\n  function initLightboxes(e) {\r\n    var _e$target6;\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = (_e$target6 = e == null ? void 0 : e.target) != null ? _e$target6 : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $$1(el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $$1(this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  }\r\n\r\n  // PDFObjects\r\n  function initPdfObjects(e) {\r\n    var _e$target7;\r\n    if (!ew.EMBED_PDF) return;\r\n    let el = (_e$target7 = e == null ? void 0 : e.target) != null ? _e$target7 : document,\r\n      options = Object.assign({}, ew.PDFObjectOptions);\r\n    $$1(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      let $this = $$1(this),\r\n        url = $this.data(\"url\"),\r\n        html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  }\r\n\r\n  // Tooltips and popovers\r\n  function initTooltips(e) {\r\n    var _e$target8;\r\n    let el = (_e$target8 = e == null ? void 0 : e.target) != null ? _e$target8 : document,\r\n      $el = $$1(el);\r\n    $el.find(\"input[data-bs-toggle=tooltip], textarea[data-bs-toggle=tooltip], select[data-bs-toggle=tooltip]\").each(function () {\r\n      let $this = $$1(this);\r\n      $this.tooltip({\r\n        ...ew.tooltipOptions,\r\n        html: true,\r\n        ...$this.data()\r\n      });\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Set up tooltip links as popovers\r\n    $el.find(\".ew-tooltip\").tooltip(ew.tooltipOptions);\r\n    $el.find(\".ew-popover\").popover(ew.popoverOptions);\r\n    $el.find(\".ew-tippy[data-title]\").each(function () {\r\n      tippy(this, {\r\n        content: this.dataset.title,\r\n        ...ew.tippyOptions\r\n      });\r\n    });\r\n  }\r\n\r\n  // Parse JSON\r\n  function parseJson(data) {\r\n    if ($$1.isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n    return data;\r\n  }\r\n\r\n  // Change search operator\r\n  function searchOperatorChange(el) {\r\n    let $el = $$1(el),\r\n      $p = $el.closest(\"[id^=r_], [id^=xs_]\"),\r\n      parm = el.id.substring(2),\r\n      $fld = $p.find(\".ew-search-field\"),\r\n      $fld2 = $p.find(\".ew-search-field2\"),\r\n      $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n      hasY = $y.length,\r\n      $cond = $p.find(\".ew-search-cond\"),\r\n      hasCond = $cond.length,\r\n      // Has condition and operator 2\r\n      $and = $p.find(\".ew-search-and\"),\r\n      $opr = $p.find(\".ew-search-operator\"),\r\n      opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n      $opr2 = $p.find(\".ew-search-operator2\"),\r\n      opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n      isBetween = opr.includes(\"BETWEEN\"),\r\n      // Can only be operator 1\r\n      isEmptyOpr = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr),\r\n      isEmptyOpr2 = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr2),\r\n      hideOpr2 = !hasY || isBetween,\r\n      hideX = isEmptyOpr,\r\n      hideY = !isBetween && (!hasCond || isEmptyOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  }\r\n\r\n  // Init forms\r\n  function initForms(e) {\r\n    var _e$target9;\r\n    let el = (_e$target9 = e == null ? void 0 : e.target) != null ? _e$target9 : document,\r\n      ids = ew.forms.ids();\r\n    for (let id of ids) {\r\n      if (el.matches != null && el.matches(\"#\" + id) || el.querySelector(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  }\r\n\r\n  // Is function\r\n  function isFunction$2(x) {\r\n    return typeof x === \"function\";\r\n  }\r\n\r\n  /**\r\n   * Alert (OK button only)\r\n   *\r\n   * @param {string|Object} msg - Message or config\r\n   * @param {callback} [cb] - Callback function\r\n   * @param {string} [type] - CSS class (see https://getbootstrap.com/docs/5.3/utilities/colors/)\r\n   * @returns {Promise}\r\n   */\r\n  function _alert(msg, cb, type) {\r\n    let config = $$1.isObject(msg) ? msg : {};\r\n    msg = $$1.isString(msg) ? msg : \"\";\r\n    type = $$1.isString(cb) ? cb : type;\r\n    config = $$1.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: msg,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      customClass: {\r\n        htmlContainer: \"ew-swal2-html-container text-\" + (type || \"danger\")\r\n      }\r\n    }, config);\r\n    let args = {\r\n      config,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"alert\", [args]);\r\n    if (args.show) return Swal.fire(args.config).then(result => isFunction$2(cb) ? cb(result.isConfirmed) : result);\r\n  }\r\n\r\n  /**\r\n   * Prompt/Confirm/Alert\r\n   *\r\n   * @param {string|Object} cfg - Message or config object\r\n   * @param {callback} [cb] - Callback function\r\n   * @returns {Promise}\r\n   */\r\n  function _prompt(cfg, cb) {\r\n    var _config, _config$inputValidato;\r\n    let config = $$1.isObject(cfg) ? cfg : {};\r\n    config = $$1.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: $$1.isString(cfg) ? cfg : \"\",\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n    }, config); // Confirm/Alert\r\n    if (config.input)\r\n      // Prompt\r\n      (_config$inputValidato = (_config = config).inputValidator) != null ? _config$inputValidato : _config.inputValidator = value => {\r\n        if (!value) return ew.language.phrase(\"EnterValue\");\r\n      };\r\n    return Swal.fire(config).then(result => isFunction$2(cb) ? cb(result.value) : result);\r\n  }\r\n\r\n  // Toast\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n      $container = $$1(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} message - Message\r\n   * @param {string} type - CSS class: \"primary|secondary|success|info|warning|danger|light|dark\"\r\n   * @param {string} title - Title\r\n   */\r\n  function showToast(message, type, title) {\r\n    if (!message) return;\r\n    type || (type = \"danger\");\r\n    title || (title = ew.language.phrase(type));\r\n    let args = {\r\n      message,\r\n      type,\r\n      title,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"toast\", [args]);\r\n    if (!args.show) return;\r\n    ({\r\n      message,\r\n      type,\r\n      title\r\n    } = args);\r\n    return toast({\r\n      class: \"ew-toast text-bg-\" + type,\r\n      title,\r\n      body: message,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  }\r\n\r\n  // Get form.ew-form or div.ew-form HTML element\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $$1(el),\r\n      $f = $el.closest(\".ew-form\");\r\n    if (!$f[0])\r\n      // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid, .modal\").find(\".ew-form\");\r\n    return $f[0];\r\n  }\r\n\r\n  // Check form data\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=\" + ew.TABLE_BASIC_SEARCH + \"]\",\r\n      els = $$1(form).find(selector).filter(\":enabled\").get();\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($$1(el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$$1(el).val()) return true;\r\n      } else if ([\"text\", \"textarea\", \"password\", \"search\", \"color\", \"date\", \"datetime-local\", \"datetime\", \"email\", \"hidden\", \"month\", \"number\", \"range\", \"tel\", \"time\", \"url\", \"week\"].includes(el.type)) {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set search type\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns false\r\n   */\r\n  function setSearchType(el) {\r\n    var val = el.dataset.searchType,\r\n      phraseId = \"Auto\";\r\n    if (val == \"=\") phraseId = \"Exact\";else if (val == \"AND\") phraseId = \"All\";else if (val == \"OR\") phraseId = \"Any\";\r\n    el.closest(\".ew-basic-search\").querySelector(\"input.ew-basic-search-type\").value = val || \"\";\r\n    el.closest(\".dropdown-menu\").querySelectorAll(\".dropdown-item\").forEach(item => item.classList.remove(\"active\"));\r\n    el.closest(\".dropdown-item\").classList.add(\"active\");\r\n    var searchType = el.closest(\".input-group\").querySelector(\"#searchtype\"),\r\n      text = ew.language.phrase(\"QuickSearch\" + phraseId + \"Short\");\r\n    searchType.innerHTML = text;\r\n    searchType.classList.toggle(\"me-2\", !!text);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @this {Form|HTMLElement} Form or parent element\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var _obj, _batch$send;\r\n    var f = this.$element ? this.$element[0] : this.form || ((_obj = obj) == null ? void 0 : _obj.form); // Get form/div element from this/obj\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n    if (!frm) return;\r\n    if (this.form && $$1.isUndefined(obj))\r\n      // Target unspecified => update child fields\r\n      obj = forms.get(this).getList(this).childFields.slice(); // Clone\r\n    else if ($$1.isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n      batch = new Batch();\r\n    if (Array.isArray(obj) && $$1.isString(obj[0])) {\r\n      // Array of id\r\n      var els = [];\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n        var el = getElements(obj[i], f),\r\n          names = [];\r\n        if (isTextbox(el) || isFilter(el))\r\n          // Search text box or filter\r\n          continue;\r\n        els.push(el);\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblVar fldVar\" and multiple inputs\r\n          var $el = $$1(el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                typ = $elf.attr(\"type\"),\r\n                elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              batch.add(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          batch.add(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n      obj = els;\r\n      var list = forms.get(self).getList(self);\r\n      if (Array.isArray(list == null ? void 0 : list.autoFillTargetFields) && list.autoFillTargetFields[0])\r\n        // AutoFill\r\n        batch.add(autoFill.bind(null, self));\r\n    } else {\r\n      if (isTextbox(obj) || isFilter(obj))\r\n        // Search text box or filter\r\n        return;\r\n      batch.add(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n    return (_batch$send = batch.send({\r\n      url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n    })) == null ? void 0 : _batch$send.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n      args = Array.from(arguments),\r\n      ar = getOptionValues(obj),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      prefix = m ? m[1] : \"\",\r\n      rowindex = m ? m[2] : \"\",\r\n      arp = [],\r\n      list = frmo.getList(obj),\r\n      $obj = $$1(obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\"))\r\n      // Skip data-hidden field, e.g. detail key\r\n      return;\r\n    if ($$1.isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($$1.isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) arp.push(getOptionValues(parentId[i], fo));\r\n      }\r\n    }\r\n    if (!isAutoSuggest(obj))\r\n      // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n    var addOpt = function (results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        let args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      obj.render == null ? void 0 : obj.render(); // Selection list\r\n      selectOption(obj, ar, change);\r\n      if (change) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\");\r\n        // else\r\n        //     $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n\r\n    if ($$1.isUndefined(async))\r\n      // Async not specified, use default\r\n      async = list.ajax;\r\n    var _updateSibling = function () {\r\n      // Update the y_* element\r\n      if (/(srch|search|summary|crosstab)$/.test(fo.id) && prefix == \"x\" && !rowindex) {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n\r\n    if (!$$1.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n      _updateSibling();\r\n      $obj.first().trigger(\"updated\", [{\r\n        target: obj\r\n      }]); // Object \"updated\" event fired after the object is updated\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n        data = Object.assign({\r\n          page: list.page,\r\n          field: list.field,\r\n          ajax: \"updateoption\",\r\n          language: ew.LANGUAGE_ID,\r\n          name: name // Name of the target element\r\n        }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n      if (isAutoSuggest(obj) && self.htmlForm)\r\n        // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && !obj.list && !isNativeSelectOne(obj) ||\r\n      // Not <selection-list> or native <select>\r\n      isModalLookup(obj))\r\n        // Lookup\r\n        data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++)\r\n      // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      obj.showLoading == null ? void 0 : obj.showLoading(); // selection-list\r\n      return $$1.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        method: \"POST\",\r\n        dataType: \"json\",\r\n        data: data,\r\n        async: async,\r\n        processData: false,\r\n        success: result => {\r\n          let error = getError(result);\r\n          if (error) {\r\n            _alert(error);\r\n            return;\r\n          }\r\n          let ds = result.records || [];\r\n          addOpt(ds);\r\n          _updateSibling();\r\n          $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n            target: obj\r\n          })]); // Object \"updated\" event fired after the object is updated\r\n          return ds;\r\n        },\r\n        error: (jqXHR, textStatus, errorThrown) => _alert(errorThrown),\r\n        complete: () => $obj.data(\"updating\", false)\r\n      });\r\n    }\r\n  }\r\n\r\n  // Get user parameters from id\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n      o = {};\r\n    var root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $$1(root).find(id) : $$1(id);\r\n    var val = $els.val();\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n    return o;\r\n  }\r\n\r\n  // Get query builder filter input HTML\r\n  function getQueryBuilderFilterInput() {\r\n    return function (rule, name) {\r\n      var _document$getElementB, _span$innerHTML$repla;\r\n      let tblVar = this.status.id.replace(/_query_builder$/, \"\"),\r\n        // \"this\" is QueryBuilder\r\n        fldVar = rule.filter.id,\r\n        tmplId = \"tpx_\" + tblVar + \"_\" + fldVar,\r\n        span = (_document$getElementB = document.getElementById(tmplId)) == null || (_document$getElementB = _document$getElementB.content) == null ? void 0 : _document$getElementB.cloneNode(true).querySelector(\".ew-search-field\"),\r\n        html = (_span$innerHTML$repla = span == null ? void 0 : span.innerHTML.replace(/\\binvalid-feedback\\b/, ew.queryBuilderErrorClass).replace(new RegExp(\"(data-field=\\\")?(\\\\b|_)x_\" + fldVar + \"(\\\\[\\\\]|\\\\b)\", \"g\"), ($0, $1, $2) => $1 ? $0 : $2 + name)) != null ? _span$innerHTML$repla : \"\"; // Keep \"data-field\" attribute\r\n      return \"<div class=\\\"d-inline-flex position-relative\\\">\" + html + \"</div>\";\r\n    };\r\n  }\r\n\r\n  // Get query builder value setter\r\n  function getQueryBuilderValueSetter() {\r\n    return function (rule, value) {\r\n      let input = rule.$el.find(\".rule-value-container\").find(\"select, selection-list, input[name^=sv_], input[data-field]\")[0],\r\n        values = Array.isArray(value) ? value : $$1.isValue(value) ? [value] : [];\r\n      if (input != null && input.matches(\"select, selection-list\")) {\r\n        // Selection list\r\n        let form = forms.get(input);\r\n        values.forEach(val => newOption(input, {\r\n          lf: val\r\n        }, form, true));\r\n        form.updateList(input, undefined, undefined, true); // Update immediately\r\n      } else {\r\n        ew.selectOption(input, values);\r\n      }\r\n      return null;\r\n    };\r\n  }\r\n\r\n  // Get query builder filter validation object\r\n  function getQueryBuilderFilterValidation(validators) {\r\n    return {\r\n      callback: function (value, rule) {\r\n        // value not used\r\n        let $value = rule.$el.find(\".rule-value-container\"),\r\n          errors = 0;\r\n        for (let i = 0; i < rule.operator.nb_inputs; i++) {\r\n          $value.find(\"[name='\" + rule.id + '_value_' + i + \"']\").each(function () {\r\n            let $this = $$1(this),\r\n              $invalid = $this.next(\".\" + ew.queryBuilderErrorClass).empty();\r\n            validators == null || validators.forEach == null ? void 0 : validators.forEach(validator => {\r\n              let err = validator(this);\r\n              if ($$1.isObject(err)) {\r\n                errors++;\r\n                $invalid.append(\"<span>\" + Object.values(err)[0] + \"</span>\");\r\n              }\r\n            });\r\n            if ($invalid.html()) $this.addClass(\"is-invalid\").one(\"click\", () => $this.removeClass(\"is-invalid\"));\r\n          });\r\n        }\r\n        return errors ? \"\" : true; // Return error as empty string (errors already set in $invalid)\r\n      }\r\n    };\r\n  }\r\n\r\n  // Apply client side template to a DIV\r\n  function applyTemplate(divId, tmplId, classId, exportType, tblVar, data, isModal) {\r\n    let args = {\r\n      data: data || {},\r\n      id: divId,\r\n      template: tmplId,\r\n      class: classId,\r\n      export: exportType,\r\n      enabled: true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n    if (args.enabled) {\r\n      var _parent$querySelector;\r\n      let parent = isModal ? document.querySelector(\"#ew-modal-dialog.show\") : document.body,\r\n        // Parent (Modal dialog or document)\r\n        template = parent == null || (_parent$querySelector = parent.querySelector(\"#\" + tmplId)) == null ? void 0 : _parent$querySelector.content;\r\n      if (!template) return;\r\n      template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n        let id = el.name || el.id,\r\n          subtmpl = parent.querySelector(\"#\" + id); // Find in parent in case Custom Template in modal dialog\r\n        if (subtmpl != null && subtmpl.content) {\r\n          if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n          el.replaceWith(subtmpl.content.cloneNode(true));\r\n        } else {\r\n          el.remove();\r\n        }\r\n      });\r\n      if ($$1.views) {\r\n        let textContent = template.textContent,\r\n          hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n        if (!hasTag) {\r\n          let selector = ew.jsRenderAttributes.map(attr => \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\").join(\",\");\r\n          hasTag = template.querySelector(selector);\r\n        }\r\n        if (hasTag) {\r\n          // Includes JsRender template\r\n          let scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n          scripts.forEach(item => item.remove());\r\n          let div = document.createElement(\"div\");\r\n          div.appendChild(template);\r\n          let html = div.innerHTML.replace(/{{([^}]+)}}/g, m => htmlDecode(m)),\r\n            // HTML-decode comparison operators\r\n            tmpl = $$1.templates(html);\r\n          parent.querySelector(\"#\" + divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n          scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n        } else {\r\n          parent.querySelector(\"#\" + divId).appendChild(template);\r\n        }\r\n      } else {\r\n        parent.querySelector(\"#\" + divId).appendChild(template);\r\n      }\r\n    }\r\n    if (exportType && exportType != \"print\")\r\n      // Export custom template with charts\r\n      exportCustom(divId, exportType, tblVar); // Note: Use classId as fileName\r\n  }\r\n\r\n  // Export custom\r\n  function exportCustom(divId, exportType, tblVar) {\r\n    var _div$children$;\r\n    let div = document.getElementById(divId);\r\n    if ((_div$children$ = div.children[0]) != null && _div$children$.matches(\"div[id^=ct_]\"))\r\n      // Custom template, remove first div tag\r\n      div = div.children[0];\r\n    let data = {\r\n      customexport: exportType,\r\n      data: div.innerHTML,\r\n      [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n      [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN,\r\n      ...getchartParams()\r\n    };\r\n    if (exportType == \"email\") exportEmail(tblVar, mergeSearchParams(currentUrl.searchParams, data)); // Merge data with email form data in current URL parameters\r\n    else fileDownload(getApiUrl([ew.API_EXPORT_ACTION, exportType, tblVar]), data);\r\n  }\r\n\r\n  // Toggle group\r\n  function toggleGroup(el) {\r\n    let $el = $$1(el),\r\n      $tr = $el.closest(\"tr\");\r\n    if (!$tr.data(\"group\")) {\r\n      // Toggle all\r\n      $tr.closest(\"table\").find(\"tbody\").find(\".ew-rpt-grp-field-1 > .ew-group-toggle\").each(function () {\r\n        toggleGroup(this);\r\n        $el.toggleClass(\"ew-rpt-grp-hide\");\r\n      });\r\n    } else {\r\n      let selector = \"tr\",\r\n        level;\r\n      for (let i = 1; i <= 6; i++) {\r\n        let idx = i == 1 ? \"\" : \"-\" + i,\r\n          data = $tr.data(\"group\" + idx);\r\n        if ($$1.isValue(data)) {\r\n          level = i;\r\n          if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n        }\r\n      }\r\n      if ($el.hasClass(\"ew-rpt-grp-hide\")) {\r\n        // Show\r\n        $$1(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.removeClass(\"ew-rpt-grp-hide\");\r\n      } else {\r\n        // Hide\r\n        $$1(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n        $el.addClass(\"ew-rpt-grp-hide\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if boolean value is true\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(String(value).toLowerCase());\r\n  }\r\n\r\n  // Check if element value changed\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    let el = getElement(\"x\" + infix + \"_\" + fld, fobj),\r\n      oldEl = getElement(\"o\" + infix + \"_\" + fld, fobj),\r\n      // Hidden element\r\n      fnEl = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n    if ((el == null ? void 0 : el.type) == \"hidden\" && !oldEl)\r\n      // For example, detail key\r\n      return false;\r\n    if (!oldEl && (!el || Array.isArray(el) && el.length == 0)) return false;\r\n    if (oldEl && el) {\r\n      if (bool) {\r\n        if (convertToBool(getOptionValue(oldEl)) === convertToBool(getOptionValue(el))) return false;\r\n      } else {\r\n        let oldValue = getOptionValue(oldEl),\r\n          newValue = fnEl ? getOptionValue(fnEl) : getOptionValue(el);\r\n        if (oldValue == newValue) return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Set language\r\n  function setLanguage(el) {\r\n    let val = el.value || el.dataset.language;\r\n    if (!val) return false;\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n\r\n  // Set active user\r\n  function setActiveUser(el) {\r\n    let val = el.checked ? \"1\" : \"0\";\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"activeuser\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {MouseEvent} e - Mouse event\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element) (for backward compatibility only)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page) (for backward compatibility only)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string|Object} args.msg - Message or Swal config\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST by HTML form, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n  function submitAction(e, args) {\r\n    var _window$msg;\r\n    let el = e.currentTarget,\r\n      f = args.f || el.form || el.closest(\"form\"),\r\n      $f = $$1(f),\r\n      key = args.key,\r\n      action = args.action,\r\n      url = args.url || currentPage(),\r\n      msg = args.msg,\r\n      data = args.data,\r\n      success = args.success,\r\n      isPostBack = !args.method || sameText(args.method[0], \"p\"),\r\n      isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n    if ((isMultiple || isPostBack) && !f) {\r\n      _alert(ew.language.phrase(\"NoHtmlForm\"));\r\n      return false;\r\n    }\r\n    if (isMultiple && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let _success = function (result) {\r\n      if ($$1.isString(result)) {\r\n        showMessage(result);\r\n      } else if ($$1.isObject(result)) {\r\n        // JSON\r\n        let error = getError(result);\r\n        if (error) _alert(error);else if ($$1.isString(result.successMessage)) _alert(result.successMessage, \"success\");\r\n        if (result.disabled) el.disabled = true;\r\n      }\r\n    };\r\n    let _append = function (name, value) {\r\n      let $input = $f.find(\"input[type=hidden][name='\" + name + \"']\");\r\n      if ($input[0])\r\n        // Hidden tag exists\r\n        $input.val(value); // Set value\r\n      else\r\n        // Hidden tag does not exist, add one\r\n        $$1(\"<input>\").attr({\r\n          type: \"hidden\",\r\n          name,\r\n          value\r\n        }).appendTo($f);\r\n    };\r\n    let _submit = function (value) {\r\n      if (isPostBack && f) {\r\n        // Post back by form\r\n        if (action) {\r\n          // Action\r\n          _append(\"action\", action); // Set action\r\n        }\r\n\r\n        if (!$$1.isUndefined(value)) _append(\"actionvalue\", value); // Set action value\r\n        if ($$1.isObject(data)) {\r\n          // User data\r\n          for (const [name, value] of Object.entries(data)) _append(name, value);\r\n        }\r\n        if (!isMultiple && $$1.isObject(key)) {\r\n          // Key\r\n          for (const [name, value] of Object.entries(key)) _append(name, value);\r\n        }\r\n        if (parseUrl(url).pathname != currentUrl.pathname)\r\n          // Do not use refresh if post to another page\r\n          $f.off(\"submit.ew\");\r\n        $f.prop({\r\n          action: url,\r\n          method: \"post\"\r\n        }).trigger(\"submit\");\r\n      } else {\r\n        // Ajax\r\n        data = new URLSearchParams(data); // User data\r\n        if (action) {\r\n          // Action\r\n          data.set(\"action\", action);\r\n          data.set(\"ajax\", action);\r\n          $f.find(\"#action\").remove(); // Remove action in form\r\n        }\r\n\r\n        if (!$$1.isUndefined(value)) data.set(\"actionvalue\", value); // User input value\r\n        data = mergeSearchParams(data, $f.serialize()); // Form data including key_m[]\r\n        if (!isMultiple && $$1.isObject(key))\r\n          // Key\r\n          data = mergeSearchParams(data, key);\r\n        if (success && $$1.isString(success)) success = window[success];\r\n        let settings = $$1.isObject(success) ? success : {};\r\n        settings.data = data.toString();\r\n        settings.method || (settings.method = \"POST\");\r\n        settings.success || (settings.success = isFunction$2(success) ? success : _success);\r\n        $$1.ajax(url, settings);\r\n      }\r\n    };\r\n    msg = $$1.isString(msg) ? (_window$msg = window[msg]) != null ? _window$msg : msg : msg; // Get config object if available\r\n    msg ? _prompt(msg).then(result => result.isDismissed || _submit(result.value)) : _submit();\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get charts parameters as object\r\n   *\r\n   * @returns string\r\n   */\r\n  function getchartParams() {\r\n    let charts = Array.from(Object.entries(window.exportCharts)).map(_ref => {\r\n      let [id, chart] = _ref;\r\n      return {\r\n        chartEngine: \"Chart.js\",\r\n        streamType: \"base64\",\r\n        stream: chart.toBase64Image(),\r\n        fileName: id + \".png\"\r\n      };\r\n    });\r\n    return charts.length ? {\r\n      charts: JSON.stringify(charts)\r\n    } : null;\r\n  }\r\n\r\n  /**\r\n   * Export with charts, selected records and/or Custom Template (non-API)\r\n   *\r\n   * @param {MouseEvent|HTMLFormElement} args.evt - Event or HTML form\r\n   * @param {string} args.url - Form action\r\n   * @param {string} args.export - Export type\r\n   * @param {boolean} args.custom - Use Custom Template\r\n   * @param {boolean} args.exportSelected - Selected records only\r\n   * @param {HTMLFormElement} args.emailForm - email form object\r\n   * @returns false\r\n   */\r\n  async function _export(args) {\r\n    let {\r\n        evt,\r\n        url,\r\n        export: type,\r\n        custom,\r\n        exportSelected,\r\n        emailForm\r\n      } = args,\r\n      f = evt.currentTarget.form;\r\n    exportSelected && (exportSelected = f && !!f.querySelector(\"input[type=checkbox][name='key_m[]']\"));\r\n    if (exportSelected && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = f ? $$1(f) : $$1('<form class=\"ew-export-form\" method=\"post\"></form>').appendTo($body),\r\n      target = $f.attr(\"target\"),\r\n      action = $f.attr(\"action\"),\r\n      postParams = [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]];\r\n\r\n    // Export data\r\n    try {\r\n      if (custom) {\r\n        var _document$querySelect;\r\n        // Use Custom Template (chart data to be retrieved later in iframe)\r\n        document.body.style.cursor = \"wait\";\r\n        let name = \"ew-export-frame\";\r\n        url = setSearchParams(url, {\r\n          export: type,\r\n          custom: 1\r\n        }, $$1(emailForm).serialize()); // Make sure parameters include \"export=type&custom=1\"\r\n        (_document$querySelect = document.querySelector(\"iframe[name='\" + name + \"']\")) == null ? void 0 : _document$querySelect.remove();\r\n        let $iframe = $$1(\"<iframe>\").attr(\"name\", name).addClass(\"d-none\").appendTo($body);\r\n        $f.attr({\r\n          action: url,\r\n          target: name\r\n        }); // Pass all data including email form data from URL to the iframe by URL parameters\r\n        postParams.forEach(_ref2 => {\r\n          let [name, value] = _ref2;\r\n          return $f.find(\"input[name=\\\"\" + name + \"\\\"]\").val(value)[0] || $$1(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name,\r\n            value\r\n          }).appendTo($f);\r\n        });\r\n        $iframe.one(\"load\", () => document.body.style.cursor = \"default\").one(\"load\", () => $f.attr({\r\n          action,\r\n          target\r\n        })); // Reset\r\n        $f.trigger(\"submit\");\r\n      } else {\r\n        // No Custom Template\r\n        url = setSearchParam(url, \"export\", type); // Make sure URL parameters include \"export=type\"\r\n        if (type == \"print\") $f.attr(\"action\", url).trigger(\"submit\"); // Submit the form directly\r\n        else fileDownload(url, mergeSearchParams($f.serialize(), getchartParams()));\r\n      }\r\n    } finally {\r\n      f || $f.remove();\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value - Value\r\n   * @returns {string}\r\n   */\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isHiddenTextArea(el) {\r\n    var $el = $$1(el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isModalLookup(el) {\r\n    var _el$dataset;\r\n    return el == null || (_el$dataset = el.dataset) == null ? void 0 : _el$dataset.modalLookup;\r\n  }\r\n\r\n  /**\r\n   * Check if filter\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isFilter(el) {\r\n    var _el$dataset2;\r\n    return el == null || (_el$dataset2 = el.dataset) == null ? void 0 : _el$dataset2.filter;\r\n  }\r\n\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n  function isAutoSuggest(el) {\r\n    var $el = $$1(el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n\r\n  /**\r\n   * Check if Select2\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isSelect2(el) {\r\n    return el == null || el.matches == null ? void 0 : el.matches(\"select.select2-hidden-accessible\");\r\n  }\r\n\r\n  /**\r\n   * Check if native selection list (select-one)\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isNativeSelectOne(el) {\r\n    return (el == null || el.matches == null ? void 0 : el.matches(\"select:not(.select2-hidden-accessible)\")) && el.type == \"select-one\";\r\n  }\r\n\r\n  /**\r\n   * Check if textbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isTextbox(el) {\r\n    return (el == null || el.matches == null ? void 0 : el.matches(\"input:not([type=checkbox]):not([type=radio])\")) && !isAutoSuggest(el);\r\n  }\r\n\r\n  /**\r\n   * Check if boolean checkbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n  function isBooleanCheckbox(el) {\r\n    return el == null || el.matches == null ? void 0 : el.matches(\"input[type=checkbox][data-boolean]\");\r\n  }\r\n\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   */\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n    $$1(el).closest(fieldContainerSelector).find(\".invalid-feedback\").html(\"\");\r\n  }\r\n\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   * @param {string} msg - Error message\r\n   * @param {boolean} focus - Set focus\r\n   */\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n    $$1(el).closest(fieldContainerSelector).find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm == null ? void 0 : frm.makeVisible(el);\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   * @param {Object} options - Focus options\r\n   */\r\n  function setFocus(obj, options) {\r\n    if (!obj) return;\r\n    var $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n    obj.focus(options);\r\n  }\r\n\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set valid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n  function setValid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $$1(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length)\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n      reset = () => $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      }\r\n    }\r\n  }\r\n\r\n  // Check if object has value\r\n  function hasValue(obj) {\r\n    return getOptionValue(obj) != \"\";\r\n  }\r\n\r\n  // Check if object value is a masked password\r\n  function isMaskedPassword(obj) {\r\n    var val = $$1(obj).val();\r\n    return val == null ? void 0 : val.match(/^\\*+$/);\r\n  }\r\n\r\n  // Sort by field\r\n  function sort(e, dataset) {\r\n    let {\r\n      sortUrl: url,\r\n      sortType: type,\r\n      context,\r\n      ajax\r\n    } = dataset;\r\n    if (e.shiftKey && !e.ctrlKey) url = setSearchParams(url, {\r\n      cmd: \"resetsort\"\r\n    });else if (type == 2 && e.ctrlKey) url = setSearchParams(url, {\r\n      ctrl: \"1\"\r\n    });\r\n    if (convertToBool(ajax)) refresh(fetch(setLayout(url, false)), context);else window.location = sanitizeUrl(url);\r\n    return false;\r\n  }\r\n\r\n  // Open table header filter by field\r\n  function filter(e) {\r\n    let data = e.currentTarget.dataset;\r\n    $$1(\"select[data-select2-id='f\" + data.table + \"srch_\" + data.field + \"']\").select2(\"open\");\r\n  }\r\n\r\n  /**\r\n   * Scroll an element into view\r\n   */\r\n  function scrollIntoView(el) {\r\n    el == null ? void 0 : el.scrollIntoView();\r\n  }\r\n\r\n  /**\r\n   * Inline actions\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {string} args.url - URL\r\n   * @param {string} args.ewAction - Inline/Grid action (inline/grid)\r\n   * @param {string} args.action - Inline/Grid action type (insert/cancel/update/add/edit/copy/delete)\r\n   * @returns false\r\n   */\r\n  async function inlineAction(args) {\r\n    var _args$evt;\r\n    let $el = $$1((_args$evt = args.evt) == null ? void 0 : _args$evt.currentTarget),\r\n      $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n    $el.tooltip(\"hide\");\r\n    if (!$grid[0] && $el.is(\".dropdown-item\")) {\r\n      let $btn = $$1(\"#\" + $el.closest(\".dropdown-menu\").attr(\"aria-labelledby\"));\r\n      if ($btn[0]) {\r\n        $el = $btn;\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n      }\r\n    }\r\n    if (!$el[0]) return;\r\n    let {\r\n        url,\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      $f = $grid.find(\"form\"),\r\n      f = $f[0],\r\n      $record = $el.closest(\"tr[data-rowindex], div[data-rowindex]\"),\r\n      key = $record.data(\"key\"),\r\n      curindex = $record.data(\"rowindex\"),\r\n      $detached;\r\n    if (action != \"add\" && (!$grid[0] || !f))\r\n      // Allow add with no records => no grid\r\n      return;\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      !o.status || showToast(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Success handler for delete\r\n    let _deleted = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (result != null && result.success) {\r\n          $record.remove();\r\n          showToast(ew.language.phrase(\"DeleteSuccess\"), \"success\");\r\n        } else {\r\n          showToast(getError(result) || ew.language.phrase(\"DeleteFailed\"));\r\n        }\r\n      } else {\r\n        _alert(await response.text());\r\n      }\r\n    };\r\n\r\n    // Disable inline buttons\r\n    let _disableInlineButtons = () => $$1(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").addClass(\"disabled\");\r\n\r\n    // Enable inline buttons\r\n    let _enableInlineButtons = () => $$1(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").removeClass(\"disabled\");\r\n\r\n    // Get table\r\n    let _getTable = () => $grid.find(\".ew-grid-middle-panel .ew-table\")[0];\r\n\r\n    // Update row index\r\n    let _updateRowIndexes = tbl => {\r\n      let j = 0;\r\n      Array.from(tbl.rows).forEach(row => row.dataset.rowindex = row.dataset.rowindex === \"0\" ? \"0\" : String(j++)); // Update row index if not Inline-Add/Copy row\r\n    };\r\n\r\n    // Success handler for inline actions\r\n    let _success = async function (response) {\r\n      if (!(response instanceof Response))\r\n        // Inline actions only\r\n        return;\r\n      let text = await response.clone().text(),\r\n        $data = $$1(\"<div>\" + text + \"</div>\"),\r\n        $row = $data.find(\"tr[data-rowindex=0], div[data-rowindex=0]\" + (key ? \", tr[data-key='\" + key + \"'], div[data-key='\" + key + \"']\" : \"\")).filter(\"[data-rowtype=2], [data-rowtype=3]\"),\r\n        // Find Inline-Add first\r\n        inline = $row.data(\"inline\"),\r\n        rowtype = $row.data(\"rowtype\"),\r\n        rowindex = inline && rowtype == 2 /* Inline-Add */ ? 0 : inline && rowtype == 3 /* Inline-Edit */ ? 1 : $row.data(\"rowindex\"),\r\n        $els = $row.add($data.find(\"script[data-rowindex=\" + rowindex + \"]\")); // Add script for the row\r\n      if ([\"add\", \"copy\", \"edit\"].includes(action) && !$els[0])\r\n        // Edit row not found => Error\r\n        return showToast(text);\r\n      if ([\"add\", \"copy\"].includes(action)) {\r\n        // Inline-Add/Copy\r\n        if (document.querySelector(\"main.ew-no-record\") && $data.find(\"main:not(.ew-no-record)\")[0]) {\r\n          // No existing record, new Inline-Add/Copy row found\r\n          await refresh(Promise.resolve(response));\r\n        } else {\r\n          if ($row.is(\"TR\")) {\r\n            // Table\r\n            let tbl = _getTable();\r\n            if (tbl.matches(\".ew-infinite-scroll-table\")) $$1(tbl.tBodies).last().append($els);else $$1(tbl.tBodies).last().prepend($els);\r\n            _updateRowIndexes(tbl); // Update row index\r\n            setupTable(tbl, true);\r\n          } else {\r\n            $grid.find(\".ew-multi-column-row\").append($els);\r\n          }\r\n          _disableInlineButtons();\r\n        }\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=2]\")[0]);\r\n      } else if (action == \"edit\") {\r\n        // Inline-Edit\r\n        $detached = $record.replaceWith($els); // Replace current row\r\n        $grid.data(\"detached\", $detached); // Save the detached row\r\n        if ($row.is(\"TR\"))\r\n          // Table\r\n          setupTable(_getTable(), true);\r\n        _disableInlineButtons();\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=3]\")[0]);\r\n      }\r\n    };\r\n\r\n    // Submit success handler for inline actions\r\n    let _submitSuccess = async function (response) {\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          error = getError(result);\r\n        if (error) {\r\n          showToast(error);\r\n          return;\r\n        }\r\n      }\r\n      if (response.headers.get(\"Infinite-Scroll\")) {\r\n        // Infinite scroll\r\n        let text = await response.text(),\r\n          $data = $$1(\"<div>\" + text + \"</div>\"),\r\n          $main = $data.find(\".main\"),\r\n          $row;\r\n        if ([\"insert\", \"update\"].includes(action)) {\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if (!$row[0]) return; // Affected row(s) not found\r\n          if (action == \"insert\")\r\n            // Inline-Add/Copy\r\n            $grid.find(\"tr[data-rowtype=\" + ew.ROWTYPE_ADD + \"], div[data-rowtype=\" + ew.ROWTYPE_ADD + \"]\").replaceWith($row[0]); // Replace add row\r\n          else if (action == \"update\")\r\n            // Inline-Edit/Update\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-key='\" + row.dataset.key + \"']\").replaceWith(row)); // Replace row(s) edited/updated\r\n        } else if ([\"add\", \"edit\", \"multiedit\"].includes(action)) {\r\n          // Grid-Add/Grid-Edit/Multi-Edit\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n          if ([\"edit\", \"multiedit\"].includes(action))\r\n            // Grid-Edit/Multi-Edit\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-rowtype='\" + row.dataset.key + \"']\").replaceWith(row));else if (action == \"add\")\r\n            // Grid-Add\r\n            $grid.find(\".ew-grid-middle-panel .ew-table > tbody:last\").append($row); // Append to bottom\r\n        }\r\n\r\n        let tbl = _getTable();\r\n        _updateRowIndexes(tbl); // Update row index\r\n        setupTable(tbl, true);\r\n        showMessage({\r\n          target: $data\r\n        }); // Show message, if any\r\n        ew.initPage($$1.Event({\r\n          type: \"load.ew\",\r\n          target: $main[0]\r\n        }));\r\n      } else {\r\n        // Use Ajax actions\r\n        await refresh(Promise.resolve(response));\r\n      }\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $grid.find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n    if (ewAction == \"inline\") {\r\n      if (action == \"cancel\") {\r\n        if (curindex == \"0\") {\r\n          // Cancel Inline-Add/Copy\r\n          $record.remove();\r\n        } else {\r\n          var _$grid$data;\r\n          // Cancel Inline-Edit\r\n          (_$grid$data = $grid.data(\"detached\")) == null ? void 0 : _$grid$data.replaceAll($record);\r\n        }\r\n        _enableInlineButtons();\r\n      } else if (f && [\"insert\", \"update\"].includes(action)) {\r\n        // Post form\r\n        let frm = forms.get(f.id);\r\n        if (await frm.canSubmit(args.evt)) {\r\n          // Validate\r\n          document.body.style.cursor = \"wait\";\r\n          let body = setSearchParams($f.serialize(), {\r\n              action\r\n            }),\r\n            // Set up action\r\n            p = _fetch(setSearchParams(url, {\r\n              rnd: random()\r\n            }), {\r\n              method: \"POST\",\r\n              body\r\n            }).catch(_fail).finally(() => {\r\n              frm.enableForm();\r\n              _always();\r\n            });\r\n          if (frm.submitWithFetch) {\r\n            let args = {\r\n                form: f,\r\n                result: p\r\n              },\r\n              evt = $$1.Event(\"aftersubmit\", {\r\n                originalEvent: args.evt\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          } else {\r\n            p.then(_submitSuccess).finally(_enableInlineButtons);\r\n          }\r\n        }\r\n      } else if (action == \"delete\") {\r\n        // Inline-Delete\r\n        if (!key) {\r\n          // No key from the clicked row => Multi-Delete\r\n          $record = $grid.find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"tr[data-rowindex], div[data-rowindex]\"); // Update $record\r\n          if (!$record[0]) {\r\n            _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n            return false;\r\n          }\r\n        }\r\n        _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n          if (result) {\r\n            document.body.style.cursor = \"wait\";\r\n            let method = key ? \"GET\" : \"POST\",\r\n              body = deleteSearchParam($f.serialize(), \"action\"),\r\n              frm = forms.get(f.id),\r\n              p = _fetch(setSearchParams(url, {\r\n                action: \"delete\",\r\n                rnd: random()\r\n              }), {\r\n                method,\r\n                body\r\n              }).catch(_fail).finally(() => {\r\n                frm.enableForm();\r\n                _always();\r\n              });\r\n            if (frm.submitWithFetch) {\r\n              let args = {\r\n                  form: f,\r\n                  result: p\r\n                },\r\n                evt = $$1.Event(\"aftersubmit\", {\r\n                  originalEvent: args.evt\r\n                });\r\n              frm.trigger(evt, [args]);\r\n            } else {\r\n              p.then(_deleted);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        document.body.style.cursor = \"wait\";\r\n        _fetch(setSearchParams(url, {\r\n          rnd: random()\r\n        })).then(_success).catch(_fail).finally(_always);\r\n      }\r\n    } else if (ewAction == \"grid\" || ewAction == \"modal\") {\r\n      // Grid-Add/Edit, Modal-Add/Copy/Edit/Update\r\n      if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n        // Grid-Edit and Multi-Edit/Update\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n        return false;\r\n      }\r\n      ew.modalDialogShow({\r\n        ...args,\r\n        callback: _submitSuccess\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Confirm inline-delete\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n    _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n      if (result) {\r\n        if (el.dataset.json && el.href)\r\n          // Handle JSON response\r\n          ew.modalDialogShow({\r\n            url: setSearchParams(el.href, {\r\n              action: \"delete\"\r\n            }),\r\n            lnk: el,\r\n            json: true,\r\n            callback: true\r\n          });else if (el.href) window.location = sanitizeUrl(setSearchParams(el.href, {\r\n          action: \"delete\"\r\n        }));else clearDelete(el);\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  // Check if any key selected // PHP\r\n  function keySelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name='key_m[]']:checked\"));\r\n  }\r\n\r\n  // Select all keys\r\n  function selectAllKeys(cb) {\r\n    selectAll(cb);\r\n    let tbl = cb == null ? void 0 : cb.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    $$1(tbl.tBodies).each(function () {\r\n      $$1(this.rows).each(function () {\r\n        let $r = $$1(this);\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) $r.toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n      });\r\n    });\r\n  }\r\n\r\n  // Select all related checkboxes in the form\r\n  function selectAll(cb) {\r\n    if (!(cb != null && cb.form)) return;\r\n    $$1(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  }\r\n\r\n  // Update selected checkbox\r\n  function updateSelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name^=u_]:checked,input[type=hidden][name^=u_][value='1']\"));\r\n  }\r\n\r\n  // Clear selected rows color\r\n  function clearSelected(tbl) {\r\n    let rowIndexes = $$1(tbl).find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"[data-rowindex]\").map((i, r) => r.dataset.rowindex).get();\r\n    $$1(tbl == null ? void 0 : tbl.rows).filter((i, r) => r.classList.contains(\"table-active\") && !rowIndexes.includes(r.dataset.rowindex)).removeClass(\"table-active ew-table-selected-row\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Clear all row delete status\r\n  function clearDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    let $tr = $$1(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().removeClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Click single delete link\r\n  function clickDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $$1(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().addClass(\"table-active\").triggerHandler(\"change\");\r\n  }\r\n\r\n  // Select a row\r\n  function selectKey(e) {\r\n    let chk = e.target,\r\n      tbl = chk == null ? void 0 : chk.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $$1(chk).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function () {\r\n      $$1(this).toggleClass(\"table-active ew-table-selected-row\", chk.checked).triggerHandler(\"change\");\r\n    });\r\n    e.stopPropagation();\r\n  }\r\n\r\n  /**\r\n   * Setup table\r\n   *\r\n   * @param {number} [index=undefined] Index\r\n   * @param {HTMLTableElement} tbl HTML table element\r\n   * @param {boolean} [force=undefined] Force setup\r\n   * @returns\r\n   */\r\n  function setupTable() {\r\n    let tbl, force;\r\n    if ($$1.isNumber(arguments[0])) {\r\n      tbl = arguments[1];\r\n    } else if (arguments[0] instanceof HTMLTableElement) {\r\n      tbl = arguments[0];\r\n      force = arguments[1];\r\n    }\r\n    let $tbl = $$1(tbl),\r\n      $rows = $$1(tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && tbl.dataset.isset || tbl.tBodies.length == 0) return;\r\n    // Set selected row color\r\n    let click = function (e) {\r\n      let $this = $$1(this),\r\n        tbl = this.closest(\".ew-table\"),\r\n        $target = $$1(e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-btn\") || $target.is(\":input\")) return;\r\n      clearSelected(tbl); // Clear all other selected rows\r\n      $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().toggleClass(\"table-active\").triggerHandler(\"change\");\r\n    };\r\n    let n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1,\r\n      // Alternate color every n rows\r\n      rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n        $$1(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n      }).get();\r\n    if (rows.length >= n) {\r\n      let div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n      rows[rows.length - 1].classList.add(\"border-bottom-0\"); // Last row\r\n      rows.splice(n * -1).forEach((row, i) => Array.from(row.cells).filter(cell => cell.rowSpan == i + 1) // Cell of last row\r\n      .forEach(cell => {\r\n        cell.classList.add(\"ew-table-last-row\");\r\n        cell.classList.toggle(\"ew-table-border-bottom\", (div == null ? void 0 : div.clientHeight) > tbl.offsetHeight);\r\n      }));\r\n    }\r\n    let form = tbl.closest(\"form\"),\r\n      attach = form && $$1(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $$1(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function () {\r\n      let $r = $$1(this);\r\n      if (attach && !$r.data(\"isset\")) $r.on(\"click\", click).data(\"isset\", true);\r\n    });\r\n    setupGrid(tbl.closest(\".ew-grid\"), force);\r\n    tbl.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Setup grid\r\n  function setupGrid(grid, force) {\r\n    let $grid = $$1(grid);\r\n    if (!grid || !force && grid.dataset.isset) return;\r\n    let rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    if (rowcnt == 0 && !grid.querySelector(\".ew-grid-upper-panel, .ew-grid-lower-panel\")) $grid.hide();\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $$1(\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n    }\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\") && (!grid.querySelector(\".ew-grid-upper-panel\") || $grid.find(\".ew-grid-upper-panel:hidden\")[0])) {\r\n      let $panel = $grid.find(\".ew-grid-middle-panel:not(.overflow-y-auto):visible\").addClass(\"rounded-top\"),\r\n        $cells = $panel.children(\".ew-table:not(.table-head-fixed):visible\").first().children(\"thead:visible\").first().children(\"tr:visible\").first().children(\"th:visible\");\r\n      $cells.first().addClass(\"rounded-top-left\");\r\n      $cells.last().addClass(\"rounded-top-right\");\r\n    }\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\") && (!grid.querySelector(\".ew-grid-lower-panel\") || $grid.find(\".ew-grid-lower-panel:hidden\")[0])) {\r\n      let $panel = $grid.find(\".ew-grid-middle-panel:not(.overflow-y-auto):visible\").addClass(\"rounded-bottom\"),\r\n        $cells = $panel.children(\".ew-table:not(.table-head-fixed):visible\").last().children(\"tbody:visible\").last().children(\"tr:visible\").last().children(\"td:visible\");\r\n      $cells.first().addClass(\"rounded-bottom-left\");\r\n      $cells.last().addClass(\"rounded-bottom-right\");\r\n    }\r\n    grid.dataset.isset = \"true\";\r\n  }\r\n\r\n  // Add a row to grid\r\n  function addGridRow(el) {\r\n    var _bootstrap$Tooltip$ge2;\r\n    let grid = el == null ? void 0 : el.closest(\".ew-grid\"),\r\n      $grid = $$1(grid),\r\n      $tbl = $grid.find(\"table.ew-table\").last(),\r\n      $p = $tbl.parent(\"div\"),\r\n      $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !grid || !$tbl[0] || !$tpl[0]) return false;\r\n    let $lastrow = $$1($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    let $row = $tpl.clone(true, true).removeClass(\"ew-template\"),\r\n      form = grid.querySelector(\"div.ew-form[id^=f][id$=grid]\") || grid.querySelector(\"form.ew-form[id^=f][id$=list]\") || grid.querySelector(\"form.ew-form[id^=f][id$=grid]\"),\r\n      $form = $$1(form),\r\n      suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      $keycnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix),\r\n      keycnt = parseInt($keycnt.val(), 10) + 1,\r\n      name = ew.FORM_ROW_ACTION_NAME.replace(/^k_/, \"k\" + keycnt + \"_\") + suffix,\r\n      // name=\"k<n>_action\"\r\n      $els = $tpl.find(\"script:contains('$rowindex$')\").add(\"tr.ew-template + script[data-rowindex='$rowindex$']\"); // Get scripts with rowindex\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    $row.children(\"td\").each(function () {\r\n      $$1(this).find(\"*\").each(function () {\r\n        $$1.each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n\r\n    let $btn = $row.find(\".ew-icon\").closest(\"a, button\");\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance($btn[0])) == null ? void 0 : _bootstrap$Tooltip$ge2.dispose();\r\n    $btn.tooltip({\r\n      ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: \"hover\"\r\n    });\r\n    $keycnt.val(keycnt).after($$1(\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: name,\r\n      name: name,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.get().forEach(el => addScript(el.text.replace(/\\$rowindex\\$/g, keycnt)));\r\n    let frm = $form.data(\"form\");\r\n    frm == null ? void 0 : frm.initEditors();\r\n    frm == null ? void 0 : frm.initUpload();\r\n    setupTable($tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    $tbl.trigger(\"rowadded\", [keycnt]);\r\n    return false;\r\n  }\r\n\r\n  // Delete a row from grid\r\n  function deleteGridRow(el, infix) {\r\n    var _bootstrap$Tooltip$ge3;\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge3.dispose();\r\n    let grid = el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n      row = el.closest(\"tr, div[data-rowindex]\"),\r\n      tbl = row == null ? void 0 : row.closest(\".ew-table\"),\r\n      rowidx = parseInt(row == null ? void 0 : row.dataset.rowindex, 10),\r\n      form = (grid == null ? void 0 : grid.querySelector(\"div.ew-form[id^=f][id$=grid]\")) || (grid == null ? void 0 : grid.querySelector(\"form.ew-form[id^=f][id$=list], form.ew-form[id^=f][id$=grid]\")),\r\n      $form = $$1(form),\r\n      frm = $form.data(\"form\");\r\n    if (!el || !grid || !row || !tbl || !form || !frm) return false;\r\n    let suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n      keycnt = \"#\" + ew.FORM_KEY_COUNT_NAME + suffix;\r\n    let _delete = function () {\r\n      row.remove();\r\n      if (grid.classList.contains(\".ew-grid\")) setupTable(tbl, true);\r\n      if (rowidx > 0) {\r\n        let $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycnt).after($$1(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n      $$1(tbl).trigger(\"rowdeleted\", [rowidx]);\r\n    };\r\n    if (isFunction$2(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // HTML encode text\r\n  function htmlEncode(text) {\r\n    return String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  }\r\n\r\n  // HTML decode text\r\n  function htmlDecode(text) {\r\n    return String(text).replace(/&amp;/g, '&').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n  }\r\n\r\n  // Get form element(s) as single element or array of radio/checkbox\r\n  function getElements(el, root) {\r\n    root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let $root = root ? $$1(root) : $document$1,\r\n      selectors = [],\r\n      getFieldSelector = field => \"[data-field='\" + field + \"']:not(.ew-custom-option):not([name^=y_]):not([data-old])\";\r\n    if (el instanceof HTMLElement && el.dataset.table && el.dataset.field) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      if (isBooleanCheckbox(el)) return el;\r\n      selectors = [\"[data-table='\" + el.dataset.table + \"']\" + getFieldSelector(el.dataset.field)];\r\n    } else if ($$1.isString(el)) {\r\n      let [s1, s2] = el.split(\" \"); // Check if \"<table> <name>\"\r\n      selectors = s2 ? [\"[data-table='\" + s1 + \"']\" + getFieldSelector(getId(s2))] // \"<table> <name>\", remove []\r\n      : [\"[name='\" + el + \"']:not(.ew-custom-option):not([data-old])\", getFieldSelector(getId(el))]; // \"<name>\" only\r\n    }\r\n\r\n    let selector = [\"input\", \"select\", \"textarea\", \"button\", \"selection-list\"].flatMap(tag => selectors.map(sel => tag + sel)).join(),\r\n      $els = $root.find(selector);\r\n    if ($root.is(\"form.ew-form\") && $root.find(\"div.ew-form\")[0])\r\n      // Master/Detail form\r\n      $els = $els.not(\"div.ew-form *\"); // Remove elements of detail tables\r\n    if ($els.length == 1 && ($els.is(\":not([type=checkbox]):not([type=radio])\") || isBooleanCheckbox($els[0])) || $els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\"))\r\n      // Polyfill for the ElementInternals\r\n      return $els[0];\r\n    return $els[0] ? $els.get() : null;\r\n  }\r\n\r\n  // Get first element by id/name (not necessarily form element)\r\n  function getElement(name, root) {\r\n    root = !$$1.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $$1(root).find(selector)[0] : $$1(selector).first()[0];\r\n  }\r\n\r\n  // Get ancestor by function\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      var _node;\r\n      if (((_node = node) == null ? void 0 : _node.nodeType) == 1 && (!fn || fn(node))) return node;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // Check if an element is hidden\r\n  function isHidden(el) {\r\n    var $el = $$1(el);\r\n    return $el.css(\"display\") == \"none\" && !$el.is(\"selection-list\") && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, node => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n  }\r\n\r\n  // Check if same text\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  }\r\n\r\n  // Check if same string\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  }\r\n\r\n  // Convert to header case\r\n  function headerCase(str) {\r\n    return !str ? \"\" : String(str).replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g, \"\").replace(/([a-z])([A-Z])/g, (m, a, b) => a + \"_\" + b.toLowerCase()).replace(/[^A-Za-z0-9]+|_+/g, \"-\").toLowerCase().replace(/(-?)(\\w+)(-?)/g, (m, a, b, c) => a + b.charAt(0).toUpperCase() + b.slice(1) + c);\r\n  }\r\n\r\n  // Check if same path\r\n  function samePath(p1, p2) {\r\n    p1 = p1 instanceof URL ? p1.pathname : parseUrl(p1).pathname;\r\n    p2 = p2 instanceof URL ? p2.pathname : parseUrl(p2).pathname;\r\n    if (p1 != p2 && p1.startsWith(ew.PATH_BASE) && p2.startsWith(ew.PATH_BASE)) {\r\n      p1 = p1.substring(ew.PATH_BASE.length);\r\n      p2 = p2.substring(ew.PATH_BASE.length);\r\n      let ar1 = p1.split(\"/\"),\r\n        ar2 = p2.split(\"/\");\r\n      if (ar1[0] == ar2[0] && ar1[0].match(/(list|view|edit)$/i) ||\r\n      // *list == *list\r\n      ar1[0] == ar2[0] && ar1[1] == ar2[1] && [ew.LIST_ACTION, ew.VIEW_ACTION, ew.EDIT_ACTION].includes(ar1[1]))\r\n        // xxx/list == xxx/list\r\n        return true;\r\n    }\r\n    return p1 == p2;\r\n  }\r\n\r\n  // Get element value as array for select-multiple field or else as string\r\n  function getValue(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return undefined;\r\n    if (obj.options) {\r\n      // Selection list\r\n      return obj.list ? obj.type == \"select-multiple\" ? obj.values : obj.value : $$1(obj).val();\r\n    } else if (Array.isArray(obj)) {\r\n      // Radio/Checkbox list or element not found\r\n      return obj.length ? $$1(obj).filter(\":checked\").map((i, el) => el.value).get() : undefined;\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      // Single checkbox\r\n      return obj.checked ? obj.value : undefined;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      return obj.value;\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as an array\r\n  function getOptionValues(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        return obj.values;\r\n      } else if (isSelect2(obj)) {\r\n        let val = $$1(obj).val();\r\n        return Array.isArray(val) ? val : $$1.isValue(val) ? [val] : [];\r\n      } else {\r\n        return Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.value);\r\n      }\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $$1(obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Get existing selected values as string\r\n  function getOptionValue(el, form) {\r\n    return getOptionValues(el, form).join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n  }\r\n\r\n  // Get existing text of selected values as an array\r\n  function getOptionTexts(el, form) {\r\n    let obj = el;\r\n    if ($$1.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type))\r\n      // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n    if (!obj) return [];\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return isSelect2(obj) ? $$1(obj).find(\":selected\").map((i, el) => el.innerHTML).get() : Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $$1(obj).filter(\":checked\").map(function () {\r\n        return $$1(this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $$1(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  }\r\n\r\n  // Clear existing options\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" ||\r\n      // multiple\r\n      obj.hasAttribute(\"data-dropdown\") ||\r\n      // dropdown\r\n      obj.length > 0 && obj.options[0].value != \"\" // non-empty first element\r\n      ? 0 : 1;\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n        obj.render();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) obj.remove(i);\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n  function getId(el, remove) {\r\n    var id = $$1.isString(el) ? el : $$1(el).attr(\"name\") || $$1(el).attr(\"id\"); // Use name first (id may have suffix)\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  }\r\n\r\n  // Get display value separator\r\n  function valueSeparator(index, obj) {\r\n    var sep = $$1(obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n  function displayValue(opt, obj) {\r\n    return [opt.df, opt.df2, opt.df3, opt.df4].reduce((text, value, i) => {\r\n      let sep = i > 0 ? valueSeparator(i, obj) : \"\";\r\n      return !$$1.isUndefined(sep) && $$1.isValue(value) && value != \"\" ? text + sep + value : text;\r\n    }, \"\");\r\n  }\r\n\r\n  /**\r\n   * Get HTML for a single option\r\n   *\r\n   * @param {*} val - Value of the option\r\n   * @returns {string} HTML\r\n   */\r\n  function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n  }\r\n\r\n  /**\r\n   * Get HTML for diplaying all options\r\n   *\r\n   * @param {string[]} options - Array of all options (HTML)\r\n   * @param {number} max - Maximum number of options to show\r\n   * @returns {string} HTML\r\n   */\r\n  function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT))\r\n      // More than max option count\r\n      return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);else if (options.length)\r\n      // Some options\r\n      return options.reduce((previous, current) => previous + optionHtml(current), \"\");\r\n    return ew.language.phrase(\"PleaseSelect\"); // No options\r\n  }\r\n\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} data - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @param {bool} selected - New option is selected\r\n   * @returns\r\n   */\r\n  function newOption(obj, data, f, selected) {\r\n    let frm = forms.get(f.id),\r\n      id = getId(obj),\r\n      list = frm.getList(obj),\r\n      group = data.gf,\r\n      value = data.lf,\r\n      template = frm.getOptionTemplate(list),\r\n      text = template != null && template.render && !isAutoSuggest(obj) ? template.render(data, ew.jsRenderHelpers) : displayValue(data, obj) || value;\r\n    if (obj.options) {\r\n      // Selection list\r\n      let option;\r\n      if (obj.list) {\r\n        option = new ew.SelectionListOption(text, value, !!selected);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = value;\r\n        option.innerHTML = text;\r\n        option.selected = !!selected;\r\n      }\r\n      let args = {\r\n        \"name\": id,\r\n        \"form\": f.$element,\r\n        data,\r\n        group,\r\n        option\r\n      };\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n      if (obj.list) {\r\n        obj.addOption(args.option);\r\n      } else {\r\n        if (args.group && !isSelect2(obj)) {\r\n          var _obj$querySelector;\r\n          let optGroup = Array.from((_obj$querySelector = obj.querySelector(\":scope > optgroup\")) != null ? _obj$querySelector : []).find(g => g.label == args.group);\r\n          if (!optGroup) {\r\n            optGroup = document.createElement(\"optgroup\");\r\n            optGroup.label = args.group;\r\n            obj.add(optGroup);\r\n          }\r\n          optGroup.appendChild(args.option);\r\n        } else {\r\n          obj.add(args.option);\r\n        }\r\n      }\r\n      return args.option.text;\r\n    }\r\n    return text;\r\n  }\r\n\r\n  // Select combobox option\r\n  function selectOption(obj, values, change) {\r\n    var _obj$dataset, _forms$get$getList;\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n    if (!obj || !values) return;\r\n    let $obj = $$1(obj);\r\n    values = Array.isArray(values) ? values : [values];\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        obj.value = values;\r\n      } else {\r\n        var _obj$options$;\r\n        $obj.val(values);\r\n        if (change && isSelect2(obj)) $obj.triggerHandler(\"change\");\r\n        if (obj.type == \"select-one\" && obj.selectedIndex == -1 && !((_obj$options$ = obj.options[0]) != null && _obj$options$.value)) obj.selectedIndex = 0; // Make sure an option is selected\r\n      }\r\n\r\n      if (isAutoSuggest(obj) && values.length == 1) {\r\n        let opts = obj.options || [];\r\n        for (let opt of opts) {\r\n          if (opt.value == values[0]) {\r\n            obj.value = opt.value;\r\n            obj.input.value = opt.text;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      obj.checked = convertToBool(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n    } else if (obj.type && obj.type != \"file\") {\r\n      $obj.val(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n      if (isHiddenTextArea($obj)) $obj.data(\"editor\").set();\r\n    }\r\n    // Auto-select if only one option\r\n    if (((_obj$dataset = obj.dataset) == null ? void 0 : _obj$dataset.autoselect) === \"false\")\r\n      // data-autoselect=\"false\"\r\n      return;\r\n    let form = getForm(obj),\r\n      autoSelect = form && !(form.id.endsWith(\"search\") || form.id.endsWith(\"srch\") || ((_forms$get$getList = forms.get(form.id).getList(obj)) == null || (_forms$get$getList = _forms$get$getList.parentFields) == null ? void 0 : _forms$get$getList.length) === 0); // Not search forms and has parent fields\r\n    if (autoSelect && obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      }\r\n      if (isAutoSuggest(obj)) {\r\n        let opts = obj.options || [];\r\n        if (opts.length == 1) {\r\n          obj.value = opts[0].value;\r\n          obj.input.value = opts[0].text;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Fetch API\r\n  function _fetch(url, init) {\r\n    var _init, _init$headers;\r\n    (_init = init) != null ? _init : init = {};\r\n    init.headers = new Headers(init.headers || {});\r\n    let isApi = url.startsWith(getApiUrl()); // Is API request\r\n    if (isApi && ew.API_JWT_TOKEN) init.headers.set(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n    if ((_init$headers = init.headers) != null && (_init$headers = _init$headers.get(\"Content-Type\")) != null && _init$headers.includes(\"application/json\")) {\r\n      // Add token in headers if posting JSON data // PHP\r\n      init.headers.set(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME); // Send token name in header // PHP\r\n      init.headers.set(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN); // Send antiforgery token in header // PHP\r\n    }\r\n\r\n    if (!init.method || sameText(init.method, \"GET\")) {\r\n      // GET\r\n      url = setSearchParams(url, init.body);\r\n      delete init.body;\r\n    } else {\r\n      // POST\r\n      if (init.body instanceof FormData) {\r\n        init.body.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n        init.body.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      } else {\r\n        init.body = mergeSearchParams(init.body, {\r\n          [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n          [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n        }); // Add token name and antiforgery token // PHP\r\n      }\r\n    }\r\n\r\n    let args = {\r\n      url,\r\n      init\r\n    };\r\n    $document$1.trigger(\"fetch\", [args]);\r\n    return fetch(args.url, args.init);\r\n  }\r\n\r\n  // Ajax send\r\n  $document$1.on(\"ajaxSend\", function (event, jqxhr, settings) {\r\n    let url = settings.url,\r\n      isApi = url.startsWith(getApiUrl()),\r\n      // Is API request\r\n      allowed = isApi || url.startsWith(ew.PATH_BASE) || url.startsWith(currentPage());\r\n    if (!allowed && url.match(/^http/i)) {\r\n      let objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN) jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN); // Note: settings.headers won't work\r\n      if ($$1.isString(settings.contentType) && settings.contentType.includes(\"application/json\")) {\r\n        // Add token and antiforgery token in headers if posting JSON data // PHP\r\n        jqxhr.setRequestHeader(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME);\r\n        jqxhr.setRequestHeader(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN);\r\n      } else if (sameText(settings.type, \"POST\")) {\r\n        // POST\r\n        if (settings.data instanceof FormData) {\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n        } else {\r\n          let params = mergeSearchParams(new URLSearchParams(settings.data), {\r\n            [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n            [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n          }); // Add token name and antiforgery token // PHP\r\n          settings.data = params.toString();\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  // Ajax start\r\n  $document$1.on(\"ajaxStart\", function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    $$1(\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      let frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  });\r\n\r\n  // Ajax stop/error\r\n  $document$1.on(\"ajaxStop ajaxError\", function () {\r\n    $$1(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      let frm = forms.get(this.id);\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.enableForm();\r\n      }\r\n    });\r\n    $document$1.data(\"_ajax\", false);\r\n  });\r\n\r\n  // Execute JavaScript in HTML loaded by Ajax\r\n  function executeScript(html, id, modal) {\r\n    let pattern = modal ? /<(head)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig : /<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig,\r\n      // If modal, scripts in template tags not executed by browser, execute manually\r\n      matches = html.replaceAll(pattern, \"\").matchAll(/<script[^>]*>[\\s\\S]*?<\\/script\\s*>/ig); // Do not execute scripts in template tags, use non-greedy [\\s\\S]*?\r\n    Array.from(document.createRange().createContextualFragment(Array.from(matches).map(m => m[0]).filter(s => !s.includes(\"$rowindex$\")).join(\"\")).querySelectorAll(\"script:not([type]), script[type='text/javascript']\")).sort((s1, s2) => s2.classList.contains(\"ew-apply-template\") ? 1 : s1.classList.contains(\"ew-apply-template\") ? -1 : 0) // Execute custom template first\r\n    .forEach((s, i) => addScript(s, \"scr_\" + id + \"_\" + i));\r\n  }\r\n\r\n  // Strip JavaScript in HTML loaded by Ajax\r\n  function stripScript(html) {\r\n    let matches = html.replaceAll(/<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig); // Do not strip scripts in template tags, use non-greedy [\\s\\S]*?\r\n    return Array.from(matches).filter(m => document.createRange().createContextualFragment(m[0]).querySelector(\"script:not([type]), script[type='text/javascript']\")).reduce((html, m) => html.replace(m[0], \"\"), html);\r\n  }\r\n\r\n  // Add SCRIPT tag\r\n  function addScript(text, id) {\r\n    let scr = text instanceof HTMLScriptElement ? text : document.createElement(\"SCRIPT\");\r\n    if ($$1.isString(text)) scr.text = text;\r\n    if (id) scr.id = id;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  }\r\n\r\n  // Remove JavaScript added by Ajax\r\n  function removeScript(id) {\r\n    if (id) $$1(\"script[id^='scr_\" + id + \"_']\").remove();\r\n  }\r\n\r\n  /**\r\n   * Clean HTML loaded by Ajax for modal dialog\r\n   *\r\n   * @param {string} html - HTML string\r\n   * @param {bool} keepScripts - Keep script tags or not\r\n   * @returns HTML string\r\n   */\r\n  function getContent(html, keepScripts) {\r\n    var _m$;\r\n    html = html.trim().replace(/<head>[\\s\\S]*<\\/head>/, \"\");\r\n    let body = keepScripts ? html : stripScript(html),\r\n      m = body.match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    body = (_m$ = m == null ? void 0 : m[0]) != null ? _m$ : body;\r\n    let $content = $$1(body).find(\"section.content\");\r\n    return $content[0] ? $content.html() : body;\r\n  }\r\n\r\n  // Get all options of Selection list or Radio/Checkbox list as array\r\n  function getOptions(obj) {\r\n    return obj != null && obj.options ? Array.prototype.map.call(obj.options, opt => [opt.value, opt.text]) : [];\r\n  }\r\n\r\n  /**\r\n   * Show dialog for enabling two factor authentication\r\n   */\r\n  function enable2FA() {\r\n    document.body.style.cursor = \"wait\";\r\n    if (sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"google\")) {\r\n      // Show QR Code and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      $$1.get(url, result => {\r\n        var _result$error4;\r\n        if (result != null && result.url) {\r\n          _prompt({\r\n            imageUrl: result.url,\r\n            html: ew.language.phrase(\"Scan2FAQrCode\"),\r\n            input: \"text\",\r\n            confirmButtonText: ew.language.phrase(\"Verify\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            willOpen: () => {\r\n              Swal.showLoading(Swal.getConfirmButton());\r\n              Swal.disableInput();\r\n              Swal.getImage().onload = () => {\r\n                Swal.enableInput();\r\n                Swal.hideLoading();\r\n                Swal.getInput().focus();\r\n              };\r\n            },\r\n            preConfirm: value => {\r\n              return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error3;\r\n            if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n              $$1(\"#enable-2fa\").addClass(\"d-none\");\r\n              $$1(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error4 = result.error) != null && _result$error4.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    } else {\r\n      // Send OTP and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      let html = sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"email\") ? ew.language.phrase(\"EnterOTPEmailAddress\") : ew.language.phrase(\"EnterOTPMobileNumber\");\r\n      $$1.get(url, result => {\r\n        var _result$error7;\r\n        if (result.success) {\r\n          _prompt({\r\n            html: html,\r\n            input: \"text\",\r\n            inputValue: result.account,\r\n            confirmButtonText: ew.language.phrase(\"SendOTP\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            preConfirm: value => {\r\n              return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"SendOTPFailed\").replace(\"%e\", getError(result)));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error5;\r\n            if (result != null && (_result$error5 = result.error) != null && _result$error5.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              // Verify OTP\r\n              _prompt({\r\n                html: ew.language.phrase(\"EnterSecurityCode\"),\r\n                input: \"text\",\r\n                confirmButtonText: ew.language.phrase(\"Verify\"),\r\n                showLoaderOnConfirm: true,\r\n                allowEscapeKey: false,\r\n                allowOutsideClick: () => !Swal.isLoading(),\r\n                preConfirm: value => {\r\n                  return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                    if ((result == null ? void 0 : result.success) !== true) throw new Error(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                    return result;\r\n                  }).catch(error => Swal.showValidationMessage(error));\r\n                }\r\n              }, result => {\r\n                var _result$error6;\r\n                if (result != null && (_result$error6 = result.error) != null && _result$error6.description) {\r\n                  showToast(result.error.description);\r\n                } else if (result != null && result.success) {\r\n                  showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n                  $$1(\"#enable-2fa\").addClass(\"d-none\");\r\n                  $$1(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n                }\r\n              }).catch(err => showToast(err == null ? void 0 : err.message));\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error7 = result.error) != null && _result$error7.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show dialog for disabling two factor authentication\r\n   */\r\n  function disable2FA() {\r\n    _prompt({\r\n      html: ew.language.phrase(\"Disable2FAConfirm\"),\r\n      preConfirm: value => {\r\n        if (value) return $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET])).then(result => {\r\n          var _result$error8;\r\n          if (result != null && (_result$error8 = result.error) != null && _result$error8.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"2FAResetFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error9;\r\n      if (result != null && (_result$error9 = result.error) != null && _result$error9.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"2FADisabled\"), \"success\");\r\n        $$1(\"#enable-2fa\").removeClass(\"d-none\");\r\n        $$1(\"#disable-2fa, #backup-codes\").addClass(\"d-none\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n\r\n  /**\r\n   * Toggle chat\r\n   */\r\n  function toggleChat(value) {\r\n    document.body.style.cursor = \"wait\";\r\n    $$1.get(getApiUrl([ew.API_CHAT_ACTION, value]), result => {\r\n      var _result$error10;\r\n      // value should be 1 or 0\r\n      if (result != null && (_result$error10 = result.error) != null && _result$error10.description) {\r\n        _alert(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        $$1(\"#disable-chat\").toggleClass(\"d-none\", !value);\r\n        $$1(\"#enable-chat\").toggleClass(\"d-none\", !!value);\r\n        $$1(\".chat-wrapper\")[value ? \"fadeIn\" : \"fadeOut\"]();\r\n      }\r\n    }).fail((jqXHR, textStatus, errorThrown) => _alert(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n  }\r\n\r\n  /**\r\n   * Show dialog for sending one time password\r\n   */\r\n  function sendOTP(account) {\r\n    _prompt({\r\n      html: ew.language.phrase(\"SendOTPConfirm\"),\r\n      preConfirm: value => {\r\n        let url = account ? getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, account]) : getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP]);\r\n        if (value) return $$1.get(url).then(result => {\r\n          var _result$error11;\r\n          if (result != null && (_result$error11 = result.error) != null && _result$error11.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"SendOTPFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error12;\r\n      if (result != null && (_result$error12 = result.error) != null && _result$error12.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"SendOTPSuccess\"), \"success\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n\r\n  /**\r\n   * Show backup codes for two factor authentication\r\n   */\r\n  function showBackupCodes() {\r\n    let html = \"<p>\" + ew.language.phrase(\"BackupCodesMsg\") + \"</p>\";\r\n    return _alert({\r\n      title: ew.language.phrase(\"BackupCodes\"),\r\n      html: html,\r\n      showDenyButton: true,\r\n      showLoaderOnDeny: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"CopyToClipboard\"),\r\n      denyButtonText: ew.language.phrase(\"GetNewCodes\"),\r\n      customClass: {\r\n        denyButton: \"btn btn-primary ew-swal2-deny-button\"\r\n      },\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        Swal.disableButtons();\r\n        $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.enableButtons();\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n      },\r\n      preConfirm: () => {\r\n        let codes = copyToClipboard(Swal.getHtmlContainer().querySelector(\"textarea\"));\r\n        if (codes) showToast(ew.language.phrase(\"CopiedToClipboard\"), \"success\");\r\n        return false; // Keep the alert open\r\n      },\r\n\r\n      preDeny: async () => {\r\n        Swal.showLoading(Swal.getDenyButton());\r\n        await $$1.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_NEW_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n        return false; // Keep the alert open\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n  function addOptionDialogShow(args) {\r\n    var _args$evt2;\r\n    args.lnk = args.lnk || ((_args$evt2 = args.evt) == null ? void 0 : _args$evt2.currentTarget);\r\n\r\n    // Hide dialog\r\n    var _hide = function () {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n    var $dlg = ew.addOptionDialog || $$1(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n      return;\r\n    }\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true);\r\n\r\n    // Submission success\r\n    var _submitSuccess = function (data) {\r\n      var _results;\r\n      var results = data,\r\n        args = $dlg.data(\"args\"),\r\n        frm = forms.get(args.lnk),\r\n        // form object\r\n        objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n        // Get object name from form\r\n        el = args.el,\r\n        // HTML element name\r\n        re = /^x(\\d+)_/,\r\n        m = el.match(re),\r\n        // Check row index\r\n        prefix = m ? m[0] : \"x_\",\r\n        index = m ? m[1] : -1,\r\n        name = el.replace(re, \"x_\"),\r\n        list = frm.getList(el);\r\n      if ($$1.isString(data)) results = parseJson(data);\r\n      if ((_results = results) != null && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n          form = frm.$element[0],\r\n          // HTML form or DIV\r\n          obj = getElements(el, form);\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n            dfs = list.displayFields.slice(),\r\n            // Clone\r\n            ffs = list.filterFields.slice(),\r\n            // Clone\r\n            pfs = list.parentFields.slice(); // Clone\r\n          pfs.forEach((pf, i) => {\r\n            if (pf.split(\" \").length == 1)\r\n              // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n            row = {\r\n              lf: lfv\r\n            };\r\n          dfs.forEach((df, i) => {\r\n            if (df in result) row[\"df\" + (i > 0 ? i + 1 : \"\")] = result[df];\r\n          });\r\n          ffs.forEach((ff, i) => {\r\n            if (ff in result) row[\"ff\" + (i > 0 ? i + 1 : \"\")] = result[ff];\r\n          });\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null)\r\n              // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(pf => getOptionValues(pf, form)),\r\n              // Get the parent field values\r\n              args = {\r\n                \"data\": row,\r\n                \"parents\": arp,\r\n                \"valid\": true,\r\n                \"name\": getId(obj),\r\n                \"form\": form\r\n              };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                txt = newOption(obj, row, form);\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  $$1(obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n                if (isAutoSuggest(obj)) {\r\n                  $$1(obj).val(lfv).trigger(\"change\");\r\n                  $$1(obj.input).val(txt).trigger(\"focus\");\r\n                } else {\r\n                  $$1(obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n              var $form = $$1(form),\r\n                suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n                cnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix).val();\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form),\r\n                    ar2 = getOptions(obj2);\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2))\r\n                    // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  obj2.render == null ? void 0 : obj2.render(); // Selection list\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n        // Failure\r\n        if ((_results2 = results) != null && _results2.error) {\r\n          let error = getError(results);\r\n          if (error) _alert(error);\r\n        } else {\r\n          var msg,\r\n            $div = $$1(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n            msg = ((_results3 = results) == null ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n          _alert(msg);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Fail\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Submit\r\n    var _submit = async function (e) {\r\n      let $dlg = ew.addOptionDialog,\r\n        form = $dlg.find(\".modal-body form\")[0],\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target,\r\n        $btn = $$1(btn);\r\n      if (await frm.canSubmit(e)) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        document.body.style.cursor = \"wait\";\r\n        $$1.post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $$1(form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          document.body.style.cursor = \"default\";\r\n        });\r\n      }\r\n      return false;\r\n    };\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    // Get form HTML\r\n    var success = function (data) {\r\n      var frm = forms.get(args.lnk),\r\n        prefix = \"x_\",\r\n        m = args.el.match(/^(x\\d+_)/);\r\n      if (m)\r\n        // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n        pfs = list.parentFields.slice() // Clone\r\n        .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf),\r\n        // Parent field in the same table, add row index\r\n        form = frm.htmlForm,\r\n        ar = pfs.map(pf => getOptionValues(pf, form)),\r\n        ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n        ffs = list.filterFieldVars.slice(); // Clone\r\n      $dlg.find(\".modal-title\").html($$1(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n      if (form) {\r\n        // Set the filter field value\r\n        $$1(form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        // $document.one(\"updatedone\", () => {\r\n        //     ar.forEach((v, i) => {\r\n        //         let obj = getElements(ffs[i], form);\r\n        //         if (obj) {\r\n        //             if (obj.options || obj.length) { // Selection list\r\n        //                 $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n        //             } else {\r\n        //                 selectOption(obj, v);\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // });\r\n      }\r\n\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach((v, i) => {\r\n          var obj = getElements(ffs[i], form);\r\n          if (obj && v[0]) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (obj.options || obj.length) {\r\n              // Selection list\r\n              newOption(obj, {\r\n                lf: v[0]\r\n              }, frm, true);\r\n              // $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n            } else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n      executeScript(data, args.el, true);\r\n      $dlg.trigger(\"load.ew\"); // Trigger load event\r\n    };\r\n\r\n    $$1.get(args.url, success).fail(_fail);\r\n    return false;\r\n  }\r\n\r\n  // Hide Modal dialog\r\n  function modalDialogHide() {\r\n    let $dlg = $$1(this),\r\n      args = $dlg.data(\"args\"),\r\n      frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    removeScript(\"modal_dialog\");\r\n    frm == null ? void 0 : frm.destroyEditor();\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass((i, className) => {\r\n      let m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data({\r\n      showing: false,\r\n      url: null\r\n    });\r\n    if (args != null && args.reload) window.location.reload();\r\n  }\r\n\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of content\r\n   * @param {string} args.html - HTML content\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {boolean} args.footer - Show footer (default true)\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Class name of modal dialog 'modal-sm'|'modal-md'|modal-lg'|'modal-xl' (default)\r\n   * @param {Function} args.callback - Callback function (success function after submitting the form)\r\n   * @returns false\r\n   */\r\n  function modalDialogShow(args) {\r\n    var _args$evt3, _bootstrap$Tooltip$ge4, _args$evt4, _args$evt5, _$dlg$data, _$dlg$data2;\r\n    args.lnk || (args.lnk = (_args$evt3 = args.evt) == null ? void 0 : _args$evt3.currentTarget);\r\n    (_bootstrap$Tooltip$ge4 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge4.hide();\r\n    let {\r\n        ewAction,\r\n        action\r\n      } = args,\r\n      f = args.f || ((_args$evt4 = args.evt) == null || (_args$evt4 = _args$evt4.currentTarget) == null ? void 0 : _args$evt4.form);\r\n    if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n      // Grid-Edit and Multi-Edit/Update\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let url = args.url || ((_args$evt5 = args.evt) == null || (_args$evt5 = _args$evt5.currentTarget) == null ? void 0 : _args$evt5.dataset.url),\r\n      $dlg = ew.modalDialog || $$1(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    $dlg.on(\"hidden.bs.modal\", () => $dlg.data(\"showing\", false));\r\n    if ($dlg.data(\"showing\") && url && $dlg.data(\"url\") == url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: url\r\n    });\r\n    args.reload = false;\r\n\r\n    // Size\r\n    $dlg.find(\".modal-dialog\").removeClass(\"modal-sm modal-md modal-lg modal-xl\").addClass(args.size || \"modal-xl\");\r\n\r\n    // Caption\r\n    let _caption = function () {\r\n      let args = $dlg.data(\"args\"),\r\n        $lnk = $$1(args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    };\r\n\r\n    // Button text\r\n    let _button = function () {\r\n      let args = $dlg.data(\"args\");\r\n      if (args.btn === null) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);\r\n      return _caption();\r\n    };\r\n\r\n    // Fail\r\n    let _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    };\r\n\r\n    // Always\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    };\r\n\r\n    // Check if current page\r\n    let _current = function (url) {\r\n      let a = document.createElement(\"a\");\r\n      a.href = url;\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    };\r\n\r\n    // Close hidden dialog\r\n    let _hide = function () {\r\n      if ($dlg.data(\"showing\") && !$dlg.hasClass(\"show\")) $dlg.data(\"showing\", false).trigger(\"hidden.bs.modal\"); // Call modalDialogHide()\r\n    };\r\n\r\n    /**\r\n     * Handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     * @param {boolean} result.success - Result => Call callback if function\r\n     */\r\n    let handleResult = function (result) {\r\n      let error = getError(result);\r\n      if (error) {\r\n        _alert(error);\r\n        _hide();\r\n      } else if ($$1.isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, \"warning\");\r\n        _hide();\r\n      } else if ($$1.isString(result.message)) {\r\n        _alert(result.message, \"body\");\r\n        _hide();\r\n      } else if (result.success && !isFunction$2(args == null ? void 0 : args.callback) || $$1.isString(result.successMessage)) {\r\n        var _lnk$closest, _lnk$closest2, _tabPane$parentNode;\r\n        let args = $dlg.data(\"args\"); // Get data before hiding\r\n        $dlg.modal(\"hide\");\r\n        if (result.successMessage) showToast(result.successMessage, \"success\");\r\n        let lnk = args == null ? void 0 : args.lnk,\r\n          btnId = lnk == null || (_lnk$closest = lnk.closest(\".dropdown-menu[aria-labelledby]\")) == null ? void 0 : _lnk$closest.getAttribute(\"aria-labelledby\"),\r\n          btn = btnId ? document.getElementById(btnId) : null,\r\n          tabPane = (_lnk$closest2 = lnk == null ? void 0 : lnk.closest(\".tab-pane\")) != null ? _lnk$closest2 : btn == null ? void 0 : btn.closest(\".tab-pane\"),\r\n          navItem = tabPane == null || (_tabPane$parentNode = tabPane.parentNode) == null || (_tabPane$parentNode = _tabPane$parentNode.parentNode) == null ? void 0 : _tabPane$parentNode.querySelector(\"[data-bs-toggle='tab'][data-bs-target='#\" + tabPane.id + \"']:not([tabindex])\"); // The active button does not have tabindex=\"-1\r\n        $dlg.trigger(\"success.ew.modal\", [{\r\n          result,\r\n          tabPane,\r\n          navItem\r\n        }]); // Reload tab content\r\n      } else if (result.reload) {\r\n        $dlg.modal(\"hide\");\r\n        window.location.reload();\r\n      } else if ($$1.isBoolean(result.success) && isFunction$2(args == null ? void 0 : args.callback)) {\r\n        // If success or failure and callback is function, call the callback\r\n        $dlg.modal(\"hide\");\r\n        args.callback(result);\r\n      } else if (result.url) {\r\n        let url = result.url;\r\n        if (result.modal) {\r\n          if (_current(url)) {\r\n            // Return to current page\r\n            if (!result.error) {\r\n              $dlg.modal(\"hide\");\r\n              refresh(fetch(url));\r\n            }\r\n          } else {\r\n            // Return to other page\r\n            args.reload = true;\r\n            args.url = url;\r\n            if (result.caption) args.caption = result.caption;\r\n            args.btn = result.view ? null : \"\";\r\n            $dlg.data({\r\n              args,\r\n              url\r\n            });\r\n            url = setSearchParams(url, {\r\n              modal: \"1\",\r\n              rnd: random()\r\n            });\r\n            document.body.style.cursor = \"wait\";\r\n            $$1.get(url).done(success).fail(_fail).always(_always);\r\n          }\r\n        } else {\r\n          $dlg.modal(\"hide\");\r\n          window.location = sanitizeUrl(url);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Create buttons\r\n    let _createButtons = function () {\r\n      let $footer = $dlg.find(\".modal-footer\").last().empty(),\r\n        // Empty the footer (Find the last footer in case users add their own in the dialog)\r\n        $btn = $dlg.find(\".card-body button[type=submit]\").first().addClass(\"ew-submit\").on(\"click\", _submit); // Find submit button found in card body\r\n      if (!$btn[0]) {\r\n        // No submit button found in card body\r\n        $dlg.find(\".modal-body .ew-modal-buttons\").contents().clone().find(\"button\").each(function () {\r\n          // Find buttons in <template>\r\n          if (this.type == \"submit\") {\r\n            this.type = \"button\"; // Convert to normal button\r\n            this.classList.add(\"ew-submit\");\r\n            if (this.id == \"btn-cancel\") this.classList.add(\"ew-cancel\"); // Cancel button with type=\"submit\"\r\n            let $this = $$1(this);\r\n            $this.on(\"click\", function (e) {\r\n              if (this.dataset.ewAction == \"set-action\")\r\n                // Set value first\r\n                this.form.elements[\"action\"].value = this.dataset.value;\r\n              $this.data(\"ajax\") === false ? $$1(this.form).trigger(\"submit\") : _submit(e);\r\n            });\r\n          } else if (this.id == \"btn-cancel\") {\r\n            if (this.dataset.href) {\r\n              $$1(this).on(\"click\", function (e) {\r\n                let form = $dlg.find(\".modal-body form\")[0],\r\n                  frm = forms.get(form.id);\r\n                frm == null ? void 0 : frm.updateTextArea();\r\n                if (frm != null && frm.modified && ew.hasFormData(this.form)) {\r\n                  ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n                    if (result) {\r\n                      if (samePath(this.dataset.href, currentUrl.pathname)) $dlg.modal(\"hide\");else redirect(this.dataset.href);\r\n                    }\r\n                  });\r\n                } else {\r\n                  if (samePath(this.dataset.href, currentUrl.pathname)) $dlg.modal(\"hide\");else redirect(this.dataset.href);\r\n                }\r\n              });\r\n            } else {\r\n              $$1(this).on(\"click\", () => $dlg.modal(\"hide\"));\r\n            }\r\n          }\r\n          $footer[0].appendChild(this);\r\n        }); // Clone buttons and append to footer\r\n        if (!$dlg.find(\".card-body button[type=submit], .modal-footer .btn\")[0]) {\r\n          // No buttons found\r\n          let btn = _button();\r\n          if (btn) {\r\n            $$1('<button type=\"button\" class=\"btn btn-primary ew-btn\">' + btn + '</button>').on(\"click\", _submit).appendTo($footer);\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n          } else {\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CloseBtn\") + '</button>');\r\n          }\r\n        }\r\n        $footer.find(\"button\").on(\"mousedown\", e => e.preventDefault()); // Do not focus button by mouse down\r\n        $footer.find(\".btn-primary\").focus();\r\n      }\r\n    };\r\n\r\n    // Check return URL\r\n    let _return = response => {\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n      if (returnUrl && args.table && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $$1(\".ew-grid.\" + args.table).find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n\r\n    // Submit success\r\n    let _submitSuccess = async function (response) {\r\n      let args = $dlg.data(\"args\"); // Get arguments first or it will be removed by modalDialogHide()\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n        if (isFunction$2(args == null ? void 0 : args.callback)) {\r\n          // If callback is function, call the callback function then return\r\n          let error = getError(result);\r\n          if (error) showToast(error);else $dlg.modal(\"hide\");\r\n          args.callback(result);\r\n          return;\r\n        }\r\n        handleResult(result);\r\n      } else {\r\n        let data = await response.clone().text(),\r\n          body = getContent(data).trim(); // Make sure no leading/trailing space\r\n        if (body.startsWith(\"<\") && body.endsWith(\">\")) {\r\n          // HTML\r\n          if (args.ajax && args.action == \"add\" && document.querySelector(\"main.ew-no-record\") && $$1(body).find(\"main:not(.ew-no-record)\")[0]) {\r\n            // No existing record, new record added\r\n            $dlg.modal(\"hide\");\r\n            await refresh(Promise.resolve(response));\r\n            _return(response);\r\n            return;\r\n          }\r\n          $dlg.find(\".modal-body\").html(body);\r\n          $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n          // If callback is function and no modal buttons, call the callback function then return\r\n          if (!$dlg.find(\".modal-body .ew-modal-buttons\").length && isFunction$2(args == null ? void 0 : args.callback)) {\r\n            $dlg.modal(\"hide\");\r\n            args.callback(response);\r\n            return;\r\n          }\r\n          _createButtons();\r\n          executeScript(data, \"modal_dialog\", true);\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n          _alert(data);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Submit\r\n    let _submit = async function (e) {\r\n      let form = $dlg.find(\".modal-body form\")[0],\r\n        $form = $$1(form),\r\n        frm = forms.get(form.id),\r\n        btn = e == null ? void 0 : e.target;\r\n      if (btn.classList.contains(\"disabled\")) return false;\r\n      if (btn.classList.contains(\"ew-cancel\")) {\r\n        // Cancel button with type=\"submit\"\r\n        $$1.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (await frm.canSubmit(e)) {\r\n        document.body.style.cursor = \"wait\";\r\n        let p = _fetch($form.attr(\"action\"), {\r\n          method: \"POST\",\r\n          body: $form.serialize()\r\n        }).catch(_fail).finally(() => {\r\n          frm.enableForm();\r\n          _always();\r\n        });\r\n        if (frm.submitWithFetch) {\r\n          p.then(async response => {\r\n            var _resp$headers$get;\r\n            // Check error before refresh\r\n            let resp = response.clone(),\r\n              isJson = (_resp$headers$get = resp.headers.get(\"Content-Type\")) == null ? void 0 : _resp$headers$get.includes(\"json\"),\r\n              result = isJson ? await resp.json() : null,\r\n              hasErrors = (result == null ? void 0 : result.validation) || getError(result);\r\n            if (!isJson || !hasErrors)\r\n              // HTML or JSON without error => close dialog\r\n              $dlg.modal(\"hide\");\r\n            let args = {\r\n                form,\r\n                result: Promise.resolve(response),\r\n                context: hasErrors ? \"#ew-modal-dialog.show .modal-body\" : null\r\n              },\r\n              evt = $$1.Event(\"aftersubmit\", {\r\n                originalEvent: e\r\n              });\r\n            frm.trigger(evt, [args]);\r\n          });\r\n        } else {\r\n          p.then(_submitSuccess);\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    let success = function (data) {\r\n      let result = parseJson(data);\r\n      if ($$1.isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        let args = $dlg.data(\"args\"),\r\n          $lnk = $$1(args.lnk),\r\n          body = getContent(data);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        $dlg.find(\".modal-body\").html(body);\r\n        $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n        _createButtons();\r\n        $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n        let lnkData = $lnk.data() || {};\r\n        if (lnkData.table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + lnkData.table);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", e => {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $dlg.find(\".modal-footer .btn.btn-primary\").trigger(\"click\");\r\n            return false;\r\n          }\r\n        });\r\n        if (lnkData.ajax && lnkData.table && lnkData.action == \"view\") {\r\n          // Modal View page and use Ajax actions\r\n          [\".ew-add\", \".ew-copy\", \".ew-edit\", \".ew-delete\"].forEach(className => {\r\n            let $dlglnk = $dlg.find(\".modal-body \" + className + \"[data-ew-action=modal]\"),\r\n              // Link inside modal dialog\r\n              $lnk = $$1(\"[data-ew-action=modal][data-table='\" + lnkData.table + \"'][data-url='\" + $dlglnk.data(\"url\") + \"']\").not(\".modal-body *\").first(); // Link outside modal dialog\r\n            $lnk[0] ? $dlglnk.on(\"click\", e => {\r\n              e.preventDefault();\r\n              e.stopImmediatePropagation();\r\n              $lnk.trigger(\"click\"); // Click the link outside\r\n            }) : $dlglnk.addClass(\"d-none\"); // Hide the link\r\n          });\r\n        }\r\n\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"modal_dialog\", true);\r\n        // Fix for CKEditor\r\n        let modal = bootstrap.Modal.getInstance($dlg[0]);\r\n        if (!modal._focustrap.__handleFocusin) {\r\n          modal._focustrap.__handleFocusin = modal._focustrap._handleFocusin;\r\n          modal._focustrap._handleFocusin = function (e) {\r\n            var _e$target10;\r\n            // Use function for \"this\"\r\n            if ((_e$target10 = e.target) != null && _e$target10.matches(\"[class^=cke_dialog_]\"))\r\n              // Element from CKEditor dialog\r\n              return; // Do not focus the modal\r\n            this.__handleFocusin(e);\r\n          };\r\n        }\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event\r\n      }\r\n    };\r\n\r\n    let show = function (html) {\r\n      let args = $dlg.data(\"args\");\r\n      $dlg.find(\".modal-title\").html(_caption());\r\n      $dlg.find(\".modal-body\").html(html);\r\n      _createButtons();\r\n      $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n      ew.modalDialog = $dlg.modal(\"show\");\r\n    };\r\n\r\n    // Restore previous callback\r\n    if (args.callback === true && (_$dlg$data = $dlg.data(\"args\")) != null && _$dlg$data.callback) args.callback = $dlg.data(\"args\").callback;\r\n    if (url && (_$dlg$data2 = $dlg.data(\"args\")) != null && _$dlg$data2.reload) {\r\n      // About to load URL but previous result required reload\r\n      args.reload = true; // Carry the reload state to current args\r\n      $dlg.data(\"args\").reload = false; // Remove reload so \"hidden\" event will not reload\r\n    }\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n    if (url) {\r\n      document.body.style.cursor = \"wait\";\r\n      let params = ew.getSearchParams(url);\r\n      params.set(\"rnd\", random());\r\n      if (params.get(\"action\") != \"delete\") params.set(\"modal\", \"1\");\r\n      $$1.ajax({\r\n        url: setSearchParams(url, params),\r\n        method: f ? \"POST\" : \"GET\",\r\n        data: f ? $$1(f).serialize() : \"\",\r\n        headers: args.json ? {\r\n          Accept: \"application/json, */*; q=0.01\"\r\n        } : {} // JSON response\r\n      }).done(success).fail(_fail).always(_always);\r\n    } else if (args.html) {\r\n      show(args.html);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n  function importDialogShow(args) {\r\n    var _args$evt6, _bootstrap$Tooltip$ge5;\r\n    args.lnk = args.lnk || ((_args$evt6 = args.evt) == null ? void 0 : _args$evt6.currentTarget);\r\n    (_bootstrap$Tooltip$ge5 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge5.hide();\r\n    let $dlg = ew.importDialog || $$1(\"#ew-import-dialog\");\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n      return false;\r\n    }\r\n    let $input = $dlg.find(\"#importfiles\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $bd = $dlg.find(\".modal-body\"),\r\n      $data = $bd.find(\":input[id!=importfiles]\"),\r\n      $message = $bd.find(\".message\"),\r\n      $progress = $bd.find(\".progress\"),\r\n      table,\r\n      sse;\r\n\r\n    // Add row to table\r\n    let addRow = function (result) {\r\n      let {\r\n          row,\r\n          success,\r\n          error,\r\n          count\r\n        } = result,\r\n        callback = () => {\r\n          table.addRow(row).then(r => r.getElement().classList.toggle(\"text-danger\", error));\r\n          if (error) console.log(ew.language.phrase(\"ImportRowError\").replace(\"%i\", count + \" \" + JSON.stringify(row)).replace(\"%e\", error));\r\n        };\r\n      row = {\r\n        \"_index\": count,\r\n        \"_success\": success,\r\n        \"_error\": error,\r\n        ...row\r\n      };\r\n      if (!table) {\r\n        table = new Tabulator(\"#ew-import-dialog .result\", $$1.extend({\r\n          data: [row],\r\n          index: \"_index\",\r\n          autoColumns: true,\r\n          autoColumnsDefinitions: definitions => {\r\n            definitions.forEach(column => {\r\n              column.headerSort = false;\r\n              column.resizable = false;\r\n              if ([\"_index\", \"_error\"].includes(column.field)) {\r\n                column.visible = false;\r\n              } else if (column.field == \"_success\") {\r\n                column.title = \"#\";\r\n                column.headerSort = true;\r\n                column.headerSortTristate = true;\r\n                column.formatter = cell => {\r\n                  cell.getElement().style.textOverflow = \"clip\";\r\n                  let row = cell.getRow(),\r\n                    data = row.getData();\r\n                  if (data._error) new bootstrap.Tooltip(row.getElement(), {\r\n                    placement: \"bottom\",\r\n                    title: data._error,\r\n                    container: \"#ew-import-dialog .result\"\r\n                  });\r\n                  return (data._success ? '<i class=\"fa-solid fa-check text-success\"></i>' : '<i class=\"fa-solid fa-xmark text-danger\"></i>') + \" #\" + data._index;\r\n                };\r\n              }\r\n            });\r\n            return definitions;\r\n          }\r\n        }, ew.importTabulatorOptions));\r\n        table.on(\"tableBuilt\", () => table.element.querySelector(\".tabulator-row\").classList.toggle(\"text-danger\", error));\r\n      } else {\r\n        table.initialized ? callback() : table.on(\"tableBuilt\", callback);\r\n      }\r\n    };\r\n\r\n    // Enable buttons\r\n    let enableButtons = enabled => $dlg.find(\".modal-footer .btn\").prop(\"disabled\", !enabled);\r\n\r\n    // Show message\r\n    let showMessage = function (msg, classname) {\r\n      let $msg = $$1(\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons(true);\r\n    };\r\n\r\n    // Hide message\r\n    let hideMessage = () => $message.addClass(\"d-none\").html(\"\");\r\n\r\n    // Show progress\r\n    let showProgress = (pc, classname) => $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"text-bg-success text-bg-info\").addClass(classname || \"text-bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n\r\n    // Hide progress\r\n    let hideProgress = () => $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n\r\n    // Upload progress\r\n    let uploadProgress = function (data) {\r\n      const pc = parseInt(100 * data.loaded / data.total, 10);\r\n      showProgress(pc, \"text-bg-primary\");\r\n      if (pc === 100) showMessage(ew.language.phrase(\"ImportUploadComplete\"), \"text-primary\");else showMessage(ew.language.phrase(\"ImportUploadProgress\").replace(\"%p\", pc), \"text-primary\");\r\n    };\r\n\r\n    // Update import progress\r\n    let updateProgress = function (e) {\r\n      const result = parseJson(e.data) || {};\r\n      try {\r\n        let tcnt = result.totalCount || 0,\r\n          cnt = result.count || 0,\r\n          scnt = result.successCount || 0,\r\n          fcnt = result.failCount || 0,\r\n          filename = result.file;\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          if (result.row) addRow(result);\r\n          let pc = parseInt(100 * cnt / tcnt, 10);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename).replace(\"%s\", scnt).replace(\"%e\", fcnt), fcnt > 0 ? \"text-danger\" : \"text-primary\");\r\n        }\r\n      } catch (e) {}\r\n    };\r\n\r\n    // Import complete\r\n    let importComplete = function (e) {\r\n      var _sse;\r\n      let msg = [],\r\n        result = parseJson(e.data) || {},\r\n        fileResults = result.files;\r\n      showProgress(100);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      if (Array.isArray(fileResults)) {\r\n        fileResults.forEach(fileResult => {\r\n          let tcnt = fileResult.totalCount || 0,\r\n            cnt = fileResult.count || 0,\r\n            scnt = fileResult.successCount || 0,\r\n            fcnt = fileResult.failCount || 0;\r\n          msg.push(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt));\r\n        });\r\n      }\r\n      if (result.success) {\r\n        if (result.rollbacked) msg.push(ew.language.phrase(\"ImportSave\"));\r\n        showMessage(msg.join(\"<br>\"), \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (ew.IMPORT_MAX_FAILURES > 0 && result.failCount >= ew.IMPORT_MAX_FAILURES) msg.push(ew.language.phrase(\"ImportMaxFailuresExceeded\").replace(\"%s\", ew.IMPORT_MAX_FAILURES));\r\n        showMessage(msg.join(\"<br>\"), \"text-danger\"); // Show error message\r\n      }\r\n      // hideProgress();\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").prop(\"disabled\", false); // Enable the close button\r\n      let $btn = $dlg.find(\".modal-footer .ew-import-btn\").toggleClass(\"d-none\", !result.rollbacked || !result.success); // Show/Hide the import button\r\n      if (result.rollbacked) $btn.off(\"click\").one(\"click\", saveImport);\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse = sse) == null ? void 0 : _sse.close();\r\n    };\r\n\r\n    // Import fail\r\n    let importFail = function (e) {\r\n      var _sse2;\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n      let result = parseJson(e.data) || {};\r\n      if (result.error) showMessage(result.error, \"text-danger\");\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse2 = sse) == null ? void 0 : _sse2.close();\r\n    };\r\n\r\n    // Import file\r\n    let importFiles = function (filetoken) {\r\n      var _table;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table = table) == null ? void 0 : _table.clearData();\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      params.set(\"rollback\", \"1\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n\r\n    // Save import\r\n    let saveImport = function (e) {\r\n      var _table2;\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table2 = table) == null ? void 0 : _table2.clearData();\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, $input.data(ew.API_FILE_TOKEN_NAME));\r\n      params.set(\"rollback\", \"0\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n    let options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXTENSIONS.replace(/,/g, '|') + ')$', 'i');\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        singleFileUploads: false,\r\n        dropZone: $dropzone,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n        },\r\n        beforeSend: function (jqxhr, settings) {\r\n          settings.data.set(\"session\", ew.SESSION_ID);\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n          if (ew.API_JWT_TOKEN) jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function (e, data) {\r\n          var _data$result;\r\n          if (Array.isArray(data == null || (_data$result = data.result) == null || (_data$result = _data$result.files) == null ? void 0 : _data$result.importfiles)) {\r\n            let errors = [];\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) errors.push(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error));\r\n            });\r\n            if (errors.length) {\r\n              showMessage(errors.join(\"\\n\"), \"text-danger\"); // Show upload errors for each file\r\n            } else {\r\n              table = null; // Reset\r\n              importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n            }\r\n          }\r\n        },\r\n\r\n        change: function (e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function (e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n\r\n        fail: function (e, data) {\r\n          showMessage(ew.language.phrase(\"ImportServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function (e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      let $this = $$1(this);\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.on(\"show.bs.modal\", function () {\r\n      var _this$querySelector, _table3, _table4;\r\n      hideProgress();\r\n      (_this$querySelector = this.querySelector(\".modal-footer .ew-import-btn\")) == null ? void 0 : _this$querySelector.classList.add(\"d-none\");\r\n      (_table3 = table) == null ? void 0 : _table3.element.removeAttribute(\"style\");\r\n      (_table4 = table) == null ? void 0 : _table4.destroy();\r\n      table = null;\r\n    }).modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Auto-fill\r\n  function autoFill(el) {\r\n    let f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    let ar = getOptionValues(el),\r\n      id = getId(el),\r\n      m = id.match(/^([xy])(\\d*)_/),\r\n      rowindex = m ? m[2] : \"\",\r\n      list = forms.get(el).getList(id),\r\n      dest_array = list.autoFillTargetFields;\r\n    let success = function (data) {\r\n      let results = data == null ? void 0 : data.records,\r\n        result = Array.isArray(results) && results.length > 0 ? results[0] : [];\r\n      for (let j = 0; j < dest_array.length; j++) {\r\n        let destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n        if (destEl) {\r\n          let val = $$1.isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\",\r\n            args = {\r\n              results,\r\n              result,\r\n              data: val,\r\n              form: f,\r\n              name: id,\r\n              target: dest_array[j],\r\n              cancel: false,\r\n              trigger: true\r\n            };\r\n          $$1(el).trigger(\"autofill\", [args]); // Fire event\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $$1(destEl).data(\"editor\").set();\r\n          } else if (destEl.type == \"checkbox\") {\r\n            // Boolean checkbox\r\n            destEl.checked = convertToBool(val);\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n          if (args.trigger) $$1(destEl).trigger(\"change\");\r\n        }\r\n      }\r\n      return result;\r\n    };\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      let data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f));\r\n      // Add parent field values\r\n      let parentId = list.parentFields.slice(); // Clone\r\n      if (rowindex != \"\") {\r\n        for (let i = 0, len = parentId.length; i < len; i++) {\r\n          let ar = parentId[i].split(\" \");\r\n          if (ar.length == 1)\r\n            // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n      let arp = parentId.map(pid => getOptionValue(pid, f)); // Get parent field values\r\n      arp.forEach((p, i) => data[\"v\" + (i + 1)] = p); // Filter by parent fields\r\n      return $$1.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n    return success();\r\n  }\r\n\r\n  // Set up tooltip links as popovers\r\n  function tooltip(i, el) {\r\n    var $this = $$1(el),\r\n      $tt = $$1(\"#\" + $this.data(\"tooltip-id\")),\r\n      trig = $this.data(\"trigger\") || \"hover\",\r\n      dir = $this.data(\"placement\") || \"auto\";\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n    if (!bootstrap.Popover.getInstance(el)) {\r\n      $this.popover({\r\n        ...ew.popoverOptions,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: document.getElementById(\"ew-tooltip\"),\r\n        content: $tt.html()\r\n      }).on(\"show.bs.popover\", function () {\r\n        var wd = $this.data(\"tooltip-width\");\r\n        if (wd)\r\n          // Set width before show\r\n          $$1(bootstrap.Popover.getInstance(this)._getTipElement()).css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Init search filters\r\n   */\r\n  function initSearchFilters(e) {\r\n    var _e$target11;\r\n    let el = (_e$target11 = e == null ? void 0 : e.target) != null ? _e$target11 : document,\r\n      btn = el == null ? void 0 : el.querySelector(\".ew-filter-option\");\r\n    if (ew.CLIENT_SEARCH_FILTER || ew.SERVER_SEARCH_FILTER && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n      $$1(btn).removeClass(\"d-none\").find(\".ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n        var _frm$filterList$filte, _frm$filterList;\r\n        let formId = $$1(this).find(\".ew-save-filter[data-form], .ew-delete-filter[data-form]\").data(\"form\"),\r\n          frm = ew.forms.get(formId),\r\n          filters = ew.CLIENT_SEARCH_FILTER ? ew.parseJson(localStorage.getItem(ew.PROJECT_NAME + \"_\" + frm.id + \"_filters\") || \"[]\") || [] : (_frm$filterList$filte = frm == null || (_frm$filterList = frm.filterList) == null ? void 0 : _frm$filterList.filters) != null ? _frm$filterList$filte : [];\r\n        frm.setupFilters(e, filters.filter(val => Array.isArray(val) && val.length == 2));\r\n      });\r\n    } else {\r\n      btn == null ? void 0 : btn.classList.add(\"d-none\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.exportSelected - Exported selected only\r\n   * @param {string} args.url - URL of content (for Custom Template)\r\n   * @param {string} args.exportId - Export ID (for Custom Template)\r\n   * @returns false\r\n   */\r\n  function emailDialogShow(args) {\r\n    let $dlg = ew.emailDialog || $$1(\"#ew-email-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $$1(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n      return false;\r\n    }\r\n    let form = args.evt.currentTarget.form;\r\n    if (args.exportSelected && !keySelected(form)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n      return false;\r\n    }\r\n    let $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    if (!frm) {\r\n      frm = new FormBuilder().setId($f.attr(\"id\")).addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = mergeSearchParams($f.serialize(), args.key, getchartParams(), form && args.exportSelected ? $$1(form).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize() : null); // Export selected\r\n        $dlg.modal(\"hide\");\r\n        args.custom // Custom Template\r\n        ? _export({\r\n          ...args,\r\n          ...{\r\n            export: \"email\",\r\n            custom: true,\r\n            emailForm: $f[0]\r\n          }\r\n        }) : exportEmail($f.find(\"#tblvar\").val(), data);\r\n        return false;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew.emailDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  // Export to email\r\n  function exportEmail(tblVar, data) {\r\n    let swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({\r\n      ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n        _fetch(getApiUrl([ew.API_EXPORT_ACTION, \"email\", tblVar]) + \"?rnd=\" + random(), {\r\n          // Post to Export API\r\n          method: \"POST\",\r\n          body: data\r\n        }).then(async response => {\r\n          swal.hideLoading();\r\n          let result = await response.json();\r\n          if (result != null && result.success) {\r\n            swal.update({\r\n              html: \"<div class='text-success'>\" + result.message + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          } else {\r\n            var _ref3;\r\n            swal.update({\r\n              html: (_ref3 = \"<div class='text-danger'>\" + getError(result)) != null ? _ref3 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"fail\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          }\r\n        }).catch(error => {\r\n          var _ref4;\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: (_ref4 = \"<div class='text-danger'>\" + error) != null ? _ref4 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            tblVar,\r\n            data,\r\n            error\r\n          }]);\r\n        }).finally(() => {\r\n          swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            tblVar,\r\n            data\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // Show drill down\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e != null && e.ctrlKey) {\r\n      let newUrl = setSearchParams(url, {\r\n        d: \"2\"\r\n      }); // Change \"d\" parameter to 2\r\n      return redirect(newUrl);\r\n    }\r\n    let $obj = $$1(obj),\r\n      config = $obj.data(\"config\") || {},\r\n      args = {\r\n        obj: $obj[0],\r\n        config: {\r\n          title: hdr,\r\n          placement: \"bottom\",\r\n          ...config\r\n        },\r\n        id,\r\n        url\r\n      };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    let ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n    config = args.config;\r\n    if (!bootstrap.Popover.getInstance(obj)) {\r\n      $obj.popover({\r\n        ...ew.popoverOptions,\r\n        ...config,\r\n        trigger: \"manual\",\r\n        template: '<div class=\"popover\" role=\"tooltip\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        // No .popover-arrow\r\n        content: ew.spinnerTemplate(),\r\n        container: $$1(\"#ew-drilldown-panel\").draggable(ew.draggableOptions),\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-bs-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        let data = $obj.data(\"args\").data;\r\n        $$1.ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function (data) {\r\n            let $tip = $$1(bootstrap.Popover.getInstance(obj)._getTipElement());\r\n            if (config.title) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"btn-close\" aria-label=\"' + ew.language.phrase(\"CloseBtn\") + '\"></button>' + config.title).find(\".btn-close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            let m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n            data = m ? m[0] : data;\r\n            let html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($$1(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id, true);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function (o) {\r\n            if (o.responseText) {\r\n              let popover = bootstrap.Popover.getInstance(obj);\r\n              if ($$1.isString(o.responseText) && o.responseText.startsWith(\"{\") && o.responseText.endsWith(\"}\")) {\r\n                var _result$error13, _result$error14;\r\n                let result = parseJson(o.responseText);\r\n                if (result != null && (_result$error13 = result.error) != null && _result$error13.type && result != null && (_result$error14 = result.error) != null && _result$error14.description) {\r\n                  popover == null ? void 0 : popover.hide();\r\n                  return _alert({\r\n                    title: result.error.type,\r\n                    html: result.error.description,\r\n                    customClass: {\r\n                      title: \"ew-swal2-title text-danger\",\r\n                      htmlContainer: \"ew-swal2-html-container text-danger\"\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n              popover == null ? void 0 : popover.setContent({\r\n                \".popover-body\": '<p class=\"text-danger\">' + o.responseText + '</p>'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - Object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n  function ajax(data, callback) {\r\n    if (!$$1.isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n    var obj = Object.assign({}, data);\r\n    var _convert = response => {\r\n      if ($$1.isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1)\r\n            // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n\r\n        return results;\r\n      }\r\n      return response;\r\n    };\r\n    var url = obj.url || getApiUrl(action),\r\n      // URL\r\n      type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n    if (isFunction$2(callback)) {\r\n      // Async\r\n      $$1.ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function (response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $$1.ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  }\r\n\r\n  // Get URL of current page\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  }\r\n\r\n  // Toggle search operator\r\n  function toggleSearchOperator(e, id, value) {\r\n    var el = e.currentTarget.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  }\r\n\r\n  // Toggle multi-column layout\r\n  function toggleLayout(el) {\r\n    var _bootstrap$Tooltip$ge6;\r\n    (_bootstrap$Tooltip$ge6 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge6.hide();\r\n    document.body.style.cursor = \"wait\";\r\n    fetch(sanitizeUrl(setLayout(el.dataset.url, el.dataset.layout))).then(response => response.text()).then(html => {\r\n      let $grid = $$1(\".ew-multi-column-grid\").html($$1(\"<div>\" + html + \"</div>\").find(\".ew-multi-column-grid\").html());\r\n      ew.initPage({\r\n        target: $grid[0]\r\n      });\r\n      $grid.trigger(\"load.ew\");\r\n    }).catch(error => _alert(error)).finally(() => document.body.style.cursor = \"default\");\r\n  }\r\n\r\n  // Copy inner text to clipboard\r\n  function copyToClipboard(source) {\r\n    var _source, _source2;\r\n    source = $$1.isString(source) ? document.querySelector(source) : source;\r\n    const str = ((_source = source) == null ? void 0 : _source.value) || ((_source2 = source) == null ? void 0 : _source2.innerText);\r\n    if (str) {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = str;\r\n      el.setAttribute(\"readonly\", \"\");\r\n      el.style.position = \"absolute\";\r\n      el.style.left = \"-9999px\";\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  /**\r\n   * Validators\r\n   */\r\n\r\n  // Check integer\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_SEPARATOR)) return false;\r\n    return checkNumber(object_value);\r\n  }\r\n\r\n  // Check number\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim();\r\n    // let re = new RegExp(\"^[+\\-\\d\\s%\" + escapeRegExChars(ew.DECIMAL_SEPARATOR) + escapeRegExChars(ew.GROUPING_SEPARATOR) + ew.CURRENCY_SYMBOL + \"]+$\");\r\n    // return re.test(object_value) && ew.parseNumber(object_value) !== null;\r\n    return ew.parseNumber(object_value) !== null;\r\n  }\r\n\r\n  // Escape regular expression chars\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  }\r\n\r\n  // Check range\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if ($$1.isNumber(min_value) || $$1.isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = ew.parseNumber(object_value);\r\n    }\r\n    if (min_value !== null && object_value < min_value) return false;\r\n    if (max_value !== null && object_value > max_value) return false;\r\n    return true;\r\n  }\r\n\r\n  // Check phone\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check zip\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check credit card\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n      checkdigit = 0;\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n    return checkdigit % 10 == 0;\r\n  }\r\n\r\n  // Check social security number\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check emails\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check email\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  }\r\n\r\n  // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  }\r\n\r\n  // Check URL\r\n  function checkUrl(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    try {\r\n      new URL(object_value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // Check by regular expression\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n    let doc, swal;\r\n    try {\r\n      // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n      [doc, swal] = [window.parent.document, window.parent.Swal];\r\n    } catch (e) {\r\n      // In case window.parent.document cannot be accessed\r\n      [doc, swal] = [window.document, window.Swal];\r\n    }\r\n    let p = (_arg$target = arg == null ? void 0 : arg.target) != null ? _arg$target : doc,\r\n      $div = $$1(p).find(\"div.ew-message-dialog.d-none\").first(),\r\n      msg = $div.length ? $div.text() : \"\"; // Text only\r\n    if ($$1.isString(arg)) msg = $$1(\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (type) {\r\n        let $alert = $div.find(\".alert-\" + type).toggleClass(\"alert-\" + type),\r\n          $heading = $alert.find(\".alert-heading\").detach(),\r\n          $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n        if ($alert[0]) {\r\n          let w = parseInt($content.css(\"width\"), 10); // Width specified\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          let $toast = showToast($alert.html(), type, $heading.html());\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n          return;\r\n        }\r\n      });\r\n    }\r\n    if ($$1.isString(arg)) {\r\n      return swal.fire({\r\n        ...ew.sweetAlertSettings,\r\n        html: arg\r\n      });\r\n    }\r\n  }\r\n\r\n  // Random number\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  }\r\n\r\n  // File upload\r\n  function upload(input) {\r\n    let $input = $$1(input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    let id = $input.attr(\"name\"),\r\n      nid = id.replace(/\\$/g, \"\\\\$\"),\r\n      tbl = $input.data(\"table\"),\r\n      multiple = $input.is(\"[multiple]\"),\r\n      $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n      $p = $input.closest(fieldContainerSelector),\r\n      $ft = $p.find(\"#ft_\" + nid),\r\n      $fn = $p.find(\"#fn_\" + nid),\r\n      $fa = $p.find(\"#fa_\" + nid),\r\n      $label = $p.find(\".ew-file-label\"),\r\n      label = $label.html();\r\n    let _done = function (e, data) {\r\n      if (data.result.files[0].error) return;\r\n      let name = data.result.files[0].name,\r\n        ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple)\r\n        // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n    let _deleted = function (e, data) {\r\n      let url = e.originalEvent.target.dataset.url,\r\n        params = getSearchParams(url),\r\n        fid = params.get(\"id\"),\r\n        name = params.get(fid);\r\n      if (name) {\r\n        let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [],\r\n          index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n    let _change = function (e, data) {\r\n      var _data$files;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) == null ? void 0 : _data$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      data.files.forEach(file => ar.push(file.name));\r\n      let cnt = $input.data(\"maxNumberOfFiles\");\r\n      if ($$1.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"));\r\n        return false;\r\n      }\r\n      let l = $input.data(\"size\");\r\n      if ($$1.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxFileLength\"));\r\n        return false;\r\n      }\r\n    };\r\n    let _confirmDelete = function (e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n    let _changed = function (e, data) {\r\n      var _data$files2, _data$result2;\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) == null ? void 0 : _data$files2.length) > 0 || ((_data$result2 = data.result) == null || (_data$result2 = _data$result2.files) == null ? void 0 : _data$result2.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    };\r\n    let _completed = function (e, data) {\r\n      // After download template rendered\r\n      let evt = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(evt);\r\n      initPdfObjects(evt);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n    let _added = function (e, data) {\r\n      var _data$files3;\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) == null ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    };\r\n    // let _send = function(e, data) { // Before each file upload request\r\n    //     console.log(data);\r\n    // };\r\n    let uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION),\r\n      _downloadTemplate = $$1.templates(\"#template-download\"),\r\n      _uploadTemplate = $$1.templates(\"#template-upload\"),\r\n      form = getForm(input),\r\n      $form = $$1(form),\r\n      readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\") || $input.prop(\"disabled\");\r\n    if (readonly && !$input.prop(\"disabled\")) $input.prop(\"disabled\", true); // Disable input button if readonly\r\n    const {\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    } = $input.data();\r\n    const formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    };\r\n    $input.fileupload(ew.deepAssign({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      filesContainer: $ft,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $dropzone,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n      },\r\n      formData,\r\n      readonly // Custom\r\n    }, ew.uploadOptions))\r\n    // .on(\"fileuploadsend\", _send)\r\n    .on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed).on('fileuploadadded', _added).on('fileuploadcompleted', _completed);\r\n    if ($fn.val()) {\r\n      $$1.ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function (result) {\r\n          if (result != null && result[id]) {\r\n            let done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $$1.Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n\r\n          if (readonly)\r\n            // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @returns {number}\r\n   */\r\n  function parseNumber(data) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.parse(data, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get numbering system\r\n   */\r\n  function getNumberingSystem() {\r\n    return ew.NUMBERING_SYSTEM || new Intl.NumberFormat(ew.LANGUAGE_ID).resolvedOptions().numberingSystem;\r\n  }\r\n  let DateTime = luxon.DateTime,\r\n    Interval = luxon.Interval;\r\n\r\n  /**\r\n   * Format data by DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string|Number|Date} data - Date\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {string}\r\n   */\r\n  function formatDateTime(data, format) {\r\n    let dt;\r\n    if ($$1.isString(data))\r\n      // SQL dates, times, and datetimes\r\n      dt = DateTime.fromSQL(data, {\r\n        zone: \"utc\"\r\n      }); // Do not change the time zone\r\n    else if ($$1.isNumber(data))\r\n      // Unix timestamps\r\n      dt = DateTime.fromSeconds(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof Date)\r\n      // JS Date Object\r\n      dt = DateTime.fromJSDate(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof DateTime)\r\n      // DateTime Object\r\n      dt = data;\r\n    return dt.toFormat(format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format time span\r\n   *\r\n   * @param {Date} start - JS start date/time\r\n   * @param {Date} end - JS end date/time\r\n   * @param {bool} allDay - Whether event is all day\r\n   * @returns {string}\r\n   */\r\n  function formatTimeSpan(start, end, allDay) {\r\n    let from = DateTime.fromJSDate(start, {\r\n        zone: \"utc\"\r\n      }),\r\n      to = DateTime.fromJSDate(end, {\r\n        zone: \"utc\"\r\n      });\r\n    if (to.isValid && to.equals(to.startOf(\"day\")))\r\n      // 12:00AM\r\n      to = to.minus(1); // Minus one millisecond => back to previous day\r\n    let interval = new Interval({\r\n      start: from,\r\n      end: to\r\n    });\r\n    if (interval.isValid) {\r\n      // Check if all day\r\n      let days = interval.count() / (24 * 60 * 60 * 1000);\r\n      allDay || (allDay = Number.isInteger(days) && days >= 1);\r\n    }\r\n    if (allDay) {\r\n      // All day => Show date only\r\n      if (interval.isValid && interval.count(\"days\") > 1 || from.isValid && to.isValid && from.startOf(\"day\") < to.startOf(\"day\")) return formatDateTime(from, ew.DATE_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT);else if (from.isValid && !end)\r\n        // No end date\r\n        return formatDateTime(from, ew.DATE_FORMAT);\r\n      return \"\";\r\n    } else {\r\n      // Not all day => Show date/time\r\n      if (from.isValid && to.isValid) return from.startOf(\"day\") < to.startOf(\"day\") ? formatDateTime(from, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) : formatDateTime(from, ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.TIME_FORMAT);else if (from.isValid) return formatDateTime(from, ew.TIME_FORMAT);\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Parse data to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date/Time string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {DateTime}\r\n   */\r\n  function parseDateTime(data, format) {\r\n    return DateTime.fromFormat(data, format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if data can be parsed to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {boolean}\r\n   */\r\n  function checkDate(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  // Check time (alias of checkDate)\r\n  function checkTime(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n\r\n  /**\r\n   * Format currency\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatCurrency(value, format) {\r\n    format || (format = ew.CURRENCY_FORMAT);\r\n    if (format.includes(\";\")) {\r\n      let formats = format.split(\";\");\r\n      format = value >= 0 ? formats[0] : formats[1];\r\n    }\r\n    format = format.replace(\"\", \"$\");\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format, {\r\n      locale,\r\n      currency: (ew.IS_RTL ? \"\\u200E\" : \"\") + ew.CURRENCY_SYMBOL\r\n    }); // Make sure the currency symbol position is not moved.\r\n  }\r\n\r\n  /**\r\n   * Format number\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatNumber(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.NUMBER_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format percent\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n  function formatPercent(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.PERCENT_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n  function initPage(e) {\r\n    var _e$target12;\r\n    var el = (_e$target12 = e == null ? void 0 : e.target) != null ? _e$target12 : document,\r\n      $el = $$1(el),\r\n      $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    ew.initPanels(el); // Init grid panels\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initSearchFilters(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $tables.each(setupTable); // Init tables\r\n    $el.find(\".ew-column-dropdown\").each(function () {\r\n      var _localStorage$getItem;\r\n      let table = this.dataset.table;\r\n      (_localStorage$getItem = localStorage.getItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\")) == null ? void 0 : _localStorage$getItem.split(\",\").forEach(field => $$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", true));\r\n      $$1(this).find(\".ew-dropdown-checkbox\").on(\"click\", function (e) {\r\n        let input = this.querySelector(\".ew-dropdown-check-input[data-field]\"),\r\n          field = input == null ? void 0 : input.dataset.field;\r\n        if (table && field) {\r\n          input.classList.toggle(\"ew-checked\");\r\n          $$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", !input.classList.contains(\"ew-checked\"));\r\n        }\r\n        localStorage.setItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\", Array.from(e.currentTarget.closest(\".dropdown-menu\").querySelectorAll(\".ew-dropdown-check-input[data-field]:not(.ew-checked)\"), el => el.dataset.field));\r\n      });\r\n    }).on(\"show.bs.dropdown\", function (e) {\r\n      let table = e.currentTarget.dataset.table,\r\n        inputs = e.currentTarget.querySelectorAll(\".ew-dropdown-check-input[data-field]\");\r\n      for (let input of inputs) {\r\n        let field = input.dataset.field;\r\n        input.classList.toggle(\"ew-checked\", !!$$1(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"']:not(.d-none)\")[0]);\r\n      }\r\n    });\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e);\r\n\r\n    // Report\r\n    var $rpt = $el.find(\".ew-report\");\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $$1(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $$1(this),\r\n          $div = $card.closest(\"[class^='col-']\"),\r\n          mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      });\r\n      // Group expand/collapse button\r\n      $rpt.find(\".ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    }\r\n\r\n    // Show message\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  }\r\n\r\n  // Redirect by HTTP GET or POST\r\n  function redirect(url, f, method, data) {\r\n    var _ew$vars;\r\n    let urls = (_ew$vars = ew.vars) != null && _ew$vars.login ? Array.from(Object.entries(ew.vars.login)).filter(entry => entry[0].endsWith(\"Url\")).map(entry => entry[1]) : [];\r\n    if (urls.includes(url)) {\r\n      // Known URLs\r\n      window.location = url;\r\n      return false;\r\n    }\r\n    let newUrl;\r\n    if (url.startsWith(\"http\")) {\r\n      newUrl = new URL(url);\r\n    } else if (url.startsWith(\"/\")) {\r\n      newUrl = new URL(url, location.protocol + \"//\" + location.host);\r\n    } else {\r\n      _alert(ew.language.phrase(\"IncorrectUrl\"));\r\n      return false;\r\n    }\r\n    let params = newUrl.searchParams;\r\n    if (data) params = mergeSearchParams(params, data);\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      const form = f || document.createElement(\"form\");\r\n      form.method = \"post\";\r\n      form.action = url.split(\"?\")[0];\r\n      document.body.appendChild(form);\r\n      params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      params.forEach((value, key) => {\r\n        const el = document.createElement(\"input\");\r\n        el.type = \"hidden\";\r\n        el.name = key;\r\n        el.value = ew.sanitize(value);\r\n        form.appendChild(el);\r\n      });\r\n      form.submit();\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Show/Hide password\r\n  function togglePassword(e) {\r\n    let $btn = $$1(e.currentTarget),\r\n      $input = $btn.closest(\".input-group\").find(\"input\"),\r\n      $i = $btn.find(\"i\");\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  }\r\n\r\n  // Re-order chart\r\n  function updateChart(el) {\r\n    let url = new URL(el.form.action),\r\n      $container = $$1(el).closest(\".ew-chart-top, .ew-chart-bottom\"),\r\n      $overlay = $$1(ew.overlayTemplate());\r\n    url.search = $$1(el.form).serialize();\r\n    $container.addClass(\"ew-loading\").append($overlay);\r\n    fetch(url.toString()).then(async response => {\r\n      let $html = $$1(\"<div>\" + (await response.text()) + \"</div>\"),\r\n        $new = $html.find(\".ew-chart-top, .ew-chart-bottom\").filter(\"[data-chart='\" + $container.data(\"chart\") + \"']\"),\r\n        $debug = $html.find(\".ew-debug\");\r\n      if ($new[0]) $container.replaceWith($new);\r\n      if ($debug[0]) $new.next(\".ew-debug\").replaceWith($debug);\r\n    }).finally(() => $container.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Check if larger than mediumn screen width (not mobile)\r\n  function isMediumScreen() {\r\n    return window.matchMedia(ew.screenMediaQuery).matches;\r\n  }\r\n\r\n  // Check if mobile\r\n  function isMobile() {\r\n    return ew.IS_MOBILE || !isMediumScreen();\r\n  }\r\n\r\n  /**\r\n   * Refresh page\r\n   *\r\n   * @param {Promise} promise Promise returned by fetch()\r\n   * @param {string} context CSS class name of context\r\n   * @returns {Promise}\r\n   */\r\n  function refresh(promise, context) {\r\n    var _context;\r\n    (_context = context) != null ? _context : context = \".ew-card.ew-grid\";\r\n    context = context.startsWith(\".\") || context.startsWith(\"#\") ? context : \".\" + context;\r\n    let target = document.querySelector(context + \", .ew-multi-column-grid, .ew-view-form, .ew-edit-form, .ew-calendar, ew-dashboard, main.ew-no-record\"),\r\n      dashboard = document.querySelector(\".ew-dashboard\");\r\n    if (!target) return;\r\n    let $overlay = $$1(ew.overlayTemplate()),\r\n      $target = $$1(target).addClass(\"ew-loading\").toggleClass(\"overlay-wrapper\", !target.classList.contains(\"card\")).append($overlay);\r\n    return promise.then(async response => {\r\n      if (!(response instanceof Response)) return response;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n      // Handle JSON\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n          validation = result.validation,\r\n          error = getError(result),\r\n          form = target.querySelector(\".ew-form\"),\r\n          f = ew.forms.get(form);\r\n        if (dashboard) {\r\n          // Refresh dashboard items\r\n          for (let key in result) {\r\n            $$1(\"#\" + key).find(\".card-body\").html(''); // Clear content first\r\n            $$1(\"#\" + key).find(\"[data-card-widget='card-refresh']\").CardRefresh('load');\r\n          }\r\n        } else if (f && validation) {\r\n          // Validation errors\r\n          for (let [key, value] of Object.entries(validation)) {\r\n            key = parseInt(key, 10);\r\n            if ($$1.isNumber(key) && $$1.isObject(value)) {\r\n              form.dataset.rowindex = key;\r\n              for (let [fldvar, msg] of Object.entries(value)) f.addCustomError(fldvar, msg, key);\r\n            } else if ($$1.isString(value)) {\r\n              f.addCustomError(key, value);\r\n            }\r\n          }\r\n          f.focus();\r\n        }\r\n        if (error) showToast(error);else if ($$1.isString(result.warningMessage)) showToast(result.warningMessage, \"warning\");else if ($$1.isString(result.message)) showToast(result.message, \"body\");else if ($$1.isString(result.successMessage)) showToast(result.successMessage, \"success\");\r\n        return false; // Return false\r\n      }\r\n      // Handle HTML\r\n      let html = await response.text(),\r\n        url = new URL(response.url),\r\n        selectors = [\".ew-message-dialog\", \".ew-chart-top\", \".ew-chart-bottom\", \".ew-debug .card-body\", \".ew-timer\", \".ew-dashboard\"];\r\n      if (url.searchParams.get(\"layout\") == \"false\") {\r\n        html = \"<div>\" + html + \"</div>\";\r\n        url.searchParams.delete(\"layout\");\r\n      }\r\n      url.searchParams.delete(\"rnd\");\r\n      url.searchParams.delete(\"action\");\r\n      html = getContent(html, true); // Keep scripts\r\n      let $html = $$1(\"<div>\" + html + \"</div>\"); // New HTML\r\n      if (!target.closest(\".ew-dashboard\")) {\r\n        // Not dashboard\r\n        selectors.unshift(\".ew-toolbar\"); // Update toolbar also\r\n        if (samePath(url, currentUrl) && currentUrl.toString() != url.toString())\r\n          // Only update browser URL if same page or view/edit page\r\n          window.history.pushState(null, \"\", url.toString()); // Update browser URL\r\n      }\r\n\r\n      if ($html.find(\"main.ew-no-record\")[0] || $target.is(\"main.ew-no-record\")) {\r\n        // New or old HTML contains no records => update <main> element\r\n        selectors = [\".ew-ext-search-form\", \"main\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-view-form\")) {\r\n        // View page\r\n        selectors = [\".ew-view-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-edit-form\")) {\r\n        // Edit page\r\n        selectors = [\".ew-edit-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-multi-column-grid\")) {\r\n        // Multi-column page\r\n        selectors = [\".ew-ext-search-form\", \".ew-multi-column-grid\", ...selectors];\r\n      } else {\r\n        // List/Report page\r\n        selectors = [\"#ew-filter-list\", \".ew-ext-search-form\", context + \" .card-header\", context + \" .card-body\", context + \" .card-footer\", ...selectors];\r\n      }\r\n      selectors.forEach(selector => $$1(selector).each((i, el) => {\r\n        let $old = $$1(el),\r\n          $new = $html.find(selector).eq(i);\r\n        if ($old[0] && $new[0]) {\r\n          delete el.dataset.isset; // Reset\r\n          $old.html($new.html()); // Replace inner HTML\r\n          $old.attr(\"class\", $new.attr(\"class\")); // Update class name\r\n        }\r\n\r\n        if (selector == \".ew-toolbar\") {\r\n          let e = {\r\n            target: el\r\n          };\r\n          initIcons(e);\r\n          initSearchFilters(e);\r\n        } else if (selector == \".ew-ext-search-form\") {\r\n          ew.initForms({\r\n            target: $new[0]\r\n          });\r\n          let $tmpl = $new.find(\"#navbar-basic-search\");\r\n          if ($tmpl[0]) {\r\n            let html = $tmpl.render(null, ew.jsRenderHelpers),\r\n              $html = $$1(html),\r\n              $search = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH),\r\n              $searchType = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE);\r\n            if ($search.val() != $$1(\"#\" + ew.TABLE_BASIC_SEARCH).val() || $searchType.val() != $$1(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE).val()) $$1(\".nav-item.navbar-basic-search\").replaceWith($html);\r\n          }\r\n          $old.find(\".ew-search-operator .form-select.ew-operator-select\").each((i, el) => searchOperatorChange(el));\r\n        } else if (selector == \".ew-message-dialog\") {\r\n          if (!$new.hasClass(\"d-none\")) $old.html($new.html()); // Replace inline html\r\n        }\r\n      }));\r\n\r\n      selectors.filter(selector => selector != \".ew-message-dialog\").forEach(selector => $html.find(selector).remove()); // Remove HTML used (except message)\r\n      removeScript(\"refresh\"); // Remove old scripts\r\n      executeScript($html.html(), \"refresh\"); // Execute scripts, e.g. custom template\r\n      let e = $$1.Event({\r\n        type: \"load.ew\",\r\n        target\r\n      });\r\n      ew.initPage(e);\r\n      target.querySelectorAll(\".btn-group\").forEach(el => {\r\n        var _bootstrap$Tooltip$ge7;\r\n        return (_bootstrap$Tooltip$ge7 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge7.update();\r\n      }); // Update tooltip position or it may obscure other buttons\r\n      $$1(\".toast.show\").toast(\"dispose\"); // Hide toasts\r\n      showMessage({\r\n        target: $html\r\n      }); // Show message, if any\r\n      $document$1.trigger(e);\r\n      $document$1.trigger($$1.Event({\r\n        type: \"refresh.ew\",\r\n        target\r\n      }));\r\n    }).finally(() => $target.removeClass(\"ew-loading\").find($overlay).remove());\r\n  }\r\n\r\n  // Layout\r\n  var _fixLayoutHeightTimer;\r\n\r\n  // Fix layout height\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n    _fixLayoutHeightTimer = $$1.later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  }\r\n\r\n  // Add user event handlers\r\n  function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n    if (fields) {\r\n      for (const [fldVar, events] of Object.entries(fields)) $$1('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    AjaxLookup,\n    AutoSuggest,\n    Field,\n    Form,\n    Select2Defaults: Defaults,\n    Select2Utils: Utils,\n    _export,\n    addEventHandlers,\n    addGridRow,\n    addOptionDialogShow,\n    addScript,\n    ajax,\n    alert: _alert,\n    applyTemplate,\n    autoFill,\n    buildUrl,\n    checkByRegEx,\n    checkCreditCard,\n    checkDate,\n    checkEmail,\n    checkEmails,\n    checkGuid,\n    checkInteger,\n    checkNumber,\n    checkPhone,\n    checkRange,\n    checkSsn,\n    checkTime,\n    checkUrl,\n    checkZip,\n    clearDelete,\n    clearError,\n    clearOptions,\n    clearSelected,\n    clickDelete,\n    confirmDelete,\n    convertToBool,\n    copyToClipboard,\n    createFilter,\n    createModalLookup,\n    createSearchParams,\n    createSelect,\n    currentPage,\n    currentUrl,\n    deleteGridRow,\n    deleteSearchParam,\n    disable2FA,\n    displayValue,\n    emailDialogShow,\n    enable2FA,\n    escapeRegExChars,\n    executeScript,\n    export: _export,\n    exportCustom,\n    exportEmail,\n    fetch: _fetch,\n    fieldContainerSelector,\n    fileDownload,\n    filter,\n    fixLayoutHeight,\n    formatCurrency,\n    formatDateTime,\n    formatNumber,\n    formatPercent,\n    formatTimeSpan,\n    forms,\n    getAncestorBy,\n    getApiUrl,\n    getContent,\n    getElement,\n    getElements,\n    getError,\n    getForm,\n    getId,\n    getNumberingSystem,\n    getOptionTexts,\n    getOptionValue,\n    getOptionValues,\n    getOptions,\n    getQueryBuilderFilterInput,\n    getQueryBuilderFilterValidation,\n    getQueryBuilderValueSetter,\n    getSearchParam,\n    getSearchParams,\n    getUserParams,\n    getValue,\n    getchartParams,\n    hasFormData,\n    hasValue,\n    headerCase,\n    htmlDecode,\n    htmlEncode,\n    importDialogShow,\n    initExportLinks,\n    initForms,\n    initIcons,\n    initLightboxes,\n    initMultiSelectCheckboxes,\n    initPage,\n    initPasswordOptions,\n    initPdfObjects,\n    initSearchFilters,\n    initTooltips,\n    inlineAction,\n    isAutoSuggest,\n    isBooleanCheckbox,\n    isFilter,\n    isFunction: isFunction$2,\n    isHidden,\n    isHiddenTextArea,\n    isMaskedPassword,\n    isMediumScreen,\n    isMobile,\n    isModalLookup,\n    isNativeSelectOne,\n    isSelect2,\n    isTextbox,\n    keySelected,\n    lazyLoad,\n    mergeSearchParams,\n    modalDialogHide,\n    modalDialogShow,\n    newOption,\n    onError,\n    optionHtml,\n    optionsHtml,\n    parseDate: parseDateTime,\n    parseDateTime,\n    parseJson,\n    parseNumber,\n    parseTime: parseDateTime,\n    parseUrl,\n    prompt: _prompt,\n    random,\n    redirect,\n    refresh,\n    removeScript,\n    removeSpaces,\n    samePath,\n    sameString,\n    sameText,\n    sanitizeUrl,\n    scrollIntoView,\n    searchOperatorChange,\n    selectAll,\n    selectAllKeys,\n    selectKey,\n    selectOption,\n    sendOTP,\n    setActiveUser,\n    setFocus,\n    setInvalid,\n    setLanguage,\n    setLayout,\n    setSearchParam,\n    setSearchParams,\n    setSearchType,\n    setSessionTimer,\n    setValid,\n    setupGrid,\n    setupTable,\n    showBackupCodes,\n    showDrillDown,\n    showMessage,\n    showToast,\n    sort,\n    stripScript,\n    submitAction,\n    toast,\n    toggleChat,\n    toggleGroup,\n    toggleLayout,\n    togglePassword,\n    toggleSearchOperator,\n    tooltip,\n    updateChart,\n    updateDropdownPosition,\n    updateOptions,\n    updateSelected,\n    upload,\n    valueChanged,\n    valueSeparator\n  };\n\n  /**\r\n   * Create FullCalendar object\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {Object} options - Calendar options\r\n   * @param {Object} options.fullCalendarOptions - FullCalendar options\r\n   * @param {Object} options.eventPopoverOptions - Event popover options\r\n   * @param {HTMLElement} dropdown - HTML element\r\n   * @returns calendar object\r\n   */\r\n  function fullCalendar(el, options, dropdown) {\r\n    let {\r\n        ajax,\r\n        updateTable,\r\n        eventFields,\r\n        addUrl,\r\n        viewUrl,\r\n        editUrl,\r\n        deleteUrl,\r\n        copyUrl,\r\n        fullCalendarOptions,\r\n        eventPopoverOptions\r\n      } = options,\r\n      calendar;\r\n\r\n    // Remove addUrl in options\r\n    delete options.addUrl;\r\n\r\n    // Update event from server side JSON response\r\n    let processJson = data => {\r\n      //console.log(result);\r\n      let convertValue = (key, value) => {\r\n        let match;\r\n        if (typeof value == \"string\" && (match = value.match(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}:\\d{2})/)))\r\n          // Make sure ISO date\r\n          return match[1] + \"T\" + match[2];\r\n        if (key == \"allDay\")\r\n          // Make sure Boolean\r\n          return ew.convertToBool(value);else if (key == \"url\" && !value) return \"\"; // Make sure not null\r\n        else if (key == \"display\" && !value) return \"auto\"; // Make sure not null\r\n        else if (key == \"classNames\" && value && $$1.isString(value))\r\n          // Make sure return as array\r\n          return value.replace(/\\s+/g, \" \").split(\" \");else if (key == \"classNames\" && !value)\r\n          // Make sure return as array\r\n          return [\"\"];else if (key == \"groupId\" && !value)\r\n          // Make sure return as stringy\r\n          return \"\";else if (key == \"description\" && !value) return \"\"; // Make sure not null\r\n        else return value;\r\n      };\r\n      if (data.success) {\r\n        let action = data.action,\r\n          events = data[updateTable];\r\n        if (!Array.isArray(events)) events = [events];\r\n        for (let event of events) {\r\n          for (let [key, name] of Object.entries(eventFields)) {\r\n            // Normalize keys in event\r\n            if (key != name && name !== null && name in event) {\r\n              event[key] = event[name];\r\n              delete event[name];\r\n            }\r\n          }\r\n          if (action == ew.API_DELETE_ACTION) {\r\n            var _calendar$getEventByI;\r\n            // Remove deleted event\r\n            (_calendar$getEventByI = calendar.getEventById(event.id)) == null ? void 0 : _calendar$getEventByI.remove();\r\n          } else if (action == ew.API_ADD_ACTION) {\r\n            // Add/Copy event\r\n            for (let name in event) {\r\n              // Check new properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = event[name];\r\n              if (key && value !== undefined)\r\n                // Value can be null\r\n                event[key] = convertValue(key, value); // Convert value\r\n            }\r\n\r\n            calendar.addEvent(event);\r\n          } else {\r\n            // Update event\r\n            let curEvent = calendar.getEventById(event.id);\r\n            let groupId = event.groupId;\r\n            for (let name in event) {\r\n              // Update properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                value = convertValue(key, event[name]);\r\n              if (key && value !== undefined) {\r\n                // Value can be null\r\n                value = convertValue(key, value); // Convert value\r\n                if (key == \"start\") curEvent.setStart(value);else if (key == \"end\") curEvent.setEnd(value);else if (key == \"allDay\") curEvent.setAllDay(value);else if (key == \"description\") curEvent.setExtendedProp(key, value);else if (key != \"id\" && !groupId)\r\n                  // setProp will change all related events, https://fullcalendar.io/docs/Event-setProp\r\n                  curEvent.setProp(key, value);\r\n              } else if (value) {\r\n                curEvent.setExtendedProp(name, value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    // Process event\r\n    let processEvent = info => {\r\n      let event = info.event,\r\n        events = [event, ...info.relatedEvents],\r\n        apiAction = event.id ? ew.API_EDIT_ACTION : ew.API_ADD_ACTION;\r\n      events.forEach(event => processRequest(event, apiAction).then(data => {\r\n        if (!data.success) {\r\n          // Revert if not success\r\n          info.revert();\r\n        } else {\r\n          // Update event\r\n          processJson(data);\r\n        }\r\n      }).catch(err => {\r\n        // Revert if error\r\n        console.log(err);\r\n        info.revert();\r\n      }));\r\n    };\r\n\r\n    // Process request\r\n    let processRequest = (event, apiAction) => new Promise((resolve, reject) => {\r\n      // Set up post data\r\n      let obj = event.toPlainObject({\r\n          collapseExtendedProps: true\r\n        }),\r\n        data = {};\r\n      // Event fields\r\n      for (let [key, name] of Object.entries(eventFields)) {\r\n        if (key in obj) {\r\n          let val = obj[key];\r\n          name || (name = key);\r\n          if (val instanceof Date)\r\n            // Handle date field, need to convert to ISO string\r\n            val = val.toISOString().slice(0, -5).replace(/T/, \" \"); // Assume UTC\r\n          else if (typeof val == \"string\" && val.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/)) val = val.substring(0, 19).replace(/T/, \" \");else if (typeof val === \"boolean\")\r\n            // Handle boolean field\r\n            val = val ? \"1\" : \"0\";else if (key == \"classNames\") val = Array.isArray(val) ? val.join(\" \") : val; // Convert array to string\r\n          data[name] = val;\r\n          delete obj[key];\r\n        }\r\n      }\r\n      data = {\r\n        ...data,\r\n        ...obj\r\n      };\r\n      // Post to Event Table add/edit/delete API\r\n      let apiUrl = apiAction == ew.API_ADD_ACTION ? ew.getApiUrl([apiAction, updateTable]) : ew.getApiUrl([apiAction, updateTable, event.id]);\r\n      $$1.post(apiUrl, data, data => resolve(data)).fail(err => reject(err));\r\n    });\r\n\r\n    // Get field parameter\r\n    let getFldParm = name => Object.keys(currentTable.fields).find(key => currentTable.fields[key].name == name);\r\n\r\n    // Add menu ID to URL\r\n    let urlAddId = (url, id) => {\r\n      let ar = url.split(\"?\");\r\n      ar[0] += id ? (!ar[0].endsWith(\"/\") ? \"/\" : \"\") + id : \"\";\r\n      return ar.join(\"?\");\r\n    };\r\n\r\n    // Add/Copy event\r\n    let addEventDialogShow = data => {\r\n      let url = addUrl,\r\n        params = new URLSearchParams();\r\n      if ($$1.isObject(data) && (data.startStr || data.endStr /* || data.allDay */)) {\r\n        let startFld = getFldParm(eventFields[\"start\"]),\r\n          endFld = getFldParm(eventFields[\"end\"]) /*,\r\n                                                  allDayFld = getFldParm(eventFields[\"allDay\"])*/;\r\n        if (startFld && data.startStr) params.set(startFld, data.startStr);\r\n        if (endFld && data.endStr) params.set(endFld, data.endStr);\r\n        // if (allDayFld && data.allDay)\r\n        //     params.set(allDayFld, \"1\");\r\n      }\r\n\r\n      if ($$1.isString(data) && data.match(/^\\d+$/))\r\n        // Copy\r\n        url = urlAddId(url, data);\r\n      let qs = params.toString();\r\n      url += qs ? \"?\" + qs : \"\";\r\n      ew.modalDialogShow({\r\n        url: url,\r\n        callback: ajax ? processJson : null,\r\n        json: ajax,\r\n        btn: ew.language.phrase(\"AddBtn\"),\r\n        caption: ew.language.phrase(\"AddLink\")\r\n      });\r\n    };\r\n\r\n    // View event\r\n    let viewEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(viewUrl, id),\r\n      callback: ajax ? processJson : null,\r\n      json: ajax,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"ViewLink\")\r\n    });\r\n\r\n    // Edit event\r\n    let editEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(editUrl, id),\r\n      callback: ajax ? processJson : null,\r\n      json: ajax,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"EditLink\")\r\n    });\r\n\r\n    // Delete event\r\n    let deleteEvent = id => ew.prompt(ew.language.phrase(\"DeleteEventConfirm\"), result => {\r\n      if (result) ew.modalDialogShow({\r\n        url: ew.setSearchParams(urlAddId(deleteUrl, id), {\r\n          action: \"delete\"\r\n        }),\r\n        callback: ajax ? processJson : null,\r\n        json: ajax\r\n      });\r\n    });\r\n\r\n    // Add custom add button\r\n    if (addUrl) {\r\n      fullCalendarOptions.customButtons = {\r\n        add: {\r\n          text: ew.language.phrase(\"AddEvent\"),\r\n          click: addEventDialogShow\r\n        }\r\n      };\r\n      fullCalendarOptions.headerToolbar.left += \" add\";\r\n    }\r\n\r\n    // Get or create popover\r\n    let getOrCreatePopover = info => {\r\n      let config = {\r\n        ...bootstrap.Popover.Default,\r\n        ...eventPopoverOptions,\r\n        trigger: \"manual\" // Set trigger to \"manual\"\r\n      };\r\n\r\n      let popover = bootstrap.Popover.getOrCreateInstance(info.el, config),\r\n        template = Array.from(document.querySelectorAll(\"script[data-name='event-popover']\")).sort((a, b) => {\r\n          a = parseInt(a.dataset.seq, 10) || 0;\r\n          b = parseInt(b.dataset.seq, 10) || 0;\r\n          return a - b;\r\n        }).shift(),\r\n        tmpl = $$1.templates(template.text);\r\n      info.event.setExtendedProp(\"timeSpan\", ew.formatTimeSpan(info.event.start, info.event.end, info.event.allDay)); // Add extended property \"timeSpan\"\r\n      let content = tmpl.render(info.event, ew.jsRenderHelpers).trim();\r\n      if (content) {\r\n        var _Array$from$find$repl, _Array$from$find;\r\n        let popoverClass = (_Array$from$find$repl = (_Array$from$find = Array.from(info.el.classList.values()).find(name => name.match(/^event-([\\w+]+)\\b/))) == null ? void 0 : _Array$from$find.replace(/^event-/, \"popover-\")) != null ? _Array$from$find$repl : \"popover-default\";\r\n        popover._templateFactory = null; // Make sure popover create tip again from _config\r\n        popover._config.title = info.event.title;\r\n        popover._config.content = content;\r\n        popover._config.customClass += (popover._config.customClass ? \" \" : \"\") + \"ew-event-popover \" + popoverClass;\r\n        return popover;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    // Context menu\r\n    let generateGetBoundingClientRect = info => {\r\n        let x = 0,\r\n          y = 0;\r\n        if (info) {\r\n          let rect = info.el.getBoundingClientRect(),\r\n            evt = info.jsEvent;\r\n          x = rect.left + evt.offsetX, y = rect.top + evt.offsetY;\r\n        }\r\n        return () => ({\r\n          width: 0,\r\n          height: 0,\r\n          top: y,\r\n          right: x,\r\n          bottom: y,\r\n          left: x\r\n        });\r\n      },\r\n      virtualElement = {\r\n        getBoundingClientRect: generateGetBoundingClientRect()\r\n      },\r\n      bsDropdown;\r\n    if (dropdown && options.useContextMenu && (viewUrl || editUrl || addUrl && copyUrl || deleteUrl)) {\r\n      dropdown.dataset.bsToggle = \"dropdown\"; // For clearing dropdown menu\r\n      document.addEventListener(\"keydown\", event => event.key !== \"Escape\" || bootstrap.Dropdown.clearMenus());\r\n      bsDropdown = bootstrap.Dropdown.getOrCreateInstance(dropdown, {\r\n        reference: virtualElement\r\n      });\r\n      bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => item.addEventListener(\"click\", e => {\r\n        let dataset = e.currentTarget.dataset,\r\n          action = dataset.action,\r\n          id = dataset.eventId;\r\n        if (action && id) {\r\n          if (action == \"view\" && viewUrl) viewEventDialogShow(id);else if (action == \"edit\" && editUrl) editEventDialogShow(id);else if (action == \"copy\" && addUrl && copyUrl)\r\n            // Copy\r\n            addEventDialogShow(id);else if (action == \"delete\" && deleteUrl) deleteEvent(id);\r\n        }\r\n      }));\r\n    }\r\n\r\n    // Options\r\n    let opts = ew.deepAssign(fullCalendarOptions, {\r\n      // events\r\n      //eventDragStart: info => console.log(info),\r\n      //eventDragStop: info => console.log(info),\r\n      drop: function (info) {\r\n        // Remove element\r\n        let checkbox = document.getElementById(\"remove-event\");\r\n        if (checkbox.checked) info.draggedEl.parentNode.removeChild(info.draggedEl);\r\n      },\r\n      select: event => addUrl && addEventDialogShow(event),\r\n      eventReceive: processEvent,\r\n      // Event created\r\n      eventDragStart: info => {\r\n        var _bootstrap$Popover$ge;\r\n        return (_bootstrap$Popover$ge = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge.hide();\r\n      },\r\n      eventDrop: processEvent,\r\n      // Event changed (Drag / Drop)\r\n      eventResize: processEvent,\r\n      // Event changed (Resize)\r\n      eventClick: info => {\r\n        // Event click\r\n        info.jsEvent.preventDefault();\r\n        if (info.jsEvent.button == 2) {\r\n          // Right click\r\n          let allowed = info.event.extendedProps[\"_view\"] || info.event.extendedProps[\"_edit\"] || info.event.extendedProps[\"_copy\"] || info.event.extendedProps[\"_delete\"];\r\n          if (bsDropdown && allowed) {\r\n            var _bootstrap$Popover$ge2;\r\n            (_bootstrap$Popover$ge2 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge2.hide();\r\n            bsDropdown.hide();\r\n            bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => {\r\n              item.dataset.eventId = info.event.id;\r\n              item.classList.toggle(\"d-none\", !options[item.dataset.action + \"Url\"] || !info.event.extendedProps[\"_\" + item.dataset.action]); // Check event permission\r\n            });\r\n\r\n            if (bsDropdown._menu.querySelectorAll(\".dropdown-item:not(.d-done)\").length) {\r\n              virtualElement.getBoundingClientRect = generateGetBoundingClientRect(info);\r\n              bsDropdown.show();\r\n            }\r\n          }\r\n        } else if (info.event.url) {\r\n          window.open(info.event.url);\r\n        } else if (options.usePopover && eventPopoverOptions.trigger.match(/\\bclick\\b/)) {\r\n          var _getOrCreatePopover;\r\n          (_getOrCreatePopover = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover.toggle();\r\n        } else if (options.showViewPageOnEventClick) {\r\n          viewEventDialogShow(info.event.id);\r\n        }\r\n      },\r\n      eventMouseEnter: info => {\r\n        var _bsDropdown, _getOrCreatePopover2;\r\n        if ((_bsDropdown = bsDropdown) != null && _bsDropdown._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (options.popoverViews.includes(info.view.type) && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_getOrCreatePopover2 = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover2.show();\r\n      },\r\n      eventMouseLeave: info => {\r\n        var _bsDropdown2, _bootstrap$Popover$ge3;\r\n        if ((_bsDropdown2 = bsDropdown) != null && _bsDropdown2._isShown(bsDropdown._menu) /* && bsDropdown._element.dataset.eventId == info.event.id*/) return;\r\n        if (options.popoverViews.includes(info.view.type) && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_bootstrap$Popover$ge3 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge3.hide();\r\n      }\r\n    });\r\n\r\n    // Trigger \"calendar\" event\r\n    let args = {\r\n      element: el,\r\n      options: opts\r\n    };\r\n    $$1(document).trigger(\"calendar\", [args]);\r\n\r\n    // Create calendar\r\n    calendar = new window.FullCalendar.Calendar(el, args.options);\r\n\r\n    // Return calendar\r\n    return calendar;\r\n  }\n\n  var fullCalendar$1 = {\n    __proto__: null,\n    fullCalendar\n  };\n\n  /**\r\n   * Show dialog for push notification\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of web push API\r\n   * @param {MouseEvent} args.evt - Mouse event\r\n   * @returns false\r\n   */\r\n  async function pushNotificationDialogShow(args) {\r\n    let $dlg = ew$1.pushDialog || $$1(\"#ew-push-notification-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $$1(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n    if (!$dlg[0]) {\r\n      console.log(\"DIV #ew-push-notificatoin-dialog not found\");\r\n      return false;\r\n    }\r\n    if (!args.url) {\r\n      // No API URL\r\n      console.log(\"Missing URL of Web Push API\");\r\n      return false;\r\n    }\r\n    let target = args.evt.currentTarget,\r\n      // Button\r\n      $form = $$1(target.form),\r\n      $f = $dlg.find(\".modal-body form\"),\r\n      frm = $f.data(\"form\");\r\n    $f.data(\"all\", false); // Reset\r\n    if (!$form.find(\"input[name='key_m[]']:checked\")[0]) {\r\n      // No keys selected\r\n      let result = await ew$1.prompt(ew$1.language.phrase(\"SendPushNotificationsToAll\"), bool => bool); // Callback returns result as boolean\r\n      $f.data(\"all\", result);\r\n      if (!result)\r\n        // Cancelled\r\n        return;\r\n    }\r\n    if (!frm) {\r\n      frm = new ew$1.FormBuilder().setId($f.attr(\"id\")).addFields([[\"title\", ew$1.Validators.required(ew$1.language.phrase(\"PushNotificationFormTitle\"))], [\"body\", ew$1.Validators.required(ew$1.language.phrase(\"PushNotificationFormBody\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = [$f.serialize(), $f.data(\"all\") ? \"\" : $form.find(\"input[name='key_m[]']:checked\").serialize()].join(\"&\");\r\n        $$1.post(args.url, data, result => {\r\n          var _result$error;\r\n          if (Array.isArray(result)) {\r\n            let successes = result.reduce((acc, cur) => acc + (cur.success ? 1 : 0), 0),\r\n              failures = result.length - successes;\r\n            if (successes > 0 && failures == 0) ew$1.alert(ew$1.language.phrase(\"PushNotificationSuccess\").replace(\"%s\", successes), \"success\");else if (successes == 0 && failures > 0) ew$1.alert(ew$1.language.phrase(\"PushNotificationFailure\").replace(\"%f\", failures));else if (successes == 0 && failures == 0) ew$1.alert(ew$1.language.phrase(\"NoSubscriptions\").replace(\"%f\", failures), \"primary\");else ew$1.alert(ew$1.language.phrase(\"PushNotificationSent\").replace(\"%s\", successes).replace(\"%f\", failures), \"primary\");\r\n          } else if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            ew$1.alert(result.error.description);\r\n          }\r\n        });\r\n        return true;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n    ew$1.pushDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr || target.dataset.caption).end().modal(\"show\");\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check if push notification and service workers are supported by browser\r\n   */\r\n  function isPushNotificationSupported() {\r\n    return \"serviceWorker\" in navigator && \"PushManager\" in window;\r\n  }\r\n\r\n  /**\r\n   * Base 64 to Unit8Array\r\n   */\r\n  function urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4),\r\n      base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\"),\r\n      rawData = window.atob(base64),\r\n      outputArray = new Uint8Array(rawData.length);\r\n    for (let i = 0; i < rawData.length; ++i) outputArray[i] = rawData.charCodeAt(i);\r\n    return outputArray;\r\n  }\r\n\r\n  /**\r\n   * Send subscription to server\r\n   */\r\n  async function sendSubscriptionToServer(subscription, url) {\r\n    const key = subscription.getKey(\"p256dh\"),\r\n      token = subscription.getKey(\"auth\"),\r\n      contentEncoding = (PushManager.supportedContentEncodings || [\"aesgcm\"])[0];\r\n    let formData = new FormData();\r\n    formData.set(\"endpoint\", subscription.endpoint);\r\n    formData.set(\"publicKey\", key ? btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null);\r\n    formData.set(\"authToken\", token ? btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null);\r\n    formData.set(\"contentEncoding\", contentEncoding);\r\n    let response = await ew$1.fetch(url, {\r\n      method: \"POST\",\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n\r\n  /**\r\n   * Create subscription and send to server\r\n   * @returns Promise that resolves to a PushSubscription object\r\n   */\r\n  async function createSubscription() {\r\n    var _result$error2;\r\n    let url = ew$1.getApiUrl([ew$1.API_PUSH_NOTIFICATION_ACTION, ew$1.API_PUSH_NOTIFICATION_SUBSCRIBE]),\r\n      serviceWorkerReg = await navigator.serviceWorker.ready,\r\n      subscription = await serviceWorkerReg.pushManager.subscribe({\r\n        userVisibleOnly: true,\r\n        applicationServerKey: urlBase64ToUint8Array(ew$1.PUSH_SERVER_PUBLIC_KEY)\r\n      }),\r\n      result = await sendSubscriptionToServer(subscription, url);\r\n    if (result != null && (_result$error2 = result.error) != null && _result$error2.description) ew$1.alert(result.error.description);\r\n    return result.success ? subscription : null;\r\n  }\r\n\r\n  /**\r\n   * Get subscription\r\n   */\r\n  async function getSubscription() {\r\n    let serviceWorkerReg = await navigator.serviceWorker.ready;\r\n    return serviceWorkerReg.pushManager.getSubscription();\r\n  }\r\n\r\n  /**\r\n   * Set subscription\r\n   * @param {PushSubscription} subscription\r\n   */\r\n  function setSubscription(subscription) {\r\n    let $btn = $$1(\"#subscribe-notification\").toggleClass(\"ew-enable-notification\", !subscription).removeClass(\"disabled\");\r\n    $btn.find(\"i\").toggleClass(\"fa-bell\", !subscription).toggleClass(\"fa-bell-slash\", !!subscription);\r\n    let inst = bootstrap.Tooltip.getInstance($btn[0]);\r\n    if (inst) inst._config.title = ew$1.language.phrase(subscription ? \"DisableNotifications\" : \"EnableNotifications\");\r\n  }\r\n\r\n  /**\r\n   * Subscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function subscribeNotification() {\r\n    if (Notification.permission !== \"denied\" && !ew$1.IS_SYS_ADMIN) {\r\n      // Support non system administrator\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        if (Notification.permission === \"granted\") {\r\n          var _await$getSubscriptio, _document$getElementB;\r\n          setSubscription((_await$getSubscriptio = await getSubscription()) != null ? _await$getSubscriptio : await createSubscription());\r\n          if (!((_document$getElementB = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB.classList.contains(\"ew-enable-notification\"))) ew$1.showToast(ew$1.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        } else if (Notification.permission === \"default\" && (await Notification.requestPermission()) == \"granted\") {\r\n          var _document$getElementB2;\r\n          setSubscription(await createSubscription());\r\n          if (!((_document$getElementB2 = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB2.classList.contains(\"ew-enable-notification\"))) ew$1.showToast(ew$1.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew$1.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Check subscription\r\n   *\r\n   * @returns true\r\n   */\r\n  async function checkSubscription() {\r\n    $$1(\"#subscribe-notification\").tooltip();\r\n    if (Notification.permission == \"granted\") setSubscription(await getSubscription());else setSubscription(null);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n  async function unsubscribeNotification() {\r\n    ew$1.prompt({\r\n      html: ew$1.language.phrase(\"DisableNotificationsConfirm\")\r\n    }, async res => {\r\n      if (!res) return;\r\n      document.body.style.cursor = \"wait\";\r\n      try {\r\n        var _result$error3;\r\n        let subscription = await getSubscription();\r\n        await subscription.unsubscribe();\r\n        let url = ew$1.getApiUrl([ew$1.API_PUSH_NOTIFICATION_ACTION, ew$1.API_PUSH_NOTIFICATION_DELETE]),\r\n          result = await sendSubscriptionToServer(subscription, url); // Delete subscription\r\n        if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n          ew$1.alert(result.error.description);\r\n          return false;\r\n        }\r\n        if (result.success) {\r\n          // No subscription or deleted successfully\r\n          setSubscription(null);\r\n          ew$1.showToast(ew$1.language.phrase(\"NotificationsDisabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew$1.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Init web push notifications\r\n   */\r\n  loadjs.ready(\"foot\", () => {\r\n    if (ew$1.PUSH_SERVER_PUBLIC_KEY && isPushNotificationSupported()) {\r\n      navigator.serviceWorker.register(ew$1.PATH_BASE + ew$1.SERVICE_WORKER, {\r\n        scope: ew$1.PATH_BASE\r\n      }).then(() => {\r\n        checkSubscription();\r\n        $$1(\"#subscribe-notification\").on(\"click\", function () {\r\n          this.classList.contains(\"ew-enable-notification\") ? subscribeNotification() : unsubscribeNotification();\r\n        });\r\n      }).catch(e => console.log(e));\r\n    } else {\r\n      $$1(\"#subscribe-notification\").addClass(\"d-none\");\r\n    }\r\n  });\n\n  var webpush = {\n    __proto__: null,\n    checkSubscription,\n    isPushNotificationSupported,\n    pushNotificationDialogShow,\n    subscribeNotification,\n    unsubscribeNotification\n  };\n\n  /**\r\n   * Map styles\r\n   */\r\n\r\n  /**\r\n   * Show map\r\n   * @param {Object} data Data of map\r\n   */\r\n  function show(data) {\r\n    if (data.inited)\r\n      // Already initiated\r\n      return true;\r\n    let latlng = data.latlng,\r\n      $div = $$1(\"#\" + data.id),\r\n      useSingleMap = data.useSingleMap,\r\n      showAllMarkers = data.showAllMarkers,\r\n      useMarkerClusterer = data.useMarkerClusterer,\r\n      ext = ew.maps[data.ext];\r\n    if (useSingleMap) {\r\n      // Use single map\r\n      let id = data.id.replace(/^mp\\d*_/, \"mp_\"); // Remove index from \"m<n>_\" prefix\r\n      $div = $$1(\"#\" + id);\r\n      if (!$div[0]) {\r\n        $div = $$1(\"<div></div>\").attr(\"id\", id).addClass(\"ew-single-map\").height(data.singleMapHeight); // Create new $div for single map\r\n        if (data.singleMapWidth) $div.width(data.singleMapWidth);\r\n        $$1(\".ew-grid, .ew-multi-column-grid\").first()[data.showMapOnTop ? \"before\" : \"after\"]($div); // Insert before/after table\r\n        data.map = ext.createMap($div[0], data);\r\n        $div.data(\"map\", data.map);\r\n        $div.data(\"ext\", data.ext);\r\n        $div.data(\"bounds\", showAllMarkers ? ext.createBounds() : null);\r\n        $div.data(\"markerClusterer\", useMarkerClusterer ? ext.createMarkerClusterer(data) : null);\r\n      }\r\n      data = Object.assign(data, $div.data()); // Merge data\r\n    } else {\r\n      if (!latlng) {\r\n        // Location not found\r\n        $div.addClass(\"d-none\").html(data.status);\r\n        return true;\r\n      }\r\n      $div.next(\".ew-map-value\").addClass(\"d-none\"); // Hide view value\r\n      if (!data.map) data.map = ext.createMap($div[0], data);\r\n    }\r\n    data.marker = ext.createMarker(data); // Create marker\r\n    data.inited = true; // Initiated\r\n    $$1(document).trigger(\"map\", [data]);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * All maps initiated\r\n   */\r\n  function done() {\r\n    $$1(\".ew-single-map\").each(function () {\r\n      let data = $$1(this).data();\r\n      ew.maps[data.ext].fitBounds(data); // Fit bounds\r\n    });\r\n\r\n    $$1(document).trigger(\"maps\");\r\n  }\r\n\r\n  /**\r\n   * Init maps\r\n   * @param {string} [ext] - Map type, e.g. 'googlemaps', 'leaflet'\r\n   * @returns\r\n   */\r\n  function init(ext) {\r\n    let promises = $$1(\".ew-map\").filter(function () {\r\n      return !ext || $$1(this).data(\"ext\") == ext;\r\n    }).map(function (i) {\r\n      let data = $$1(this).data();\r\n      if (data.inited)\r\n        // Already initiated\r\n        return show(data);\r\n      data.id = this.id; // Get ID\r\n      data.address = (data.address || \"\").trim();\r\n      if (data.address) {\r\n        let geocodingDelay = data.geocodingDelay;\r\n        return new Promise(resolve => {\r\n          $$1.later(i * geocodingDelay, null, () => {\r\n            // Set a timer for better performance\r\n            resolve(ew.maps[data.ext].geocode(data).then(latlng => {\r\n              data.latlng = latlng;\r\n            }).catch(status => {\r\n              data.status = status;\r\n            }).finally(() => show(data)));\r\n          });\r\n        });\r\n      } else {\r\n        let latitude = data.latitude,\r\n          longitude = data.longitude,\r\n          coordinate = data.coordinate;\r\n        if (coordinate) {\r\n          let m = coordinate.match(/[-.\\d]+/g);\r\n          if (Array.isArray(m) && m.length == 2) {\r\n            latitude = parseFloat(m[0]);\r\n            longitude = parseFloat(m[1]);\r\n          }\r\n        }\r\n        if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) data.latlng = ew.maps[data.ext].createLatLng(latitude, longitude);\r\n        return show(data);\r\n      }\r\n    }).get();\r\n    return Promise.all(promises).then(done);\r\n  }\r\n\r\n  /**\r\n   * Init\r\n   */\r\n  $$1(function () {\r\n    $$1(\"#ew-modal-dialog\").on(\"load.ew\", () => init());\r\n    $$1(document).on(\"preview.ew\", () => init());\r\n  });\n\n  var maps = {\n    __proto__: null,\n    done,\n    init,\n    show\n  };\n\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile();\r\n\r\n  // Charts\r\n  window.exportCharts = {}; // Per window\r\n\r\n  // Extend\r\n  Object.assign(ew, {\r\n    MultiPage,\r\n    Form,\r\n    FormBuilder,\r\n    Validators,\r\n    maps\r\n  }, functions, webpush, fullCalendar$1);\r\n  var $document = $$1(document);\r\n\r\n  // Init document\r\n  loadjs.ready(\"load\", function () {\r\n    var _$$offset;\r\n    $$1.views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $$1(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $$1(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    let hash = ew.currentUrl.searchParams.get(\"hash\"),\r\n      scrollTop = (_$$offset = $$1(\"#\" + hash).offset()) == null ? void 0 : _$$offset.top;\r\n    if (scrollTop) $$1(\"html, body\").animate({\r\n      scrollTop\r\n    }, 800);\r\n    $document.trigger(\"load.ew\");\r\n  });\r\n\r\n  // Default \"addoption\" event (fired before adding new option to selection list)\r\n  $document.on(\"addoption\", function (e, args) {\r\n    let row = args.data,\r\n      // New row to be validated\r\n      arp = args.parents; // Parent field values\r\n    for (let i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      let p = arp[i];\r\n      if (!p.length)\r\n        // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n      let val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n      if (!$$1.isUndefined(val) && !p.includes(String(val)))\r\n        // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  });\r\n\r\n  // Click handler for buttons\r\n  $document.on(\"click\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data()),\r\n      action = data.ewAction;\r\n    if (!action) {\r\n      return true;\r\n    } else if (action == \"none\") {\r\n      return false;\r\n    } else if (action == \"redirect\") {\r\n      return ew.redirect(data.url);\r\n    } else if (action == \"reload\") {\r\n      location.reload();\r\n      return false;\r\n    } else if (action == \"submit\") {\r\n      delete data.ewAction;\r\n      return ew.submitAction(e, data);\r\n    } else if (action == \"modal\") {\r\n      e.preventDefault();\r\n      return data.ajax ? ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      }) : ew.modalDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"inline\" || action == \"grid\") {\r\n      e.preventDefault();\r\n      return ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"export\") {\r\n      return ew.export({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"layout\") {\r\n      return ew.toggleLayout(this);\r\n    } else if (action == \"language\") {\r\n      return ew.setLanguage(this);\r\n    } else if (action == \"active-user\") {\r\n      return ew.setActiveUser(this);\r\n    } else if (action == \"filter\") {\r\n      return ew.filter(e);\r\n    } else if (action == \"sort\") {\r\n      return ew.sort(e, this.dataset);\r\n    } else if (action == \"refresh\") {\r\n      let url = ew.setLayout(this.dataset.url, false);\r\n      if (url && url != \"#\") ew.refresh(fetch(url), this.dataset.context);\r\n      return false;\r\n    } else if (action == \"email\") {\r\n      delete data.ewAction;\r\n      return ew.emailDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"set-action\") {\r\n      this.form.elements[\"action\"].value = data.value;\r\n    } else if (action == \"drilldown\") {\r\n      return ew.showDrillDown(e, this, data.url, data.id, data.hdr);\r\n    } else if (action == \"add-option\") {\r\n      delete data.ewAction;\r\n      return ew.addOptionDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"search-type\") {\r\n      return ew.setSearchType(this);\r\n    } else if (action == \"search-operator\") {\r\n      ew.toggleSearchOperator(e, data.target, data.value);\r\n    } else if (action == \"search-toggle\") {\r\n      let panel = document.getElementById(this.dataset.form + \"_search_panel\");\r\n      if (panel) {\r\n        bootstrap.Collapse.getOrCreateInstance(panel).toggle();\r\n        this.classList.toggle(\"active\");\r\n      }\r\n    } else if (action == \"highlight\") {\r\n      $$1(\"mark.\" + this.dataset.name).toggleClass(\"mark\");\r\n      this.classList.toggle(\"active\");\r\n    } else if (action == \"inline-delete\") {\r\n      return ew.confirmDelete(this);\r\n    } else if (action == \"add-grid-row\") {\r\n      return ew.addGridRow(this);\r\n    } else if (action == \"delete-grid-row\") {\r\n      return ew.deleteGridRow(this, this.dataset.rowindex);\r\n    } else if (action == \"select-all\") {\r\n      ew.selectAll(this);\r\n    } else if (action == \"select-key\") {\r\n      ew.selectKey(e);\r\n    } else if (action == \"select-all-keys\") {\r\n      ew.selectAllKeys(this);\r\n    } else if (action == \"import\") {\r\n      return ew.importDialogShow({\r\n        evt: e,\r\n        hdr: data.hdr\r\n      });\r\n    } else if (action == \"password\") {\r\n      return ew.togglePassword(e);\r\n    } else if (action == \"push\") {\r\n      return ew.pushNotificationDialogShow({\r\n        evt: e,\r\n        url: data.apiUrl\r\n      });\r\n    } else if (action == \"enable-2fa\") {\r\n      return ew.enable2FA();\r\n    } else if (action == \"disable-2fa\") {\r\n      return ew.disable2FA();\r\n    } else if (action == \"toggle-chat\") {\r\n      return ew.toggleChat(data.value);\r\n    } else if (action == \"send-otp\") {\r\n      var _document$getElementB;\r\n      return ew.sendOTP((_document$getElementB = document.getElementById(data.account)) == null ? void 0 : _document$getElementB.value);\r\n    } else if (action == \"backup-codes\") {\r\n      return ew.showBackupCodes();\r\n    } else if (action == \"scroll-top\") {\r\n      $$1(document).scrollTop($$1('#top').offset().top);\r\n      return false;\r\n    }\r\n  })\r\n  // Change handler for selects\r\n  .on(\"change\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data());\r\n    if (!data.ewAction) return true;\r\n    let actions = data.ewAction.split(\" \").filter(action => !!action);\r\n    for (let action of actions) {\r\n      if (action == \"submit-form\") {\r\n        var _this$form;\r\n        (_this$form = this.form) == null ? void 0 : _this$form.submit();\r\n      } else if (action == \"change-page-size\") {\r\n        let pageSize = ew.sameText(this.value, \"ALL\") ? \"ALL\" : ew.parseNumber(this.value);\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + pageSize;\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          let url = ew.setSearchParam(this.dataset.url, this.name, pageSize);\r\n          ew.redirect(url);\r\n        }\r\n        return false;\r\n      } else if (action == \"update-options\") {\r\n        ew.updateOptions.call(this);\r\n      } else if (action == \"autofill\") {\r\n        ew.autoFill(this);\r\n      } else if (action == \"search-operator\") {\r\n        return ew.searchOperatorChange(this);\r\n      } else if (action == \"language\") {\r\n        ew.setLanguage(this);\r\n      } else if (action == \"chart-order\") {\r\n        ew.updateChart(this);\r\n      }\r\n    }\r\n  }).on(\"keydown\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $$1(this).data()),\r\n      action = data.ewAction;\r\n    if (action == \"change-page\") {\r\n      // ew-page-number\r\n      if (e.key == \"Enter\") {\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + ew.parseNumber(this.value);\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          ew.currentUrl.searchParams.set(this.name, ew.parseNumber(this.value));\r\n          window.location = ew.sanitizeUrl(ew.currentUrl.toString());\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Click handler for row links\r\n  $document.on(\"click\", \".ew-row-link\", e => e.stopPropagation());\r\n\r\n  // Fix z-index of multiple modals\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $$1(\".modal:visible\").length;\r\n    $$1(this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $$1(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  });\r\n\r\n  // Fix scrolling of multiple modals\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $$1(\".modal:visible\").length && $$1(\"body\").addClass(\"modal-open\");\r\n  });\r\n\r\n  // Crop action for jQuery File Upload\r\n  $$1.blueimp.fileupload.prototype.options.processQueue.unshift({\r\n    action: \"cropImage\",\r\n    // Action name\r\n    fileTypes: \"@loadImageFileTypes\",\r\n    // Reuse loadImageFileTypes\r\n    maxFileSize: \"@loadImageMaxFileSize\",\r\n    // Reuse loadImageMaxFileSize\r\n    cropperOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#options\r\n    cropperCanvasOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#getcroppedcanvasoptions\r\n    disabled: \"@disableImageCrop\" // Use data-disable-image-crop attribute to enable/disable\r\n  });\r\n\r\n  $$1.widget(\"blueimp.fileupload\", $$1.blueimp.fileupload, {\r\n    processActions: {\r\n      cropImage: function (data, options) {\r\n        let file = data.files[data.index];\r\n        if (options.disabled || $$1.isNumber(options.maxFileSize) && file.size > options.maxFileSize || options.fileTypes && !options.fileTypes.test(file.type)) return data;\r\n        let url = URL.createObjectURL(file),\r\n          dfd = $$1.Deferred(),\r\n          that = this;\r\n        let $dlg = ew.cropperDialog || $$1(\"#ew-cropper-dialog\").on(\"shown.bs.modal\", function () {\r\n          $dlg.data(\"cropper\", new Cropper(this.querySelector(\"#ew-crop-image\"), options.cropperOptions));\r\n        }).on(\"hidden.bs.modal\", function () {\r\n          var _$dlg$data;\r\n          (_$dlg$data = $dlg.data(\"cropper\")) == null ? void 0 : _$dlg$data.destroy();\r\n          $dlg.removeData(\"cropper\");\r\n          $dlg.find(\"#ew-crop-image\").attr(\"src\", \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\");\r\n        });\r\n        ew.cropperDialog = $dlg;\r\n        $dlg.find(\"#ew-crop-image\").attr(\"src\", url);\r\n        $dlg.find(\".ew-crop-btn\").off(\"click\").on(\"click\", function () {\r\n          if ($dlg.data(\"cropper\")) {\r\n            try {\r\n              let canvas = $dlg.data(\"cropper\").getCroppedCanvas(options.cropperCanvasOptions);\r\n              canvas.toBlob(blob => {\r\n                data.files[data.index] = new File([blob], file.name, {\r\n                  type: file.type\r\n                });\r\n                dfd.resolveWith(that, [data]);\r\n              }, file.type);\r\n            } catch (error) {\r\n              ew.alert(error);\r\n              dfd.rejectWith(that, [data]);\r\n            } finally {\r\n              $dlg.modal(\"hide\");\r\n            }\r\n          }\r\n        });\r\n        $dlg.find(\".ew-skip-btn\").off(\"click\").on(\"click\", function () {\r\n          dfd.resolveWith(that, [data]);\r\n          $dlg.modal(\"hide\");\r\n        });\r\n        $dlg.modal(\"show\");\r\n        return dfd.promise();\r\n      }\r\n    }\r\n  });\n\n  // Extend jQuery\r\n  $$1.extend({\r\n    isBoolean: function (o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNumber: function (o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function (o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function (o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function (o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function (o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function (o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function (when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n        d = data,\r\n        f,\r\n        r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n      f = function () {\r\n        m.apply(o, d || []);\r\n      };\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function () {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n  $$1.fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    let rec = {},\r\n      id = this.attr(\"id\"),\r\n      obj = this[0],\r\n      m = id.match(/^[xy](\\d*)_/),\r\n      f,\r\n      tbl,\r\n      infix;\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n      tbl = this.data(\"table\"); // table var\r\n      infix = m[1]; // row index\r\n    } else if (obj != null && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n      infix = obj.htmlForm.dataset.rowindex; // row index\r\n    }\r\n\r\n    let selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\" + ($$1.isValue(infix) ? \"[name^=x\" + infix + \"]\" : \"\") + \":not(.ew-custom-option)\";\r\n    if (f && selector) {\r\n      $$1(f).find(selector).each(function () {\r\n        let key = this.dataset.field.substring(2),\r\n          // \"data-field\"\r\n          name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n        rec[key] = rec[key] ? rec[key].add(this) : $$1(this); // Create jQuery object for each field\r\n      });\r\n    }\r\n\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n  $$1.fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function () {\r\n      var _this$data;\r\n      let $row = this.closest(\"#r_\" + ((_this$data = this.data(\"field\")) == null ? void 0 : _this$data.substring(2)));\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function (v) {\r\n      var _this$data2;\r\n      let $p = this.closest(\"#r_\" + ((_this$data2 = this.data(\"field\")) == null ? void 0 : _this$data2.substring(2))); // Find the row\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggle(v);\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        ew.selectOption(this[0], v);\r\n        return this;\r\n      } else {\r\n        return ew.getValue(this[0]);\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function () {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as Luxon object\r\n    toDate: function () {\r\n      var _ew$vars$tables;\r\n      let data = this.data(),\r\n        table = data.table,\r\n        field = data.field.replace(/^[xy]_/, \"\"),\r\n        format = (_ew$vars$tables = ew.vars.tables) == null || (_ew$vars$tables = _ew$vars$tables[table]) == null || (_ew$vars$tables = _ew$vars$tables.fields) == null || (_ew$vars$tables = _ew$vars$tables[field]) == null ? void 0 : _ew$vars$tables.clientFormatPattern;\r\n      return ew.parseDateTime(this.value(), format);\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function () {\r\n      return this.toDate().toJSDate();\r\n    }\r\n  });\n\n  // Improve Bootstrap Dropdown\r\n  bootstrap.Dropdown.prototype.toggle = function () {\r\n    if (!this._element.classList.contains(\"ew-dropdown-toggle\")) {\r\n      if (this._element.closest(\"[data-widget]\")) $$1(this._element).on(\"click.ew.dropdown\", e => {\r\n        bootstrap.Dropdown.clearMenus(e.originalEvent); // Clear menus first because this click event will not propagate to the document\r\n        e.stopPropagation(); // Stop propagate or the event will toggle row of expandable-table\r\n      });\r\n      // Move the menu to document body if menu inside responsive table\r\n      if (this._menu.closest(\".table-responsive\")) {\r\n        let container = this._menu.closest(\".popover-body, .modal-body, .offcanvas-body, body\");\r\n        container.appendChild(this._menu);\r\n        let menu = this._menu;\r\n        if (!this._element.id) this._element.id = \"dropdownbtn\" + ew.random();\r\n        menu.setAttribute('aria-labelledby', this._element.id);\r\n        function callback(mutationList) {\r\n          mutationList.forEach(mutation => {\r\n            switch (mutation.type) {\r\n              case \"attributes\":\r\n                if (mutation.target.classList.contains(\"show\")) menu.classList.add(\"d-block\");else menu.classList.remove(\"d-block\");\r\n                break;\r\n            }\r\n          });\r\n        }\r\n        let observer = new MutationObserver(callback);\r\n        observer.observe(this._parent, {\r\n          attributeFilter: [\"class\"],\r\n          attributeOldValue: false,\r\n          subtree: false\r\n        });\r\n      }\r\n      this._element.classList.add(\"ew-dropdown-toggle\");\r\n    }\r\n    return this._isShown() ? this.hide() : this.show();\r\n  };\n\n  loadjs.ready([\"wrapper\", \"head\"], function () {\r\n    let $chatWrapper = $$1(\".chat-wrapper\"),\r\n      $chatCheck = $chatWrapper.find(\"#chat-check\"),\r\n      $chatBtn = $chatWrapper.find(\".chat-btn\").addClass(\"show\"),\r\n      $chatClose = $chatBtn.find(\".close\"),\r\n      $chatComment = $chatBtn.find(\".comment\"),\r\n      $chatCard = $chatWrapper.find(\".direct-chat\"),\r\n      $chatHeader = $chatCard.find(\".card-header\"),\r\n      $chatCollapse = $chatHeader.find(\".card-collapse\"),\r\n      $chatBody = $chatCard.find(\".card-body\"),\r\n      $chatIframe = $chatBody.find(\"iframe\");\r\n    $chatCheck.on(\"click\", () => {\r\n      var _Pace;\r\n      if ((_Pace = Pace) != null && _Pace.running) return;\r\n      const checked = $chatCheck.prop(\"checked\");\r\n      $chatClose.toggle(checked);\r\n      $chatComment.toggle(!checked);\r\n      $chatCard.toggle(checked);\r\n      let iframe = $chatIframe[0];\r\n      if (checked && !iframe.src) iframe.src = iframe.dataset.src;\r\n    });\r\n    $chatCard.on(\"removed.lte.cardwidget\", () => $chatCheck.prop(\"checked\", false).triggerHandler(\"click\"));\r\n    $chatCard.on(\"maximized.lte.cardwidget\", () => {\r\n      $chatWrapper.after($chatCard);\r\n      $chatCollapse.hide();\r\n      $chatCard.delay(150).queue(function () {\r\n        let h = $chatCard.height() - $chatHeader.outerHeight();\r\n        $chatBody.height(h);\r\n        $chatIframe.addClass(\"w-100\").height(h - parseInt($chatCard.css(\"border-radius\"), 10)); // Minus the radius of card\r\n        $chatCard.dequeue();\r\n      });\r\n      $chatIframe[0].contentDocument.location.reload(true);\r\n    }).on(\"minimized.lte.cardwidget\", () => {\r\n      $chatWrapper.append($chatCard);\r\n      $chatCollapse.show();\r\n      $chatCard.toggle($chatCheck.prop(\"checked\"));\r\n      $chatCard.queue(function () {\r\n        $chatBody.height(\"auto\");\r\n        $chatIframe.removeClass(\"w-100\").height(\"auto\");\r\n        $chatCard.dequeue();\r\n      });\r\n      $chatIframe[0].contentDocument.location.reload(true);\r\n    });\r\n  });\n\n  var isNil = (value) => {\r\n      return value === null || value === undefined;\r\n  };\r\n\r\n  var isNil$1 = isNil;\n\n  var isFunction = (value) => {\r\n      return typeof value === 'function';\r\n  };\r\n\r\n  var isFunction$1 = isFunction;\n\n  var isNaNNumber = (value) => {\r\n      return typeof value === 'number' && isNaN(value);\r\n  };\r\n\r\n  var isNaNNumber$1 = isNaNNumber;\n\n  var isFiniteNumber = (value) => {\r\n      return typeof value == 'number' && isFinite(value);\r\n  };\r\n\r\n  var isFiniteNumber$1 = isFiniteNumber;\n\n  /**\r\n   * Optimized for performance\r\n   */\r\n  const multiplyByPowerOfTen = (number, powerOfTenExponent) => {\r\n      if (!isFiniteNumber$1(number))\r\n          return NaN;\r\n      const numAsString = '' + number;\r\n      const indexOfE = numAsString.indexOf('e');\r\n      if (indexOfE === -1) {\r\n          return +(numAsString + 'e' + powerOfTenExponent);\r\n      }\r\n      else {\r\n          return +(numAsString.slice(0, indexOfE) + 'e' + (+numAsString.slice(indexOfE + 1) + powerOfTenExponent));\r\n      }\r\n  };\r\n\r\n  var multiplyByPowerOfTen$1 = multiplyByPowerOfTen;\n\n  /**\r\n   * Only handles direct power of ten (only integer exponents)\r\n   */\r\n  const log10 = (numberThatIsPowerOfTen) => {\r\n      return Math.round(Math.log(numberThatIsPowerOfTen) * Math.LOG10E);\r\n  };\r\n\r\n  var log10$1 = log10;\n\n  const toObject = (arr, entriesResolver) => {\r\n      const object = {};\r\n      for (let i = 0; i < arr.length; ++i) {\r\n          if (i in arr) {\r\n              const [key, value] = entriesResolver(arr[i], i);\r\n              object[key] = value;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n\r\n  var toObject$1 = toObject;\n\n  // <i> Extracted from https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n  const escapeRegexString = (string) => {\r\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, match => `\\\\${match}`);\r\n  };\r\n\r\n  var escapeRegexString$1 = escapeRegexString;\n\n  /**\r\n   * This function doesn't work with non-primitive arguments\r\n   */\r\n  const memoize = (fn) => {\r\n      const cache = {};\r\n      return function (...args) {\r\n          const cacheKey = args.length > 1 ? args.join('-(:-:)-') : args[0];\r\n          if (cacheKey in cache) {\r\n              return cache[cacheKey];\r\n          }\r\n          const result = fn.apply(this, args);\r\n          cache[cacheKey] = result;\r\n          return result;\r\n      };\r\n  };\r\n\r\n  var memoize$1 = memoize;\n\n  const powerOf10LookupObject = (() => {\r\n      const object = {};\r\n      // 1 <= x <= Infinity (positive exponent)\r\n      let additionalZeros = '';\r\n      let currentValue;\r\n      while (currentValue !== Infinity) {\r\n          currentValue = +('1' + additionalZeros);\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      // 0 <= x < 1 (negative exponent)\r\n      additionalZeros = '';\r\n      currentValue = undefined;\r\n      while (currentValue !== 0) {\r\n          currentValue = +('0.' + additionalZeros + '1');\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      return object;\r\n  })();\r\n  const isPowerOfTen = (number) => {\r\n      return !!powerOf10LookupObject[number];\r\n  };\r\n\r\n  var isPowerOfTen$1 = isPowerOfTen;\n\n  const toBase = (value, valueUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || valueUnit === unitScale.base)\r\n          return value;\r\n      if (!(valueUnit in unitScale.scale))\r\n          return NaN;\r\n      const toBaseMultiplier = unitScale.scale[valueUnit] || 1;\r\n      return isPowerOfTen$1(toBaseMultiplier)\r\n          ? multiplyByPowerOfTen$1(value, log10$1(toBaseMultiplier))\r\n          : value * toBaseMultiplier;\r\n  };\r\n  const convertUnit = (value, originUnit, targetUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || originUnit === targetUnit)\r\n          return value;\r\n      const valueAsBase = toBase(value, originUnit, unitScale);\r\n      const resolvedScale = Object.assign(Object.assign({}, unitScale.scale), { [unitScale.base]: 1 });\r\n      if (isNaN(valueAsBase) || !(originUnit in resolvedScale) || !(targetUnit in resolvedScale))\r\n          return NaN;\r\n      const conversionFactorFromBase = unitScale.scale[targetUnit] || 1;\r\n      return isPowerOfTen$1(conversionFactorFromBase)\r\n          ? multiplyByPowerOfTen$1(valueAsBase, -log10$1(conversionFactorFromBase))\r\n          : valueAsBase / conversionFactorFromBase;\r\n  };\r\n  /**\r\n   * Looks through every possibility for the 'best' available unit.\r\n   * i.e. Where the value has the fewest numbers before the decimal point,\r\n   * but is still higher than 1.\r\n   */\r\n  const toBest = (value, originUnit, unitScale, options) => {\r\n      const resolvedOptions = Object.assign({ exclude: [], cutOffNumber: 1 }, options);\r\n      let best = null;\r\n      const scale = unitScale.scale;\r\n      Object.keys(scale).sort((a, b) => scale[a] - scale[b]).forEach((scaleUnit) => {\r\n          const isIncluded = resolvedOptions.exclude.indexOf(scaleUnit) === -1;\r\n          if (!isIncluded)\r\n              return;\r\n          const result = convertUnit(value, originUnit, scaleUnit, unitScale);\r\n          const absoluteResult = Math.abs(result);\r\n          if (!best || (absoluteResult >= resolvedOptions.cutOffNumber && absoluteResult < Math.abs(best[0]))) {\r\n              best = [result, scaleUnit];\r\n          }\r\n      });\r\n      return best || [value, originUnit];\r\n  };\r\n  const unitScale = (unitScaleDefinition) => {\r\n      return {\r\n          toBase: (value, unit) => {\r\n              return toBase(value, unit, unitScaleDefinition);\r\n          },\r\n          convert: (value, originUnit, targetUnit) => {\r\n              return convertUnit(value, originUnit, targetUnit, unitScaleDefinition);\r\n          },\r\n          toBest: (value, originUnit, options) => {\r\n              return toBest(value, originUnit, unitScaleDefinition, options);\r\n          },\r\n          scaleDefinition: unitScaleDefinition,\r\n      };\r\n  };\n\n  /**\r\n   * Short version of mozilla polyfill:\r\n   * <i> See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\r\n   */\r\n  const stringRepeat = (str, count) => {\r\n      // return (str.repeat && str.repeat(count)) || new Array(count + 1).join(str);\r\n      if (count < 1)\r\n          return '';\r\n      let result = '';\r\n      let pattern = str;\r\n      while (count > 1) {\r\n          if (count & 1)\r\n              result += pattern;\r\n          count >>>= 1, pattern += pattern;\r\n      }\r\n      return result + pattern;\r\n  };\r\n\r\n  var stringRepeat$1 = stringRepeat;\n\n  const baseCreateUnitScaleFromLocaleAbbreviations = (str) => {\r\n      if (!str) {\r\n          return unitScale({ base: '', scale: {} });\r\n      }\r\n      const scale = str.split('|');\r\n      const scaleDefinition = { ['']: 1 };\r\n      scale.forEach((scaleItem, scaleItemIndex) => {\r\n          if (!scaleItem)\r\n              return;\r\n          scaleDefinition[scaleItem] = +(1 + stringRepeat$1('0', scaleItemIndex));\r\n      });\r\n      return unitScale({ base: '', scale: scaleDefinition });\r\n  };\r\n  const createUnitScaleFromLocaleAbbreviations = memoize$1(baseCreateUnitScaleFromLocaleAbbreviations);\r\n\r\n  var createUnitScaleFromLocaleAbbreviations$1 = createUnitScaleFromLocaleAbbreviations;\n\n  const replaceNumeralSystemWithLatinNumbers = (numericStringWithExtraInfo, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericStringWithExtraInfo;\r\n      const numericStringLength = numericStringWithExtraInfo.length;\r\n      const numeralSystemToLatinSystemMap = toObject$1(numeralSystemMap, (digit, digitIndex) => [digit.replace(/\\u200e/g, ''), '' + digitIndex]);\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericStringWithExtraInfo[numericStringIndex];\r\n          output += numeralSystemToLatinSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n  const getScalingFactorFromAbbreviations = (stringOriginal, options) => {\r\n      var _a;\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1((_a = options.locale) === null || _a === void 0 ? void 0 : _a.abbreviations);\r\n      const abbreviationsSortedByLengthDesc = Object.keys(scale.scaleDefinition.scale).sort((a, b) => b.length - a.length);\r\n      let abbreviationScalingFactor = 1;\r\n      for (const abbreviation of abbreviationsSortedByLengthDesc) {\r\n          const scapedAbbreviationForRegex = escapeRegexString$1(abbreviation);\r\n          const regexp = new RegExp('[^a-zA-Z]'\r\n              + `(${scapedAbbreviationForRegex})|(${scapedAbbreviationForRegex.replace(/\\u200e/g, '')})`\r\n              + '(?:\\\\)(?:\\\\))?)?$');\r\n          if (stringOriginal.match(regexp)) {\r\n              abbreviationScalingFactor = scale.toBase(abbreviationScalingFactor, abbreviation);\r\n              break;\r\n          }\r\n      }\r\n      return abbreviationScalingFactor;\r\n  };\r\n  // unformats numbers separators, decimals places, signs, abbreviations\r\n  const formattedStringToNumber = (inputString, options) => {\r\n      var _a;\r\n      const locale = options.locale;\r\n      const stringOriginal = inputString;\r\n      let value;\r\n      // Replace special digits with latin digits\r\n      const stringWithLatinDigits = replaceNumeralSystemWithLatinNumbers(inputString, (_a = options.locale) === null || _a === void 0 ? void 0 : _a.numeralSystem);\r\n      if (options.zeroFormat && stringWithLatinDigits === options.zeroFormat) {\r\n          value = 0;\r\n      }\r\n      else if (options.nullFormat && stringWithLatinDigits === options.nullFormat || !stringWithLatinDigits.replace(/[^0-9]+/g, '').length) {\r\n          value = null;\r\n      }\r\n      else {\r\n          // Replaces the locale decimal delimiter with a dot (.)\r\n          const decimalDelimiterFromLocale = locale.delimiters.decimal;\r\n          const stringWithDotDecimalDelimiter = decimalDelimiterFromLocale === '.'\r\n              ? stringWithLatinDigits\r\n              : stringWithLatinDigits.replace(/\\./g, '').replace(decimalDelimiterFromLocale, '.');\r\n          // Determines the scaling factor from the abbreviations (if has abbreviations)\r\n          const abbreviationScalingFactor = getScalingFactorFromAbbreviations(stringOriginal, options);\r\n          // Check for negative number\r\n          const negativeFactor = (stringWithDotDecimalDelimiter.split('-').length\r\n              + Math.min(stringWithDotDecimalDelimiter.split('(').length - 1, stringWithDotDecimalDelimiter.split(')').length - 1)) % 2 ? 1 : -1;\r\n          // Remove non numbers\r\n          const numberAsString = stringWithDotDecimalDelimiter.replace(/[^0-9.]+/g, '');\r\n          value = negativeFactor * multiplyByPowerOfTen$1(+numberAsString, log10$1(abbreviationScalingFactor));\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var formattedStringToNumber$1 = formattedStringToNumber;\n\n  const locale = {\r\n      code: 'en',\r\n      delimiters: {\r\n          thousands: ',',\r\n          decimal: '.',\r\n      },\r\n      abbreviations: '|||K|||M|||B|||T',\r\n      ordinal: number => {\r\n          const b = number % 10;\r\n          return (Math.floor(number % 100 / 10) === 1)\r\n              ? 'th'\r\n              : b === 1\r\n                  ? 'st'\r\n                  : b === 2\r\n                      ? 'nd'\r\n                      : b === 3\r\n                          ? 'rd'\r\n                          : 'th';\r\n      },\r\n  };\r\n\r\n  var locale$1 = locale;\n\n  function merge(...args) {\r\n      const newObject = {};\r\n      const argsLength = args.length;\r\n      for (let i = 0; i < argsLength; i++) {\r\n          for (const key in args[i])\r\n              newObject[key] = args[i][key];\r\n      }\r\n      return newObject;\r\n  }\n\n  var isObject = (value) => {\r\n      return typeof value === 'object' && value !== null;\r\n  };\r\n\r\n  var isObject$1 = isObject;\n\n  var isString = (value) => {\r\n      return typeof value === 'string';\r\n  };\r\n\r\n  var isString$1 = isString;\n\n  const truncateNumber = (value) => {\r\n      return value < 0 ? Math.ceil(value) : Math.floor(value);\r\n  };\r\n\r\n  var truncateNumber$1 = truncateNumber;\n\n  const getPatternParts = (patternMask) => {\r\n      let isInEscapedPart = false;\r\n      let currentEscapedWord = '';\r\n      const parts = [];\r\n      for (let i = 0; i < patternMask.length; i++) {\r\n          const char = patternMask.charAt(i);\r\n          if (char === \"'\" && !isInEscapedPart) {\r\n              isInEscapedPart = true;\r\n              currentEscapedWord = '';\r\n          }\r\n          else if (char === \"'\" && isInEscapedPart && patternMask.charAt(i - 1) !== \"\\\\\") {\r\n              isInEscapedPart = false;\r\n              parts.push({ escaped: true, value: currentEscapedWord });\r\n          }\r\n          else if (isInEscapedPart) {\r\n              currentEscapedWord += char;\r\n          }\r\n          else {\r\n              if (parts.length && !parts[parts.length - 1].escaped) {\r\n                  parts[parts.length - 1].value += char;\r\n              }\r\n              else {\r\n                  parts.push({ escaped: false, value: char });\r\n              }\r\n          }\r\n      }\r\n      return parts;\r\n  };\r\n  /**\r\n   * Checks only the pattern parts that are not escaped\r\n   */\r\n  const patternIncludes = (patternMask, search) => {\r\n      return patternRemoveEscapedText(patternMask).indexOf(search) !== -1;\r\n  };\r\n  /**\r\n   * Replaces only the pattern parts that are not escaped\r\n   */\r\n  const patternReplace = (patternMask, searchValue, replaceValue) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? `'${e.value}'` : e.value.replace(searchValue, _ => replaceValue))\r\n          .join('');\r\n  };\r\n  const patternRemoveEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .filter(e => !e.escaped)\r\n          .map(e => e.value)\r\n          .join('');\r\n  };\r\n  const patternStripAndNormalizeEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? e.value.replace(/\\\\'/g, \"'\") : e.value)\r\n          .join('');\r\n  };\n\n  const stringIncludes = (str, search) => {\r\n      return str.indexOf(search) !== -1;\r\n  };\r\n\r\n  var stringIncludes$1 = stringIncludes;\n\n  /**\r\n   * What does it look for in the pattern?\r\n   *     '(' | '+' | '-'\r\n   * What does it remove from the pattern?\r\n   *     '(' | ')' | '+' | '-'\r\n   * What options does it provide?\r\n   *     - negativeParentheses (if negative value should be wrapped between parentheses)\r\n   *     - forceSign (is positive values should have a + sign)\r\n   * How will it transform the output?\r\n   *     - Parentheses:\r\n   *         '-23.58' & '(0.00)'  =>  '(23.58)'\r\n   *         '-23.58' & '( 0.00 )'  =>  '( 23.58 )'\r\n   *         '-23.58' & '(  0.00 ) '  =>  ' (  23.58 )'\r\n   *     - Sign:\r\n   *         '12.34' & '+0.0'  =>  '+12.34'\r\n   *         '-12.34' & '+0.0'  =>  '-12.34'\r\n   *\r\n   * <i> If '+' is somewhere in the pattern, it will set the '+' sign for positive numbers\r\n   *     and same for negative numbers.\r\n   * <i> If '-' is somewhere in the pattern, it will place the negative sign in the defined position.\r\n   *     But it won't still set the sign for positive numbers.\r\n   * <i> Checks if we should use parentheses for negative number or if we should prefix with a sign.\r\n   *     If both are present we default to parentheses.\r\n   */\r\n  const signRule = (pattern) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      const negativeParentheses = stringIncludes$1(patternWithoutEscapedText, '(') && stringIncludes$1(patternWithoutEscapedText, ')');\r\n      const forceSign = !negativeParentheses && stringIncludes$1(patternWithoutEscapedText, '+');\r\n      let outputPatternMask = pattern;\r\n      outputPatternMask = patternReplace(outputPatternMask, '(', `'nps'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, ')', `'npe'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, /(-|\\+)/, `'s'`);\r\n      return [outputPatternMask, { negativeParentheses, forceSign }];\r\n  };\r\n\r\n  var signRule$1 = signRule;\n\n  /**\r\n   * Checks if abbreviation is wanted\r\n   * <i> Applied only when 'a' is present.\r\n   * <i> If 'a' is followed by 'k' | 'm' | 'b' | 't', then, it will force the abbreviation to be the specified\r\n   *     unit. (e.g. (123456.78, '0,0.00am')  =>  '0.12M')\r\n   */\r\n  const abbreviationRule = (patternMask) => {\r\n      let compactUnit = null; // force abbreviation\r\n      let compact = false;\r\n      // If it includes 'a' means it should be abbreviated (only if at least includes 'a')\r\n      if (patternIncludes(patternMask, 'a')) {\r\n          compact = true;\r\n          const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n          const abbreviationRegExpResult = patternWithoutEscapedText.match(/a(k|m|b|t)?/);\r\n          compactUnit = !!abbreviationRegExpResult ? abbreviationRegExpResult[1] : null;\r\n      }\r\n      let outputPatternMask = patternMask;\r\n      outputPatternMask = patternReplace(outputPatternMask, /a(k|m|b|t)?/, `'a'`);\r\n      return [outputPatternMask, { compact, compactUnit, compactAuto: compact && !compactUnit }];\r\n  };\r\n\r\n  var abbreviationRule$1 = abbreviationRule;\n\n  /**\r\n   * Faster version of String.prototype.split that only handles splitting in two parts\r\n   */\r\n  const splitStringInTwoParts = (str, separator) => {\r\n      if (!str)\r\n          return ['', ''];\r\n      const indexOfSearchChar = str.indexOf(separator);\r\n      if (indexOfSearchChar === -1) {\r\n          return [str, ''];\r\n      }\r\n      else {\r\n          return [str.slice(0, indexOfSearchChar), str.slice(indexOfSearchChar + 1)];\r\n      }\r\n  };\r\n\r\n  var splitStringInTwoParts$1 = splitStringInTwoParts;\n\n  const countChars = (string, char) => {\r\n      return !string ? 0 : string.split('').filter(stringChar => stringChar === char).length;\r\n  };\r\n  /**\r\n   * Fraction digits (decimals) count rule (minimum and maximum fraction digits)\r\n   * <i> Optional fraction digits would go always after the forced ones\r\n   */\r\n  const decimalPlacesRule = (patternMask) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternPrecisionPart = splitStringInTwoParts$1(patternWithoutEscapedText, '.')[1];\r\n      let minimumFractionDigits = 0;\r\n      let maximumFractionDigits = 0;\r\n      if (!!patternPrecisionPart) {\r\n          const trimmedPatternPrecisionPart = patternPrecisionPart.trim();\r\n          if (stringIncludes$1(trimmedPatternPrecisionPart, '[')) {\r\n              // If it contains optional fraction digits\r\n              const patternPrecisionPartWithoutClosingBracket = trimmedPatternPrecisionPart.replace(']', '');\r\n              // Isolates forced (left) vs optional (right) decimals\r\n              const precisionSplitted = splitStringInTwoParts$1(patternPrecisionPartWithoutClosingBracket, '[');\r\n              minimumFractionDigits = countChars(precisionSplitted[0], '0');\r\n              maximumFractionDigits = minimumFractionDigits + countChars(precisionSplitted[1], '0');\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, '#')) {\r\n              // If it contains optional fraction digits marked with '#'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('#')[0], '0');\r\n              maximumFractionDigits = trimmedPatternPrecisionPart.length;\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, 'X')) {\r\n              // If it contains no-maximum fraction digits marked with 'X'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('X')[0], '0');\r\n              maximumFractionDigits = 500;\r\n          }\r\n          else {\r\n              const fractionDigits = countChars(trimmedPatternPrecisionPart.split(' ')[0], '0');\r\n              minimumFractionDigits = fractionDigits;\r\n              maximumFractionDigits = fractionDigits;\r\n          }\r\n      }\r\n      return { minimumFractionDigits, maximumFractionDigits };\r\n  };\r\n\r\n  var decimalPlacesRule$1 = decimalPlacesRule;\n\n  /**\r\n   * Check for optional decimals.\r\n   *\r\n   * <i> 'optionalDecimals' This would mean that:\r\n   *     - In case the number (value) HAS decimals (e.g. 55.34), then it would display the fixed amount of defined\r\n   *       decimals (e.g. '0[.]000' => 3 fixed decimals), but, if the number is an straight integer, then it won't\r\n   *       display any decimals.\r\n   * <i> It could also accept optional decimals afterwards. So for the case '0[.]00##':\r\n   *     - If it is an integer, displays only an integer:  23 => '23'\r\n   *     - If it has 1 decimal, displays 2 decimals:       23.4 => '23.40'\r\n   *     - If it has 3 decimals, displays 3 decimals:      23.456 => '23.456'\r\n   */\r\n  const optionalDecimalPlacesRule = (patternMask) => {\r\n      let optionalFractionDigits = false;\r\n      let outputPatternMask = patternMask;\r\n      if (patternIncludes(patternMask, '[.]')) {\r\n          optionalFractionDigits = true;\r\n          outputPatternMask = patternReplace(outputPatternMask, '[.]', '.');\r\n      }\r\n      return [outputPatternMask, { optionalFractionDigits }];\r\n  };\r\n\r\n  var optionalDecimalPlacesRule$1 = optionalDecimalPlacesRule;\n\n  /**\r\n   * <i> The regExp tests for:\r\n   *     - 0.00##X\r\n   *     - 0,0.00##X\r\n   *     - #.00##X (without leading zeros)\r\n   *     - #,#.00##X (without leading zeros)\r\n   */\r\n  const numberPositionRule = (patternMask) => {\r\n      const numberPartRegExp = /((((0|#)+,)?(0|#)+(\\.([0#X]|\\[0+\\])+)?){1})/;\r\n      return patternReplace(patternMask, numberPartRegExp, `'n'`);\r\n  };\r\n  /**\r\n   * Minimum leading integer digits rule\r\n   * This will define the minimum amount of digits on the integer part (left-most grouped zeroes).\r\n   *     - (12.34, '0000.0') =>  '0012.3'\r\n   *     - (12.34, '0000,0.0')  =>  '0,012.3'\r\n   *     - (0.34, '#.0') => '.3'\r\n   *     - (1.34, '#.0') => '1.3'\r\n   *\r\n   * <i> It always pick the left-most amount of zeros, so:\r\n   *     - If pattern has NO thousands separator ('000.0'), then the amount at the left of the DOT is used.\r\n   *     - If pattern HAS thousands separator ('00,0.0'), then the amount at the left of the COMMA is used.\r\n   * <i> This will remove the integer zero for numbers between 1 and -1 (e.g. 0.23 or -0.5)\r\n   *     - If pattern integer part is option (0.24, '#.00') => '.24'\r\n   */\r\n  const minimumIntegerDigitsRule = (patternMask) => {\r\n      const patternMaskWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternMaskIntegerPart = patternMaskWithoutEscapedText.split('.')[0].split(',')[0];\r\n      // If it has '#' in the integer part, sets the minimumIntegerDigits to 0\r\n      if (/#/g.test(patternMaskIntegerPart)) {\r\n          return 0;\r\n      }\r\n      return (patternMaskIntegerPart.match(/0/g) || []).length;\r\n  };\r\n  // If sign is not included, put sign at the left of the number\r\n  const addSignPositionIfItDoesNotExists = (patternMask) => {\r\n      if (stringIncludes$1(patternMask, `'s'`) || stringIncludes$1(patternMask, `'nps'`))\r\n          return patternMask;\r\n      return patternMask.replace(`'n'`, _ => `'s''n'`);\r\n  };\r\n  const baseParsePattern = (inputPattern) => {\r\n      const resolvedInputPattern = isString$1(inputPattern) && inputPattern || '0,0.##########';\r\n      const [patternMaskAfterSignRule, signRules] = signRule$1(resolvedInputPattern);\r\n      const [patternMaskAfterAbbreviationRule, abbreviationRules] = abbreviationRule$1(patternMaskAfterSignRule);\r\n      const [patternMaskAfterOptionalDecimalPlacesRule, optionalDecimalPlacesRules] = optionalDecimalPlacesRule$1(patternMaskAfterAbbreviationRule);\r\n      const outputPatternMask = patternMaskAfterOptionalDecimalPlacesRule;\r\n      const outputPatternMaskWithoutEscapedText = patternRemoveEscapedText(outputPatternMask);\r\n      const decimalPlacesRules = decimalPlacesRule$1(outputPatternMask);\r\n      const minimumIntegerDigits = minimumIntegerDigitsRule(outputPatternMask);\r\n      const grouping = outputPatternMaskWithoutEscapedText.indexOf(',') > -1;\r\n      const patternMaskAfterHandlingNumberPosition = numberPositionRule(outputPatternMask);\r\n      const patternMaskWithEnsuredSignPosition = addSignPositionIfItDoesNotExists(patternMaskAfterHandlingNumberPosition);\r\n      const patternMask = patternMaskWithEnsuredSignPosition;\r\n      return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, signRules), abbreviationRules), optionalDecimalPlacesRules), decimalPlacesRules), { grouping,\r\n          minimumIntegerDigits,\r\n          patternMask });\r\n  };\r\n  const parsePattern = memoize$1(baseParsePattern);\r\n\r\n  var parsePattern$1 = parsePattern;\n\n  /**\r\n   * <i> Checks if value is negative, and removes the sign in case it exists\r\n   * Expects: a value as string, with or without the minus sign, AND NOTHING ELSE.\r\n   * Returns: same as the input but without the minus sign in case it had.\r\n   */\r\n  const removeSignIfExists = (valueAsString) => {\r\n      return valueAsString[0] === '-' ? valueAsString.slice(1) : valueAsString;\r\n  };\r\n\r\n  var removeSignIfExists$1 = removeSignIfExists;\n\n  /**\r\n   * This process only is applied for automatic abbreviation ('a'), and only in the rounding\r\n   * bubbling cases where the scale has to be recomputed.\r\n   * E.g.\r\n   *     formatNumber(999960, 0.0a') // Would return '1000.0k' instead of '1.0m' without this rescaling-fix\r\n   *\r\n   * It only applies rescaling if the absolute value of 'the already scaled and rounded value' (1.87, 'k') is greater or\r\n   * equal to 1000, and the abbreviation is not greater or equal to trillion.\r\n   *\r\n   * <i> After initial scaling, value shouldn't be greater than 1000, unless it is a trillion.\r\n   * <i> The resulting decimal part, will be always 0, as this will be executed only on the corner cases,\r\n   *     that results from rounding bubbling. This is why decimal part is ignored.\r\n   */\r\n  const rescaleRoundedValue = (value, currentAbbreviationScale, patternRules, options) => {\r\n      const { compact, compactAuto } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact || !compactAuto) {\r\n          return [value, currentAbbreviationScale];\r\n      }\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [newScaledValue, newScaledValueUnit] = scale.toBest(value, currentAbbreviationScale || '');\r\n      return [newScaledValue, newScaledValueUnit];\r\n  };\r\n\r\n  var rescaleRoundedValue$1 = rescaleRoundedValue;\n\n  /**\r\n   * If abbreviation is forced, looks for the closest (in terms of power of ten) abbreviation in the current locale\r\n   *     k === 10 ** 3\r\n   *     m === 10 ** 6\r\n   *     b === 10 ** 9\r\n   *     t === 10 ** 12\r\n   */\r\n  const resolveForcedAbbreviationUnit = (forcedAbbreviationUnit, abbreviationsFromLocale, value) => {\r\n      // Record<AbbreviationSymbol, PowerOfTenExponent>\r\n      const forcedScaleMap = { k: 3, m: 6, b: 9, t: 12 };\r\n      const targetPowerOfTenExponent = forcedScaleMap[forcedAbbreviationUnit];\r\n      const scaleDefinitionFromLocale = (abbreviationsFromLocale === null || abbreviationsFromLocale === void 0 ? void 0 : abbreviationsFromLocale.split('|')) || [];\r\n      let closestPowerOfTenWithAvailableAbbreviation = null;\r\n      for (let distanceFromTarget = 0; distanceFromTarget < scaleDefinitionFromLocale.length; distanceFromTarget++) {\r\n          if (!scaleDefinitionFromLocale[targetPowerOfTenExponent - distanceFromTarget])\r\n              continue;\r\n          closestPowerOfTenWithAvailableAbbreviation = targetPowerOfTenExponent - distanceFromTarget;\r\n          break;\r\n      }\r\n      if (closestPowerOfTenWithAvailableAbbreviation === null) {\r\n          return [value, null];\r\n      }\r\n      return [\r\n          multiplyByPowerOfTen$1(value, -closestPowerOfTenWithAvailableAbbreviation),\r\n          scaleDefinitionFromLocale[closestPowerOfTenWithAvailableAbbreviation],\r\n      ];\r\n  };\r\n  const scaleValueWithAbbreviation = (value, patternRules, options) => {\r\n      const { compact, compactUnit } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact)\r\n          return [value, null];\r\n      if (!!compactUnit) {\r\n          return resolveForcedAbbreviationUnit(compactUnit, abbreviations, value);\r\n      }\r\n      /**\r\n       * If abbreviation is automatic, resolves the abbreviation to the best (where the value has\r\n       * the fewest numbers before the decimal point, but is still higher than 1).\r\n       */\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [scaledValue, localizedUnit] = scale.toBest(value, '');\r\n      return [scaledValue, localizedUnit || null];\r\n  };\r\n\r\n  var scaleValueWithAbbreviation$1 = scaleValueWithAbbreviation;\n\n  const roundNumber = (number, precision, roundingFunction) => {\r\n      const resolvedPrecision = precision || 0;\r\n      const resolvedRoundingFunction = roundingFunction || Math.round;\r\n      const scaledValueForRounding = multiplyByPowerOfTen$1(number, resolvedPrecision);\r\n      const roundedScaledValue = resolvedRoundingFunction(scaledValueForRounding);\r\n      const roundedValue = multiplyByPowerOfTen$1(roundedScaledValue, -resolvedPrecision);\r\n      return roundedValue;\r\n  };\r\n\r\n  var roundNumber$1 = roundNumber;\n\n  /**\r\n   * The result from toFixed can contain an exponent for big numbers (e.g. 1.12345671234567e+50).\r\n   * <!> Only handles positive exponents.\r\n   */\r\n  const formatPositiveExponentResult = (valueAsString) => {\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      if (exponentAsNumber < 0)\r\n          return valueAsString;\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significand, '.');\r\n      const numberOfZerosToAdd = exponentAsNumber - fractionalPartOfSignificand.length;\r\n      return `${integerPartOfSignificand}${fractionalPartOfSignificand}${stringRepeat$1('0', numberOfZerosToAdd)}`;\r\n  };\r\n  /**\r\n   * The result from toFixed can contain an exponent for small numbers (e.g. 1.123e-87).\r\n   * <i> Only handles negative exponents\r\n   */\r\n  const formatNegativeExponentResult = (value, exponentAsNumber, significandAsString) => {\r\n      const negativeExponentAbsoluteValue = Math.abs(exponentAsNumber);\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significandAsString, '.');\r\n      const absoluteIntegerPartOfSignificand = integerPartOfSignificand[0] === '-' ? integerPartOfSignificand.slice(1) : integerPartOfSignificand;\r\n      let outputIntegerPartOfSignificand = absoluteIntegerPartOfSignificand;\r\n      let outputFractionalPartOfSignificand = fractionalPartOfSignificand;\r\n      for (let i = 0; i < negativeExponentAbsoluteValue; i += 1) {\r\n          // Consider using array.shift\r\n          const firstCharInIntegerPart = outputIntegerPartOfSignificand[0] || '';\r\n          outputIntegerPartOfSignificand = outputIntegerPartOfSignificand.slice(0, outputIntegerPartOfSignificand.length - 1);\r\n          outputFractionalPartOfSignificand = (firstCharInIntegerPart || '0') + outputFractionalPartOfSignificand;\r\n      }\r\n      return `${value < 0 ? '-' : ''}${outputIntegerPartOfSignificand || 0}.${outputFractionalPartOfSignificand}`;\r\n  };\r\n  /**\r\n   * Like Number.prototype.toString() but excluding the exponential info for small and big numbers.\r\n   * e.g.\r\n   *     Small numbers:\r\n   *         value: 0.0000000000001234 (1.234e-13)\r\n   *         toString() => \"1.234e-13\"\r\n   *         numberToStringWithoutExponent() => \"0.0000000000001234\"\r\n   *     Big numbers:\r\n   *         value: 1234123412341230000000 (1.234123412341234e+21)\r\n   *         toString() => \"1.234123412341234e+21\"\r\n   *         numberToStringWithoutExponent() => \"1234123412341230000000\"\r\n   */\r\n  const numberToNonExponentialString = (value) => {\r\n      const valueAsString = (value || 0).toString();\r\n      const valueAsStringHasExponentialInfo = valueAsString.indexOf('e') >= 0;\r\n      if (!valueAsStringHasExponentialInfo)\r\n          return valueAsString;\r\n      // If the toString returns an exponential number (e.g. 1.23e+28)\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      return exponentAsNumber >= 0\r\n          ? formatPositiveExponentResult(valueAsString)\r\n          : formatNegativeExponentResult(value, exponentAsNumber, significand);\r\n  };\r\n\r\n  var numberToNonExponentialString$1 = numberToNonExponentialString;\n\n  const addTrailingZerosInFractionalPart = (valueAsString, minimumFractionDigits) => {\r\n      const [integerPart, fractionalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      return `${integerPart}.${fractionalPart + stringRepeat$1('0', minimumFractionDigits - fractionalPart.length)}`;\r\n  };\r\n  /**\r\n   * Implementation of Number.prototype.toFixed() that treats floats more like decimals\r\n   *\r\n   * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n   * problems for accounting- and finance-related software.\r\n   *\r\n   * <!> This function should only receive a finite number, never NaN, Infinity or -Infinity\r\n   * <i> This function should return always a JS string representation of a number, but without exponent.\r\n   * <i> optionalFractionDigits means: from the fractionDigits amount, the ones that are optional.\r\n   */\r\n  const numberToFixed = (finiteNumber, fractionDigits, roundingFunction, optionalFractionDigits) => {\r\n      const valueAsString = numberToNonExponentialString$1(finiteNumber);\r\n      const minimumFractionDigits = fractionDigits - (optionalFractionDigits || 0);\r\n      const fractionalPartOfValueAsString = splitStringInTwoParts$1(valueAsString, '.')[1];\r\n      const targetFractionDigitsAmount = !!fractionalPartOfValueAsString\r\n          ? Math.min(Math.max(fractionalPartOfValueAsString.length, minimumFractionDigits), fractionDigits)\r\n          : minimumFractionDigits;\r\n      const roundedValue = roundNumber$1(finiteNumber, targetFractionDigitsAmount, roundingFunction);\r\n      let output = numberToNonExponentialString$1(roundedValue);\r\n      // Add trailing zeros if needed\r\n      if (!!minimumFractionDigits) {\r\n          output = addTrailingZerosInFractionalPart(output, minimumFractionDigits);\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var numberToFixed$1 = numberToFixed;\n\n  const roundValueAndAddTrailingZeros = (value, patternRules, options) => {\r\n      const { rounding } = options;\r\n      const { minimumFractionDigits, maximumFractionDigits } = patternRules;\r\n      const resolvedRoundingFunction = rounding || Math.round;\r\n      const shouldIncludeDecimalPlaces = minimumFractionDigits > 0 || maximumFractionDigits > 0;\r\n      if (shouldIncludeDecimalPlaces) {\r\n          const optionalDecimalDigitsCount = maximumFractionDigits - minimumFractionDigits;\r\n          return numberToFixed$1(value, maximumFractionDigits, resolvedRoundingFunction, optionalDecimalDigitsCount);\r\n      }\r\n      else {\r\n          return numberToFixed$1(value, 0, resolvedRoundingFunction);\r\n      }\r\n  };\r\n\r\n  var roundValueAndAddTrailingZeros$1 = roundValueAndAddTrailingZeros;\n\n  const replaceDigitsWithNumeralSystem = (numericString, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericString;\r\n      const numericStringLength = numericString.length;\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericString[numericStringIndex];\r\n          output += numeralSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var replaceDigitsWithNumeralSystem$1 = replaceDigitsWithNumeralSystem;\n\n  /**\r\n   * <i> Add or remove leading zeros\r\n   * Expects: a value integer part as string, without the minus sign. And nothing else but a number at the start.\r\n   * Returns:\r\n   *     - The value with the added or removed leading zeros\r\n   */\r\n  const addOrRemoveLeadingZerosToValue = (valueIntegerPartWithoutSign, patternRules) => {\r\n      const { minimumIntegerDigits } = patternRules;\r\n      if (minimumIntegerDigits === 0 && +valueIntegerPartWithoutSign < 1 && +valueIntegerPartWithoutSign > -1) {\r\n          return '';\r\n      }\r\n      return valueIntegerPartWithoutSign.length >= minimumIntegerDigits\r\n          ? valueIntegerPartWithoutSign\r\n          : `${stringRepeat$1('0', minimumIntegerDigits - valueIntegerPartWithoutSign.length)}${valueIntegerPartWithoutSign}`;\r\n  };\r\n\r\n  var addOrRemoveLeadingZerosToValue$1 = addOrRemoveLeadingZerosToValue;\n\n  const addSignInfoToFullFormattedNumber = (fullFormattedValueWithoutSign, isValueNegative, isValueZero, patternRules) => {\r\n      const { negativeParentheses, forceSign } = patternRules;\r\n      let output = fullFormattedValueWithoutSign;\r\n      if (negativeParentheses && isValueNegative) {\r\n          output = output.replace(/'(nps|npe)'/g, match => match === `'nps'` ? '(' : ')');\r\n      }\r\n      else if (forceSign) {\r\n          output = output.replace(`'s'`, isValueNegative ? '-' : isValueZero ? '' : '+');\r\n      }\r\n      else if (isValueNegative) {\r\n          output = output.replace(`'s'`, '-');\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addSignInfoToFullFormattedNumber$1 = addSignInfoToFullFormattedNumber;\n\n  /**\r\n   * Splits the given number (as string) in the integer and decimal parts.\r\n   * Returns:\r\n   *     [integerPart: string, decimalPart: string]\r\n   * <i> The integer part can potentially contain the number sign (-) if it wasn't removed previously.\r\n   * <i> It should always return [string, string]\r\n   */\r\n  const splitNumberIntegerAndDecimalParts = (valueAsString, patternRules) => {\r\n      const { optionalFractionDigits } = patternRules;\r\n      const [integerPart, decimalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      // Checks whether optionalDecimalPlaces [.] is enabled and the value is an integer (no decimals)\r\n      if (optionalFractionDigits && Number(decimalPart) === 0) {\r\n          return [integerPart, ''];\r\n      }\r\n      return [integerPart, decimalPart];\r\n  };\r\n\r\n  var splitNumberIntegerAndDecimalParts$1 = splitNumberIntegerAndDecimalParts;\n\n  const addThousandsSeparatorToValueIntegerPart = (valueIntegerPartWithLeadingZerosAndWithoutSign, patternRules, options) => {\r\n      const { delimiters, digitGroupingStyle } = options.locale;\r\n      const { grouping } = patternRules;\r\n      if (!grouping || !delimiters.thousands) {\r\n          return valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      }\r\n      const valueAsString = valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      const thousandsSeparator = delimiters.thousands;\r\n      const digitGrouping = !!(digitGroupingStyle === null || digitGroupingStyle === void 0 ? void 0 : digitGroupingStyle.length) ? digitGroupingStyle : [3];\r\n      const restDigitGrouping = [...digitGrouping];\r\n      let output = '';\r\n      let groupingSubIteration = 1;\r\n      for (let i = valueAsString.length - 1; i >= 0; i--) {\r\n          if (groupingSubIteration === restDigitGrouping[0] && i !== 0) {\r\n              output = thousandsSeparator + valueAsString[i] + output;\r\n              if (restDigitGrouping.length > 1)\r\n                  restDigitGrouping.shift();\r\n              groupingSubIteration = 1;\r\n          }\r\n          else {\r\n              output = valueAsString[i] + output;\r\n              groupingSubIteration += 1;\r\n          }\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addThousandsSeparatorToValueIntegerPart$1 = addThousandsSeparatorToValueIntegerPart;\n\n  /**\r\n   * Applies the localized abbreviation unit to the pattern mask\r\n   * <i> If the localized unit is empty (''), it will remove the space between the number and the abbreviation.\r\n   * <i> Replaces the single quotes from the abbreviation, to prevent collision with patternMask escaped text.\r\n   */\r\n  const applyAbbreviationLocalizedUnitToPatternMask = (patternMask, abbreviationLocalizedUnit, hasAbbreviationInPatternMask) => {\r\n      if (!hasAbbreviationInPatternMask)\r\n          return patternMask;\r\n      if (abbreviationLocalizedUnit) {\r\n          /**\r\n           * If it has abbreviation in the rules, and has a valid unit (e.g. K | M | B | T, or\r\n           * other localized one), escapes the single quotes in the localized abbreviation unit and appends to the mask.\r\n           */\r\n          return patternMask.replace(`'a'`, _ => `'${abbreviationLocalizedUnit.replace(/'/g, _ => \"\\\\'\")}'`);\r\n      }\r\n      else {\r\n          // If it has abbreviation in the rules, but it has no unit, removes the space between abbreviation and number\r\n          return patternMask.match(/'n'\\s*'a'/)\r\n              // If abbreviation is before\r\n              ? patternMask.replace(/\\s*'a'/, '')\r\n              // If abbreviation is after\r\n              : patternMask.replace(/'a'\\s*/, '');\r\n      }\r\n  };\r\n\r\n  var applyAbbreviationLocalizedUnitToPatternMask$1 = applyAbbreviationLocalizedUnitToPatternMask;\n\n  const scaleAndRoundValue = (number, patternRules, options) => {\r\n      // If it doesn't have abbreviation, just round the value and add trailing zeros\r\n      if (!patternRules.compact) {\r\n          const roundedValueAsString = roundValueAndAddTrailingZeros$1(number, patternRules, options);\r\n          return [roundedValueAsString, null];\r\n      }\r\n      // If it has abbreviation, scales the value\r\n      const [scaledValue, scaledValueLocalizedUnit] = scaleValueWithAbbreviation$1(number, patternRules, options);\r\n      const roundedScaledValue = +roundValueAndAddTrailingZeros$1(scaledValue, patternRules, options);\r\n      const [rescaledValue, rescaledValueLocalizedUnit] = rescaleRoundedValue$1(+roundedScaledValue, scaledValueLocalizedUnit, patternRules, options);\r\n      const roundedRescaledValueAsStringWithTrailingZeros = roundValueAndAddTrailingZeros$1(rescaledValue, patternRules, options);\r\n      return [roundedRescaledValueAsStringWithTrailingZeros, rescaledValueLocalizedUnit];\r\n  };\r\n  const numberToFormattedNumber = (number, pattern, options) => {\r\n      var _a;\r\n      const patternRules = parsePattern$1(pattern);\r\n      // Ensure always uses a number or default number\r\n      const resolvedValue = isFiniteNumber$1(number) ? number : 0;\r\n      const [valueAsString, localizedAbbreviationUnit] = scaleAndRoundValue(resolvedValue, patternRules, options);\r\n      // Prevents potentially wrong formatting coming from this function\r\n      if (valueAsString === 'NaN')\r\n          return '';\r\n      const isValueNegative = options.signedZero ? number < 0 : +valueAsString < 0;\r\n      const isValueZero = options.signedZero ? number === 0 : +valueAsString === 0;\r\n      const valueAsStringWithoutSign = removeSignIfExists$1(valueAsString);\r\n      const [integerPart, decimalPart] = splitNumberIntegerAndDecimalParts$1(valueAsStringWithoutSign, patternRules);\r\n      const valueIntegerPartWithLeadingZeros = addOrRemoveLeadingZerosToValue$1(integerPart, patternRules);\r\n      const valueIntegerPartWithThousandsSeparator = addThousandsSeparatorToValueIntegerPart$1(valueIntegerPartWithLeadingZeros, patternRules, options);\r\n      const numeralSystemFromLocale = options.locale.numeralSystem;\r\n      const integerPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(valueIntegerPartWithThousandsSeparator, numeralSystemFromLocale);\r\n      const decimalPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(decimalPart, numeralSystemFromLocale);\r\n      const fullNumberWithNumeralSystem = (integerPartWithNumeralSystem\r\n          + (!!decimalPartWithNumeralSystem ? (((_a = options.locale.delimiters) === null || _a === void 0 ? void 0 : _a.decimal) || '.') + decimalPartWithNumeralSystem : ''));\r\n      // Assembling\r\n      const patternMaskWithAbbreviation = applyAbbreviationLocalizedUnitToPatternMask$1(patternRules.patternMask, localizedAbbreviationUnit, patternRules.compact);\r\n      const patternMaskWithNumber = patternMaskWithAbbreviation.replace(`'n'`, _ => `'${fullNumberWithNumeralSystem.replace(/'/g, \"\\\\'\")}'`);\r\n      const patternMaskWithSignInfo = addSignInfoToFullFormattedNumber$1(patternMaskWithNumber, isValueNegative, isValueZero, patternRules);\r\n      const cleanPatternMask = patternMaskWithSignInfo.replace(/'(nps|npe|s|a|n)'/g, '');\r\n      const fullFormattedValueWithNormalizedText = patternStripAndNormalizeEscapedText(cleanPatternMask);\r\n      return fullFormattedValueWithNormalizedText;\r\n  };\r\n\r\n  var numberToFormattedNumber$1 = numberToFormattedNumber;\n\n  /**\r\n   * Basis point format (BPS)\r\n   * <i> See https://en.wikipedia.org/wiki/Basis_point\r\n   */\r\n  const bpsFormatter = {\r\n      name: 'bps',\r\n      regexps: {\r\n          format: /BPS/,\r\n          unformat: /BPS/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scaledValue = multiplyByPowerOfTen$1(number, 4);\r\n          const patternWithEscapedBPS = patternReplace(pattern, /BPS/, `'BPS'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBPS, options);\r\n          return formatResult.replace('BPS', 'BPS');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?BPS/, ''), options);\r\n          return isFiniteNumber$1(number) ? multiplyByPowerOfTen$1(number, -4) : number;\r\n      },\r\n  };\r\n\r\n  var bpsFormatter$1 = bpsFormatter;\n\n  const timeFormatter = {\r\n      name: 'time',\r\n      regexps: {\r\n          format: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n          unformat: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n      },\r\n      format: (number) => {\r\n          const absoluteValue = Math.abs(number);\r\n          const sign = number < 0 ? '-' : '';\r\n          const hours = truncateNumber$1(absoluteValue / 3600);\r\n          const minutes = truncateNumber$1((absoluteValue - (hours * 3600)) / 60);\r\n          const seconds = truncateNumber$1(absoluteValue - (hours * 3600) - (minutes * 60));\r\n          return `${sign}${hours}:${(minutes < 10 ? '0' : '') + minutes}:${(seconds < 10 ? '0' : '') + seconds}`;\r\n      },\r\n      unformat: (string) => {\r\n          const isNegative = /^ *-/.test(string);\r\n          const stringWithoutSign = string.replace(/^ *-/, '');\r\n          const timeArray = stringWithoutSign.split(':').reverse();\r\n          let seconds = 0;\r\n          seconds += +timeArray[0];\r\n          seconds += +timeArray[1] * 60;\r\n          seconds += (+timeArray[2] || 0) * 3600;\r\n          return isNegative && seconds !== 0 ? -seconds : seconds;\r\n      },\r\n  };\r\n\r\n  var timeFormatter$1 = timeFormatter;\n\n  const decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n  const binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n  const allSuffixes = decimalSuffixes.concat(binarySuffixes.slice(1));\r\n  /** Avoid collision with BPS format @see formats|bps.ts */\r\n  const unformatRegex = `(${allSuffixes.join('|').replace(/B/g, 'B(?!PS)')})`;\r\n  const bytesDecimalScale = unitScale({ base: 'B', scale: toObject$1(decimalSuffixes, (unit, unitIndex) => [unit, Math.pow(1000, unitIndex)]) });\r\n  const bytesBinaryScale = unitScale({ base: 'B', scale: toObject$1(binarySuffixes, (unit, unitIndex) => [unit, Math.pow(1024, unitIndex)]) });\r\n  const bytesFormatter = {\r\n      name: 'bytes',\r\n      regexps: {\r\n          format: /([0\\s]b[bd])|(b[bd][0\\s])/,\r\n          unformat: (string, options) => options.type === 'bytes' ? new RegExp(unformatRegex).test(string) : false,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scale = patternIncludes(pattern, 'bb') ? bytesBinaryScale : bytesDecimalScale;\r\n          const [scaledValue, scaledValueUnit] = scale.toBest(number, 'B');\r\n          const patternWithEscapedBytes = patternReplace(pattern, /b[bd]/, `'bytes'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBytes, options);\r\n          return formatResult.replace('bytes', scaledValueUnit || '');\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const number = formattedStringToNumber$1(string.replace(new RegExp(unformatRegex), ''), options);\r\n          const suffix = ((_a = string.match(unformatRegex)) === null || _a === void 0 ? void 0 : _a[0]) || '';\r\n          const scale = !!bytesBinaryScale.scaleDefinition.scale[suffix] ? bytesBinaryScale : bytesDecimalScale;\r\n          return number ? scale.toBase(number, suffix) : number;\r\n      }\r\n  };\r\n\r\n  var bytesFormatter$1 = bytesFormatter;\n\n  const ordinalFormatter = {\r\n      name: 'ordinal',\r\n      regexps: {\r\n          format: /o/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a, _b;\r\n          const localizedOrdinal = ((_b = (_a = options.locale).ordinal) === null || _b === void 0 ? void 0 : _b.call(_a, number)) || '';\r\n          const patternWithEscapedOrdinal = patternReplace(pattern, /o/, `'ord'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedOrdinal, options);\r\n          return formatResult.replace('ord', _ => localizedOrdinal);\r\n      }\r\n  };\r\n\r\n  var ordinalFormatter$1 = ordinalFormatter;\n\n  const currencySymbolsMap = {\r\n      EUR: '',\r\n      USD: '$',\r\n      XCD: 'EC$',\r\n      AUD: 'A$',\r\n      INR: '',\r\n      BRL: 'R$',\r\n      CAD: 'CA$',\r\n      XAF: 'FCFA',\r\n      CNY: 'CN',\r\n      NZD: 'NZ$',\r\n      XPF: 'CFPF',\r\n      GBP: '',\r\n      HKD: 'HK$',\r\n      ILS: '',\r\n      JPY: '',\r\n      KRW: '',\r\n      XOF: 'CFA',\r\n      MXN: 'MX$',\r\n      TWD: 'NT$',\r\n      VND: '',\r\n  };\r\n  const currencyFormatter = {\r\n      name: 'currency',\r\n      regexps: {\r\n          format: /(\\$)/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a;\r\n          const currencyFromOptions = (_a = options.currency) === null || _a === void 0 ? void 0 : _a.toUpperCase();\r\n          const localizedCurrencySymbol = currencySymbolsMap[currencyFromOptions] || currencyFromOptions || '';\r\n          const patternWithEscapedCurrencySymbol = patternReplace(pattern, /\\$/, `'currency'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedCurrencySymbol, options);\r\n          return formatResult.replace('currency', _ => localizedCurrencySymbol);\r\n      },\r\n  };\r\n\r\n  var currencyFormatter$1 = currencyFormatter;\n\n  const percentageFormatter = {\r\n      name: 'percentage',\r\n      regexps: {\r\n          format: /%!?/,\r\n          unformat: /%/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const hasNotScalePercentageSymbolInPattern = patternIncludes(pattern, '%!');\r\n          const scaledValue = options.scalePercentage && !hasNotScalePercentageSymbolInPattern ? multiplyByPowerOfTen$1(number, 2) : number;\r\n          const patternWithEscapedPercentage = patternReplace(pattern, /%!?/, `'%'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedPercentage, options);\r\n          return formatResult.replace('%', '%');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?%/, ''), options);\r\n          return number && options.scalePercentage ? multiplyByPowerOfTen$1(number, -2) : number;\r\n      },\r\n  };\r\n\r\n  var percentageFormatter$1 = percentageFormatter;\n\n  const exponentialFormatter = {\r\n      name: 'exponential',\r\n      regexps: {\r\n          format: /[eE][+-][0-9]+/,\r\n          unformat: /[eE][+-][0-9]+/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const exponential = typeof number === 'number' && !isNaNNumber$1(number) ? number.toExponential() : '0e+0';\r\n          const parts = splitStringInTwoParts$1(exponential, 'e');\r\n          const patternWithoutExponential = patternReplace(pattern, /e[+|-]{1}0/i, '');\r\n          const formatResult = numberToFormattedNumber$1(+parts[0], patternWithoutExponential, options);\r\n          return formatResult + 'e' + parts[1];\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const value = formattedStringToNumber$1(string.replace(/e[+-]{1}[0-9]{1,3}/i, ''), options);\r\n          const powerOfTenExponent = +(((_a = string.match(/e([+-]{1}[0-9]{1,3})/i)) === null || _a === void 0 ? void 0 : _a[1]) || '0');\r\n          return isFiniteNumber$1(value) ? multiplyByPowerOfTen$1(value, powerOfTenExponent) : value;\r\n      },\r\n  };\r\n\r\n  var exponentialFormatter$1 = exponentialFormatter;\n\n  const BUILT_IN_FORMATTERS = [\r\n      percentageFormatter$1,\r\n      currencyFormatter$1,\r\n      ordinalFormatter$1,\r\n      timeFormatter$1,\r\n      bytesFormatter$1,\r\n      exponentialFormatter$1,\r\n      bpsFormatter$1,\r\n  ];\r\n\r\n  var BUILT_IN_FORMATTERS$1 = BUILT_IN_FORMATTERS;\n\n  const roundHalfAwayFromZero = (value) => {\r\n      return value >= 0\r\n          ? Math.round(value)\r\n          : (value % 0.5 === 0) ? Math.floor(value) : Math.round(value);\r\n  };\r\n\r\n  var roundHalfAwayFromZero$1 = roundHalfAwayFromZero;\n\n  const areDelimitersValid = (delimiters) => {\r\n      return !!(delimiters === null || delimiters === void 0 ? void 0 : delimiters.decimal)\r\n          && isString$1(delimiters === null || delimiters === void 0 ? void 0 : delimiters.thousands)\r\n          && delimiters.decimal !== delimiters.thousands;\r\n  };\r\n  const resolveOptionsLocale = (optionsLocale) => {\r\n      const defaultLocale = locale$1;\r\n      if (!isObject$1(optionsLocale))\r\n          return defaultLocale;\r\n      return merge(optionsLocale, {\r\n          delimiters: areDelimitersValid(optionsLocale.delimiters) ? optionsLocale.delimiters : defaultLocale.delimiters,\r\n          abbreviations: optionsLocale.abbreviations || defaultLocale.abbreviations,\r\n          ordinal: optionsLocale.ordinal || defaultLocale.ordinal,\r\n      });\r\n  };\r\n  const resolveRoundingOption = (roundingOption) => {\r\n      switch (roundingOption) {\r\n          case 'ceil': return Math.ceil;\r\n          case 'floor': return Math.floor;\r\n          case 'truncate': return truncateNumber$1;\r\n          case 'half-up': return Math.round;\r\n          case 'half-away-from-zero': return roundHalfAwayFromZero$1;\r\n          default: return isFunction$1(roundingOption) ? roundingOption : roundHalfAwayFromZero$1;\r\n      }\r\n  };\r\n  const resolveOptionsFormatters = (optionsFormatters) => {\r\n      if (!optionsFormatters)\r\n          return BUILT_IN_FORMATTERS$1;\r\n      return isFunction$1(optionsFormatters)\r\n          ? optionsFormatters(BUILT_IN_FORMATTERS$1)\r\n          : [...optionsFormatters, ...BUILT_IN_FORMATTERS$1];\r\n  };\r\n  const resolveFormatOptions = (formatOptions) => {\r\n      var _a, _b, _c;\r\n      const options = formatOptions || {};\r\n      const resolvedRoundingFunction = resolveRoundingOption(options.rounding);\r\n      const resolvedLocale = resolveOptionsLocale(options.locale);\r\n      const resolvedFormatters = resolveOptionsFormatters(options.formatters);\r\n      return {\r\n          defaultPattern: options.defaultPattern || '0,0.##########',\r\n          nullFormat: options.nullFormat || '',\r\n          nanFormat: options.nanFormat,\r\n          zeroFormat: options.zeroFormat,\r\n          locale: resolvedLocale,\r\n          rounding: resolvedRoundingFunction,\r\n          type: options.type,\r\n          scalePercentage: (_a = options.scalePercentage) !== null && _a !== void 0 ? _a : true,\r\n          trim: (_b = options.trim) !== null && _b !== void 0 ? _b : true,\r\n          formatters: resolvedFormatters,\r\n          currency: options.currency,\r\n          signedZero: !!options.signedZero,\r\n          nonBreakingSpace: (_c = options.nonBreakingSpace) !== null && _c !== void 0 ? _c : false,\r\n      };\r\n  };\r\n\r\n  var resolveFormatOptions$1 = resolveFormatOptions;\n\n  const getUnformatFunctionIfMatch = (input, resolvedOptions) => {\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.unformat;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(input, resolvedOptions) : !!input.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.unformat;\r\n      }\r\n  };\r\n  const parse$2 = (input, options) => {\r\n      const resolvedOptions = resolveFormatOptions$1(options);\r\n      let value;\r\n      if (isNil$1(input) || isNaNNumber$1(input)) {\r\n          value = null;\r\n      }\r\n      else if (typeof input === 'number') {\r\n          // Handles negative zero\r\n          value = input === 0 ? 0 : input;\r\n      }\r\n      else if (typeof input === 'string') {\r\n          if (resolvedOptions.zeroFormat && input === resolvedOptions.zeroFormat) {\r\n              value = 0;\r\n          }\r\n          else if (resolvedOptions.nullFormat && input === resolvedOptions.nullFormat) {\r\n              value = null;\r\n          }\r\n          else {\r\n              // Removes non-breaking spaces if they exists\r\n              const inputStringWithNormalSpaces = input.replace(/\\u00A0/, ' ');\r\n              const unformatFunctionFromFormatters = getUnformatFunctionIfMatch(inputStringWithNormalSpaces, resolvedOptions);\r\n              const unformatFunction = unformatFunctionFromFormatters || formattedStringToNumber$1;\r\n              value = unformatFunction(inputStringWithNormalSpaces, resolvedOptions);\r\n          }\r\n      }\r\n      else {\r\n          const result = +input;\r\n          value = result === 0 ? result : (result || null);\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var parse$1$1 = parse$2;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * parse('1,250.48')\r\n   * //=> 1250.48\r\n   * parse('10 %')\r\n   * //=> 0.1\r\n   * parse('1 000,582', { locale: fr })\r\n   * //=> 1000.582\r\n   * ```\r\n   * Parse the given numeric-string applying the provided options.\r\n   *\r\n   * options:\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   *\r\n   * @param string string: The numeric-string to parse (e.g. **'10 %'**)\r\n   * @param options options: The options used to parse the numeric-string\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   */\r\n  const parse = (string, options) => {\r\n      return parse$1$1(string, options);\r\n  };\r\n\r\n  var parse$1 = parse;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * round(12.687, 2)\r\n   * //=> 12.69\r\n   * round(12.687)\r\n   * //=> 13\r\n   * round(12.687, 2, Math.floor)\r\n   * //=> 12.68\r\n   * ```\r\n   * Rounds the given number to the specified amount of decimal places.\r\n   *\r\n   * - The **default precision** is 0.\r\n   * - The **default roundingFunction** is Math.round.\r\n   *\r\n   * @param number number: The number to round (e.g. **10.23**)\r\n   * @param precision precision: The desired amount of decimal places (e.g. **2**)\r\n   * @param roundingFunction roundingFunction: The function applied for rounding (e.g. **Math.floor**)\r\n   * */\r\n  const round = (number, precision, roundingFunction) => {\r\n      return roundNumber$1(number, precision, roundingFunction);\r\n  };\r\n\r\n  var round$1 = round;\n\n  const getFormatFunctionIfMatch = (pattern, resolvedOptions) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.format;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(pattern, resolvedOptions) : !!patternWithoutEscapedText.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.format;\r\n      }\r\n  };\r\n  const format$1 = (value, pattern, options) => {\r\n      var _a;\r\n      try {\r\n          const resolvedValue = isString$1(value) ? parseFloat(value) : value;\r\n          const resolvedOptions = resolveFormatOptions$1(options);\r\n          const resolvedPattern = pattern || resolvedOptions.defaultPattern;\r\n          let output;\r\n          if (resolvedValue === Infinity || resolvedValue === -Infinity) {\r\n              output = resolvedValue > 0 ? '' : '-';\r\n          }\r\n          else if (isNaNNumber$1(resolvedValue)) {\r\n              return isString$1(resolvedOptions.nanFormat)\r\n                  ? resolvedOptions.nanFormat\r\n                  : (isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '');\r\n          }\r\n          else if (isNil$1(resolvedValue)) {\r\n              output = isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '';\r\n          }\r\n          else if (resolvedValue === 0 && isString$1(resolvedOptions.zeroFormat)) {\r\n              output = resolvedOptions.zeroFormat;\r\n          }\r\n          else {\r\n              // <!> Here value should always be a number\r\n              const resolvedValueAsNumber = resolvedValue || 0;\r\n              const formatFunctionFromFormatters = getFormatFunctionIfMatch(resolvedPattern, resolvedOptions);\r\n              const resolvedFormatFunction = formatFunctionFromFormatters || numberToFormattedNumber$1;\r\n              output = resolvedFormatFunction(resolvedValueAsNumber, resolvedPattern, resolvedOptions);\r\n          }\r\n          // Ensures that it always returns an string\r\n          output = isString$1(output) ? output : '';\r\n          // Replaces spaces with non-breaking spaces if needed\r\n          output = resolvedOptions.nonBreakingSpace\r\n              ? output.replace(/ /g, _ => '\\u00A0')\r\n              : output;\r\n          // Trims the output if needed\r\n          output = resolvedOptions.trim ? output.trim() : output;\r\n          return output;\r\n      }\r\n      catch (_error) {\r\n          return ((_a = options) === null || _a === void 0 ? void 0 : _a._errorFormat) || '';\r\n      }\r\n  };\r\n\r\n  var format$1$1 = format$1;\n\n  function format(number, arg2, arg3) {\r\n      const pattern = isString$1(arg2) ? arg2 : null;\r\n      const options = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n      return format$1$1(number, pattern, options);\r\n  }\r\n  const createFormatFunction = (options) => {\r\n      const baseOptions = merge(options, {\r\n          locale: isFunction$1(options.locale) ? options.locale() : options.locale,\r\n      });\r\n      return ((value, arg2, arg3) => {\r\n          const pattern = isString$1(arg2) ? arg2 : null;\r\n          const optionsFromArguments = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n          return format$1$1(value, pattern, merge(baseOptions, optionsFromArguments));\r\n      });\r\n  };\r\n  format.withOptions = createFormatFunction;\n\n  const unique = (arr) => {\r\n      if (!arr)\r\n          return [];\r\n      return arr.filter((value, index, self) => self.indexOf(value) === index);\r\n  };\r\n\r\n  var unique$1 = unique;\n\n  // <i> Extracted from https://stackoverflow.com/questions/12006095/javascript-how-to-check-if-character-is-rtl\r\n  const leftToRightMark = '\\u200e';\r\n  const rtlCharsRanges = '\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\r\n  const rtlDirCheck = new RegExp('^[^' + rtlCharsRanges + ']*?[' + rtlCharsRanges + ']');\r\n  const isRTL = (string) => rtlDirCheck.test(string);\r\n  const appendLeftToRightMarkIfIsRTL = (string) => isRTL(string) ? string + leftToRightMark : string;\r\n  // const languagesWith4DigitsGroupingStyle = ['zh', 'yue', 'ko', 'ja'];\r\n  const languagesWith4DigitsGroupingStyle = []; //***\r\n  const toLocaleStringSupportsOptions = () => {\r\n      return typeof Intl === 'object' && !!Intl && typeof Intl.NumberFormat === 'function';\r\n  };\r\n  const getNumeralSystemDigits = (languageTag) => {\r\n      try {\r\n          const localizedNumber = (1234567890).toLocaleString(languageTag, { useGrouping: false });\r\n          const lookupObject = {};\r\n          const repeatedChar = localizedNumber.split('').find((char) => {\r\n              if (lookupObject[char])\r\n                  return true;\r\n              lookupObject[char] = true;\r\n          });\r\n          const digitsWithoutGroupingDelimiters = repeatedChar\r\n              ? localizedNumber.replace(new RegExp(escapeRegexString$1(repeatedChar || ''), 'g'), '')\r\n              : localizedNumber;\r\n          const digitsAsArray = digitsWithoutGroupingDelimiters.split('');\r\n          const sortedDigits = [digitsAsArray[digitsAsArray.length - 1], ...digitsAsArray.slice(0, -1)];\r\n          return sortedDigits.join('');\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingAndFractionDelimiters = (languageTag, digits) => {\r\n      try {\r\n          const localizedNumber = (12345678.123).toLocaleString(languageTag);\r\n          const localizedNumberWithoutDigits = localizedNumber.replace(new RegExp(`[${escapeRegexString$1(digits)}]`, 'g'), '');\r\n          const [groupingDelimiter = ',', fractionDelimiter = '.'] = unique$1(localizedNumberWithoutDigits.split(''));\r\n          return [groupingDelimiter, fractionDelimiter];\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingStyle = (languageTag, groupingDelimiter) => {\r\n      // <i> Handle '4 digits' grouping style for some asian countries (not CLDR)\r\n      if (languagesWith4DigitsGroupingStyle.some(language => languageTag.indexOf(language) === 0))\r\n          return [4];\r\n      try {\r\n          const result = [];\r\n          let subIterationIndex = 0;\r\n          (100000000000).toLocaleString(languageTag).split('').reverse().forEach((digitOrGroupingDelimiter) => {\r\n              if (digitOrGroupingDelimiter === groupingDelimiter) {\r\n                  result.push(subIterationIndex);\r\n                  subIterationIndex = 0;\r\n              }\r\n              else {\r\n                  subIterationIndex += 1;\r\n              }\r\n          });\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === result[resultIndex - 1])\r\n                  result.pop();\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getAbbreviations = (languageTag, digits, type) => {\r\n      try {\r\n          if (!toLocaleStringSupportsOptions())\r\n              return null;\r\n          const intlFormatOptions = { notation: 'compact', useGrouping: false, compactDisplay: type };\r\n          const [digitOfZero, digitOfOne, digitOfTwo] = digits.split('');\r\n          let abbreviations = '';\r\n          for (let i = 1; i < 50; i++) {\r\n              const abbreviationResultForOne = (+(1 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n              if (new RegExp(`^${digitOfOne}[^${digitOfZero}]+$`).test(abbreviationResultForOne)) {\r\n                  if (type === 'long') {\r\n                      const abbreviationResultForTwo = (+(2 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n                      const abbreviationOne = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      const abbreviationTwo = abbreviationResultForTwo.replace(new RegExp(`${digitOfTwo}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviationOne) + ':::' + appendLeftToRightMarkIfIsRTL(abbreviationTwo);\r\n                  }\r\n                  else {\r\n                      const abbreviation = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviation);\r\n                  }\r\n              }\r\n              else {\r\n                  abbreviations += '|';\r\n              }\r\n          }\r\n          // Remove trailing pipes '|'\r\n          let result = abbreviations;\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === '|')\r\n                  result = result.slice(0, -1);\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const baseGetLocaleFromPlatform = (languageTag) => {\r\n      const resolvedLanguageTag = languageTag || 'en';\r\n      const digits = getNumeralSystemDigits(resolvedLanguageTag);\r\n      const resolvedDigits = digits || '0123456789';\r\n      const delimiters = getGroupingAndFractionDelimiters(resolvedLanguageTag, resolvedDigits);\r\n      const [groupingDelimiter, fractionDelimiter] = !!delimiters && delimiters.length >= 2 ? delimiters : [',', '.'];\r\n      const groupingStyle = getGroupingStyle(resolvedLanguageTag, groupingDelimiter);\r\n      const shortAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'short');\r\n      const longAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'long');\r\n      return {\r\n          _abbreviationsLong: longAbbreviations || locale$1.abbreviations,\r\n          code: resolvedLanguageTag,\r\n          delimiters: { thousands: groupingDelimiter, decimal: fractionDelimiter },\r\n          abbreviations: shortAbbreviations || locale$1.abbreviations,\r\n          digitGroupingStyle: !!(groupingStyle === null || groupingStyle === void 0 ? void 0 : groupingStyle.length) ? groupingStyle : undefined,\r\n          numeralSystem: digits !== '0123456789' ? digits === null || digits === void 0 ? void 0 : digits.split('').map(appendLeftToRightMarkIfIsRTL) : undefined,\r\n          ordinal: locale$1.ordinal,\r\n      };\r\n  };\r\n  const getLocaleFromPlatform$2 = memoize$1(baseGetLocaleFromPlatform);\r\n\r\n  var getLocaleFromPlatform$1$1 = getLocaleFromPlatform$2;\n\n  /**\r\n   * Given a language tag (e.g. '**zh**' | '**es**' | '**fr**' | '**en-IN**' | '**zh-Hans**'), returns a NumerableLocale\r\n   * object extracted from the platform Intl.NumberFormat behavior.\r\n   *\r\n   * This locale object can be used in the numerable functions that support i18n (*format* and *parse*).\r\n   * Example:\r\n   * ```javascript\r\n   * format(12345, '0,0.00', { locale: getLocaleFromPlatform('fr') })\r\n   * ```\r\n   *\r\n   * <i> Take into account that the returned locale is not complete, and some features like\r\n   *     'ordinal formatting' won't work. Use this feature only for simple applications that don't require\r\n   *     full support from numeral, and don't target legacy browsers.\r\n   */\r\n  const getLocaleFromPlatform = (languageTag) => {\r\n      return getLocaleFromPlatform$1$1(languageTag);\r\n  };\r\n\r\n  var getLocaleFromPlatform$1 = getLocaleFromPlatform;\n\n  var numerable = {\n    __proto__: null,\n    format,\n    getLocaleFromPlatform: getLocaleFromPlatform$1,\n    parse: parse$1,\n    round: round$1\n  };\n\n  // Extend\r\n  Object.assign(ew$1, numerable);\n\n})(ew, jQuery, luxon);\n"],"mappings":"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"}